{"remainingRequest":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\antd_vue\\ant-design-pro-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\antd_vue\\ant-design-pro-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\antd_vue\\ant-design-pro-vue\\src\\views\\robot\\MapList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\antd_vue\\ant-design-pro-vue\\src\\views\\robot\\MapList.vue","mtime":1565774004208},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1562295152232},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1562032167570},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1562295152232},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1562295154751}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { STable } from '@/components';\nimport { PageView } from '@/layouts';\nimport ShowMap from \"./modules/ShowMap\";\nimport EditMap from \"./modules/EditMap\";\nimport { queryData } from '@/api/common';\nexport default {\n  name: 'TableList',\n  components: {\n    STable: STable,\n    PageView: PageView,\n    ShowMap: ShowMap,\n    EditMap: EditMap\n  },\n  data: function data() {\n    var _this2 = this;\n\n    return {\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 查询参数\n      queryParam: {\n        robotName: '',\n        mapName: '',\n        orgId: ''\n      },\n      columns: [{\n        title: '地图编码',\n        dataIndex: 'id',\n        scopedSlots: {\n          customRender: 'id'\n        }\n      }, {\n        title: '地图名称',\n        dataIndex: 'mapName',\n        scopedSlots: {\n          customRender: 'mapName'\n        }\n      }, {\n        title: '上传时间',\n        dataIndex: 'updateDate',\n        scopedSlots: {\n          customRender: 'updateDate'\n        }\n      }, {\n        title: '上传机器人',\n        dataIndex: 'robotName',\n        scopedSlots: {\n          customRender: 'robotName'\n        }\n      }, {\n        title: '所属单位',\n        dataIndex: 'orgName',\n        scopedSlots: {\n          customRender: 'orgName'\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      // 加载数据方法 必须为 Promise 对象\n      loadData: function loadData(parameter) {\n        var userId = JSON.parse(localStorage.getItem('user')).id;\n        return queryData(Object.assign(parameter, _this2.queryParam, {\n          userId: userId\n        }), '/robotMapLib/list').then(function (res) {\n          console.log(res);\n          return res.result;\n        });\n      },\n      orgNames: []\n    };\n  },\n  computed: {\n    title: function title() {\n      return this.$route.meta.title;\n    }\n  },\n  created: function created() {\n    this.handleOrgLists();\n  },\n  methods: {\n    // 获取该用户下的所属单位\n    handleOrgLists: function handleOrgLists() {\n      var _this = this;\n\n      var id = JSON.parse(localStorage.getItem('user')).id;\n      var param = {\n        userId: id\n      };\n      queryData(param, '/robotInfo/getOrglist').then(function (res) {\n        _this.orgNames = res.result;\n\n        if (res.code !== 0) {\n          _this.$message.error(res.message);\n        }\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    filterOption: function filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    // 表单重置\n    resetQuery: function resetQuery() {\n      this.queryParam = {};\n      this.$refs.table.refresh(true);\n    },\n    // 搜索内容\n    searchData: function searchData() {\n      this.$refs.table.refresh(true);\n    },\n    handleOk: function handleOk() {\n      this.$refs.table.refresh(true);\n    },\n    handleEditVisible: function handleEditVisible(record) {\n      this.$refs.editModal.add(record);\n    },\n    handleShowMap: function handleShowMap(record) {\n      this.$refs.showMap.add(record);\n    }\n  }\n};",{"version":3,"sources":["MapList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\">\r\n        <a-row :gutter=\"48\">\r\n        <a-col :md=\"6\" :sm=\"24\">\r\n            <a-form-item label=\"地图名称\">\r\n                <a-input v-model=\"queryParam.mapName\"/>\r\n            </a-form-item>\r\n        </a-col>\r\n          <a-col :md=\"6\" :sm=\"24\">\r\n            <a-form-item label=\"机器人名称\">\r\n              <a-input v-model=\"queryParam.robotName\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"24\">\r\n            <a-form-item label=\"所属单位\">\r\n              <a-select\r\n                v-model=\"queryParam.orgId\"\r\n                showSearch\r\n                placeholder=\"选择所属单位\"\r\n                optionFilterProp=\"children\"\r\n                :filterOption=\"filterOption\"\r\n              >\r\n                <a-select-option v-for=\"(item ,key) in orgNames\" :key=\"key\" :value=\"item.id\">\r\n                  {{item.name}}\r\n                </a-select-option>\r\n              </a-select>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"8\" :sm=\"24\" style=\"margin-bottom:20px;\">\r\n              <a-button type=\"primary\" @click=\"searchData()\">查询</a-button>\r\n              <a-button style=\"margin-left: 8px\" @click=\"resetQuery()\">重置</a-button>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n    <s-table\r\n        ref=\"table\"\r\n        size=\"default\"\r\n        rowKey=\"id\"\r\n        :columns=\"columns\"\r\n        :data=\"loadData\"\r\n        showPagination=\"auto\"\r\n      >\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <template>\r\n            <a @click=\"handleEditVisible(record)\" v-action:edit>编辑</a>\r\n            <a-divider type=\"vertical\"  v-action:edit />\r\n            <a @click=\"handleShowMap(record)\">查看记录点</a>\r\n          </template>\r\n        </span>\r\n      </s-table>\r\n    <edit-map ref=\"editModal\" @ok=\"handleOk\" /> \r\n    <show-map ref=\"showMap\" @ok=\"handleOk\" />\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\nimport { STable } from '@/components'\r\nimport { PageView } from '@/layouts'\r\nimport ShowMap from './modules/ShowMap'\r\nimport EditMap from './modules/EditMap'\r\nimport { queryData } from '@/api/common';\r\n\r\nexport default {\r\n  name: 'TableList',\r\n  components: {\r\n    STable,\r\n    PageView,\r\n    ShowMap,\r\n    EditMap\r\n  },\r\n  data () {\r\n    return {\r\n      // 高级搜索 展开/关闭\r\n      advanced: false,\r\n       // 查询参数\r\n      queryParam: {\r\n        robotName:'',\r\n        mapName:'',\r\n        orgId:''\r\n      },\r\n      columns: [\r\n        {\r\n          title: '地图编码',\r\n          dataIndex: 'id',\r\n          scopedSlots: { customRender: 'id' }\r\n        },\r\n        {\r\n          title: '地图名称',\r\n          dataIndex: 'mapName',\r\n          scopedSlots: { customRender: 'mapName' }\r\n        },\r\n        {\r\n          title: '上传时间',\r\n          dataIndex: 'updateDate',\r\n          scopedSlots: { customRender: 'updateDate' }\r\n        },\r\n        {\r\n          title: '上传机器人',\r\n          dataIndex: 'robotName',\r\n          scopedSlots: { customRender: 'robotName' }\r\n        },\r\n        {\r\n          title: '所属单位',\r\n          dataIndex: 'orgName',\r\n          scopedSlots: { customRender: 'orgName' }\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'action',\r\n          scopedSlots: { customRender: 'action' }\r\n        }\r\n      ],\r\n      // 加载数据方法 必须为 Promise 对象\r\n      loadData: parameter => {\r\n          var userId = JSON.parse(localStorage.getItem('user')).id;\r\n        return queryData(Object.assign(parameter, this.queryParam,{userId}),'/robotMapLib/list')\r\n          .then(res => {\r\n            console.log(res);\r\n            return res.result\r\n          })\r\n      },\r\n      orgNames:[],\r\n    }\r\n  },\r\n  computed: {\r\n    title () {\r\n      return this.$route.meta.title\r\n    },\r\n    \r\n  },\r\n  created(){\r\n    this.handleOrgLists();\r\n  },\r\n  methods: {\r\n      // 获取该用户下的所属单位\r\n    handleOrgLists(){\r\n      var _this = this;\r\n      var id = JSON.parse(localStorage.getItem('user')).id;\r\n      var param = { userId : id }\r\n      queryData(param,'/robotInfo/getOrglist').then(res => {\r\n        _this.orgNames = res.result;\r\n        if(res.code !== 0){\r\n          _this.$message.error(res.message)\r\n        }\r\n          \r\n      }).catch( (err) => console.log(err))\r\n    },\r\n    \r\n    filterOption(input, option) {\r\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n    },\r\n    // 表单重置\r\n    resetQuery(){\r\n      this.queryParam = {};\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    // 搜索内容\r\n    searchData(){\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    handleOk(){\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    handleEditVisible(record){\r\n        this.$refs.editModal.add(record);\r\n    },\r\n    handleShowMap(record){\r\n        this.$refs.showMap.add(record);        \r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .search {\r\n    margin-bottom: 54px;\r\n  }\r\n\r\n  .fold {\r\n    width: calc(100% - 216px);\r\n    display: inline-block\r\n  }\r\n\r\n  .operator {\r\n    margin-bottom: 18px;\r\n  }\r\n\r\n  @media screen and (max-width: 900px) {\r\n    .fold {\r\n      width: 100%;\r\n    }\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views/robot"}]}