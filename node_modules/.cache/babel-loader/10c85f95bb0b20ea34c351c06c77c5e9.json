{"remainingRequest":"/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/node_modules/thread-loader/dist/cjs.js!/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/node_modules/babel-loader/lib/index.js!/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/node_modules/eslint-loader/index.js??ref--13-0!/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/src/utils/request.js","dependencies":[{"path":"/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/src/utils/request.js","mtime":1578119251374},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/node_modules/thread-loader/dist/cjs.js","mtime":1571637441620},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/node_modules/babel-loader/lib/index.js","mtime":1571637266900},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/publicSecurityConvenient/node_modules/eslint-loader/index.js","mtime":1571637323383}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport axios from 'axios';\nimport store from '@/store';\nimport { VueAxios } from \"./axios\";\nimport notification from 'ant-design-vue/es/notification';\nimport { ACCESS_TOKEN } from '@/store/mutation-types'; // 创建 axios 实例\n\nvar service = axios.create({\n  baseURL: '/',\n  // api base_url\n  timeout: 6000 // 请求超时时间\n\n});\n\nvar err = function err(error) {\n  if (error.response) {\n    var data = error.response.data;\n    var token = Vue.ls.get(ACCESS_TOKEN);\n\n    if (error.response.status === 403) {\n      notification.error({\n        message: 'Forbidden',\n        description: data.message\n      });\n    }\n\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n      notification.error({\n        message: 'Unauthorized',\n        description: 'Authorization verification failed'\n      });\n\n      if (token) {\n        store.dispatch('Logout').then(function () {\n          setTimeout(function () {\n            window.location.reload();\n          }, 1500);\n        });\n      }\n    }\n  }\n\n  return Promise.reject(error);\n}; // request interceptor\n\n\nservice.interceptors.request.use(function (config) {\n  var token = Vue.ls.get(ACCESS_TOKEN);\n\n  if (token) {\n    config.headers['Access-Token'] = token; // 让每个请求携带自定义 token 请根据实际情况自行修改\n  }\n\n  return config;\n}, err); // response interceptor\n\nservice.interceptors.response.use(function (response) {\n  return response.data;\n}, err);\nvar installer = {\n  vm: {},\n  install: function install(Vue) {\n    Vue.use(VueAxios, service);\n  }\n};\nexport { installer as VueAxios, service as axios };\nexport default {\n  install: function install(Vue) {\n    // 防重复点击(指令实现)\n    Vue.directive('preventReClick', {\n      inserted: function inserted(el, binding) {\n        el.addEventListener('click', function () {\n          if (!el.disabled) {\n            el.disabled = true;\n            setTimeout(function () {\n              el.disabled = false;\n            }, binding.value || 3000);\n          }\n        });\n      }\n    });\n  }\n};",null]}