{"remainingRequest":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/thread-loader/dist/cjs.js!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/babel-loader/lib/index.js!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/EditImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/EditImage.vue","mtime":1587698689623},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/thread-loader/dist/cjs.js","mtime":1571637441620},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/babel-loader/lib/index.js","mtime":1571637266900},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js","mtime":1571637450640}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryData, addData } from '@/api/common';\nimport { STable } from '@/components';\nimport { uploadUrl } from '@/api/upload';\nimport { constants } from 'fs';\nexport default {\n  components: {\n    STable: STable\n  },\n  data: function data() {\n    return {\n      edit: '',\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 7\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 13\n        }\n      },\n      defaultValue: 1,\n      uploadPic: false,\n      showNetUrl: false,\n      visible: false,\n      fileName: '',\n      picName: '',\n      uploadRadio: '',\n      appImageVisible: false,\n      showPic: true,\n      appImageWebUrl: '',\n      // 图片访问地址\n      descnVisible: false,\n      fileList: [],\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      queryParam: {},\n      imageList: [],\n      options: false,\n      optionAlertShow: false,\n      url: ''\n    };\n  },\n  created: function created() {},\n  methods: {\n    getImageList: function getImageList() {\n      var id = JSON.parse(localStorage.getItem('user')).orgId;\n      var param = {\n        orgId: id\n      };\n\n      var _this = this;\n\n      queryData(param, '/skillOptionFile/getFileListByType').then(function (res) {\n        _this.imageList = res.picture;\n\n        if (res.code !== 0) {\n          _this.$message.error(res.message);\n        }\n      });\n    },\n    changePicRadio: function changePicRadio(option) {\n      console.log(option.target.value);\n      var values = option.target.value;\n      this.uploadRadio = values; // 资源库\n\n      if (values == '1') {\n        this.showPic = true;\n        this.uploadPic = false;\n        this.showName = false;\n        this.showNetUrl = false;\n        this.descnVisible = false;\n      } // 网络资源\n\n\n      if (values == '2') {\n        this.showPic = false;\n        this.uploadPic = false;\n        this.showName = true;\n        this.showNetUrl = true;\n        this.descnVisible = false;\n        this.picName = '';\n      } // 自定义模块\n\n\n      if (values == '3') {\n        this.showPic = false;\n        this.uploadPic = false;\n        this.showName = true;\n        this.showNetUrl = false;\n        this.descnVisible = true;\n        this.picName = '';\n      } // 重新上传\n\n\n      if (values == '4') {\n        this.showPic = false;\n        this.uploadPic = true;\n        this.showName = true;\n        this.showNetUrl = false;\n        this.descnVisible = false;\n      }\n    },\n    add: function add(record) {\n      console.log(record);\n      this.getImageList();\n      this.visible = true;\n\n      if (record.keyWordStr != undefined) {\n        this.defaultValue = 3;\n        this.descnVisible = true;\n        this.showPic = false;\n      } else {\n        this.defaultValue = 1;\n        this.showPic = true;\n        this.descnVisible = false;\n      }\n\n      this.edit = record;\n      this.url = uploadUrl + 'appImage/fileUpload';\n    },\n    filterOption: function filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    handleSubmit: function handleSubmit() {\n      var _this2 = this;\n\n      var validateFields = this.form.validateFields;\n\n      var _this = this;\n\n      this.confirmLoading = true;\n      validateFields(function (errors, values) {\n        if (!errors) {\n          if (_this2.fileName == '' && _this2.uploadRadio == '4') {\n            _this2.$message.error('请上传图片');\n\n            return;\n          }\n\n          var param = {\n            id: _this.edit.id,\n            fileName: _this2.fileName\n          };\n          console.log(param);\n          console.log(values);\n          queryData(_objectSpread({}, param, values), '/appImage/edit').then(function (res) {\n            if (res.code == 0) {\n              _this.$message.success('修改成功');\n            } else {\n              _this.$message.error(res.message);\n            }\n\n            _this.visible = false;\n            _this.confirmLoading = false;\n\n            _this.$emit('ok', values); // 重置输入框内容\n\n\n            _this.form.resetFields();\n          });\n        } else {\n          _this2.confirmLoading = false;\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.appImageVisible = false;\n    },\n    // 公共图片选择列表监听事件\n    handleAppImageChange2: function handleAppImageChange2(value, option) {\n      this.edit.name = option.key;\n    },\n    // 文件预览\n    handlePreview: function handlePreview(file) {\n      console.log(file.url + '/' + file.thumbUrl);\n      this.appImageWebUrl = file.url || file.thumbUrl;\n      this.appImageVisible = true;\n    },\n    // 删除文件\n    handleRemoveFile: function handleRemoveFile(file) {\n      var _this = this;\n\n      queryData({\n        fileName: file.response.fileName\n      }, '/appImage/delFile').then(function (res) {\n        if (res.code == 0) {\n          _this.$message.error(res.message);\n\n          return true;\n        } else {\n          _this.$message.error(res.message);\n\n          return false;\n        }\n      });\n    },\n    // 文件长传监听\n    handleChange: function handleChange(_ref) {\n      var fileList = _ref.fileList;\n\n      if (fileList.length > 0) {\n        if (fileList[0].status == 'done') {\n          var res = fileList[0].response;\n          console.log(res);\n\n          if (res.code == 0) {\n            this.fileName = res.fileName;\n            this.$message.success(\"\".concat(res.fileName, \" \\u4E0A\\u4F20\\u6210\\u529F\"));\n          } else {\n            this.$message.error(res.message);\n          }\n        }\n      }\n\n      this.fileList = fileList;\n    }\n  }\n};",null]}