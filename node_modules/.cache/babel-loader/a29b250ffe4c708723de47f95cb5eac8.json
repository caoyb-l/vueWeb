{"remainingRequest":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/thread-loader/dist/cjs.js!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/babel-loader/lib/index.js!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/EditImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/EditImage.vue","mtime":1575082421411},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/thread-loader/dist/cjs.js","mtime":1571637441620},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/babel-loader/lib/index.js","mtime":1571637266900},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js","mtime":1571637450640}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryData, addData } from '@/api/common';\nimport { STable } from '@/components';\nimport { constants } from 'fs';\nexport default {\n  components: {\n    STable: STable\n  },\n  data: function data() {\n    return {\n      edit: {\n        id: 0,\n        name: \"\",\n        fileName: \"\",\n        imageName: '',\n        descn: \"\"\n      },\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 7\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 13\n        }\n      },\n      visible: false,\n      appImageVisible: false,\n      appImageWebUrl: '',\n      //图片访问地址\n      descnVisible: false,\n      updataVisible: false,\n      fileList: [],\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      queryParam: {},\n      imageList: [{\n        \"fileName\": '123456.png',\n        \"name\": \"党建待机（创创）\"\n      }, {\n        \"fileName\": '123457.png',\n        \"name\": \"教育待机（创创）\"\n      }, {\n        \"fileName\": '123458.png',\n        \"name\": \"医疗待机（创创）\"\n      }, {\n        \"fileName\": '123459.png',\n        \"name\": \"政务待机（创创）\"\n      }],\n      // 表头\n      columns: [{\n        title: '#',\n        dataIndex: 'no',\n        scopedSlots: {\n          customRender: 'serial'\n        }\n      }, {\n        title: '机器人名称',\n        dataIndex: 'robotName',\n        scopedSlots: {\n          customRender: 'robotName'\n        }\n      }, {\n        title: '机器人编码',\n        dataIndex: 'code',\n        scopedSlots: {\n          customRender: 'code'\n        }\n      }],\n      // 加载数据方法 必须为 Promise 对象\n      data: [],\n      options: false,\n      optionAlertShow: false\n    };\n  },\n  created: function created() {},\n  methods: {\n    add: function add(record) {\n      console.log(record);\n      this.visible = true;\n\n      if (record.type == \"主页\") {\n        this.descnVisible = true;\n        this.updataVisible = false;\n        this.edit.descn = record.descn;\n      } else {\n        this.updataVisible = true;\n        this.descnVisible = false;\n      }\n\n      this.edit.id = record.id;\n      this.edit.fileName = record.fileName;\n      this.edit.imageName = record.name;\n      this.edit.name = record.name;\n      this.data = [];\n      this.data.push(record);\n    },\n    filterOption: function filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    handleSubmit: function handleSubmit() {\n      var _this2 = this;\n\n      var validateFields = this.form.validateFields;\n\n      var _this = this;\n\n      this.confirmLoading = true;\n      validateFields(function (errors, values) {\n        if (!errors) {\n          if (_this2.edit.name == '' || _this2.edit.name == null) {\n            _this2.$message.error('懒得名称都不写了？😈');\n\n            return;\n          }\n\n          var param = {\n            name: _this2.edit.name,\n            descn: _this2.edit.descn,\n            entityId: _this.edit.id,\n            fileName: _this2.edit.fileName\n          };\n          queryData(_objectSpread({}, param, values), '/appImage/save').then(function (res) {\n            if (res.code == 0) {\n              _this.$message.success('修改成功');\n\n              _this2.edit = {\n                id: 0,\n                name: \"\",\n                fileName: \"\",\n                imageName: '',\n                descn: \"\"\n              };\n            } else {\n              _this.$message.error(res.message);\n            }\n\n            _this.visible = false;\n            _this.confirmLoading = false;\n\n            _this.$emit('ok', values); // 重置输入框内容\n\n\n            _this.form.resetFields();\n          });\n        } else {\n          _this2.confirmLoading = false;\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.appImageVisible = false;\n    },\n    //公共图片选择列表监听事件\n    handleAppImageChange2: function handleAppImageChange2(value) {\n      this.edit.fileName = value;\n    },\n    //文件预览\n    handlePreview: function handlePreview(file) {\n      console.log(file.url + \"/\" + file.thumbUrl);\n      this.appImageWebUrl = file.url || file.thumbUrl;\n      this.appImageVisible = true;\n    },\n    // 删除文件\n    handleRemoveFile: function handleRemoveFile(file) {\n      var _this = this;\n\n      queryData({\n        fileName: file.response.fileName\n      }, '/appImage/delFile').then(function (res) {\n        if (res.code == 0) {\n          _this.$message.error(res.message);\n\n          return true;\n        } else {\n          _this.$message.error(res.message);\n\n          return false;\n        }\n      });\n    },\n    //文件长传监听\n    handleChange: function handleChange(_ref) {\n      var fileList = _ref.fileList;\n\n      if (fileList.length > 0) {\n        if (fileList[0].status == 'done') {\n          var res = fileList[0].response;\n          console.log(res);\n\n          if (res.code == 0) {\n            this.edit.fileName = res.fileName;\n            this.$message.success(\"\".concat(res.fileName, \" \\u4E0A\\u4F20\\u6210\\u529F\"));\n          } else {\n            this.$message.error(res.message);\n          }\n        }\n      }\n\n      this.fileList = fileList;\n    }\n  }\n};",null]}