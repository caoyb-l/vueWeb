{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-459b7165\"],{1862:function(e,t,a){\"use strict\";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"10px\"},attrs:{title:\"动作集制作\",width:\"68%\",footer:null,destroyOnClose:!0,maskClosable:!1,keyboard:!1},on:{cancel:e.handleSubmit},model:{value:e.showIframe,callback:function(t){e.showIframe=t},expression:\"showIframe\"}},[a(\"iframe\",{ref:\"iframe\",staticStyle:{margin:\"-33px 0px -25px -30px\"},attrs:{src:e.cmdSrc,scrolling:\"no\",height:\"600px\",width:\"100%\",frameborder:\"0\"}})])},r=[],i=(a(\"2934\"),a(\"2af9\")),o={name:\"TableList\",components:{STable:i[\"f\"]},data:function(){return{returnCmd:\"\",form:this.$form.createForm(this),showIframe:!1,cmdSrc:\"http://robot.lovechuangchuang.com:8084/robot.html\"}},mounted:function(){var e=this;window.addEventListener(\"message\",function(t){e.returnCmd=t.data})},methods:{show:function(e,t,a){var s=JSON.parse(localStorage.getItem(\"user\")),r=\"?orgId=\"+s.orgId+\"&createBy=\"+s.id+\"&circulation=1&mapId=\"+t+\"&title=\"+e+\"&cmd=\"+a;this.cmdSrc=this.cmdSrc+encodeURI(r),console.log(this.cmdSrc),this.showIframe=!0},handleSubmit:function(){\"\"!=this.returnCmd&&this.$emit(\"getCmdId\",this.returnCmd),this.showIframe=!1}}},n=o,l=a(\"2877\"),c=Object(l[\"a\"])(n,s,r,!1,null,null,null);t[\"a\"]=c.exports},\"1ee7\":function(e,t,a){\"use strict\";var s=a(\"90f3\"),r=a.n(s);r.a},\"4a84\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:6,sm:24}},[a(\"a-form-item\",{attrs:{label:\"机器人编码\"}},[a(\"a-input\",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"span\",{staticClass:\"table-page-search-submitButtons\"},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")]),a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v(\"新建\")])],1)])],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,s,r){return a(\"span\",{},[e._v(\"\\n      \"+e._s(r+1)+\"\\n    \")])}},{key:\"remark\",fn:function(t){return a(\"span\",{},[a(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"action\",fn:function(t,s){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(s)}}},[e._v(\"编辑\")]),a(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDeleteUser(s)}}},[e._v(\"删除\")])]],2)}}])}),a(\"edit-form\",{ref:\"editModal\",on:{ok:e.handleRefresh}}),a(\"create-form\",{ref:\"createModal\",on:{ok:e.handleRefresh}})],1)},r=[],i=a(\"2af9\"),o=a(\"680a\"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"20px\"},attrs:{title:\"修改定时任务\",width:900,destroyOnClose:!0,maskClosable:!1},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"执行周期类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"type\",{rules:[{required:!0,message:\"执行周期类型\"}],initialValue:this.typeName}],expression:\"[\\n            'type',\\n            {rules: [{required: true, message: '执行周期类型' }],initialValue: this.typeName}\\n          ]\"}],attrs:{placeholder:\"请选择执行周期类型\",optionFilterProp:\"children\"},on:{change:e.display}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"每天执行\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"每周几执行\")]),a(\"a-select-option\",{attrs:{value:\"3\"}},[e._v(\"定期执行一次\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"定时任务类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"taskType\",{rules:[{required:!0,message:\"定时任务类型\"}],initialValue:e.editData.taskType}],expression:\"['taskType',{rules: [{required: true, message: '定时任务类型' }],initialValue: editData.taskType}]\"}],attrs:{showSearch:\"\",placeholder:\"请选择定时任务类型\",optionFilterProp:\"children\"},on:{change:e.taskDisplay}},e._l(e.taskTypeList,function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.code}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1)],1),this.showTimePoint?a(\"a-form-item\",{attrs:{label:\"执行日期\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"timePoint\",{rules:[{required:!0,message:\"\"}],initialValue:this.timePointMoment}],expression:\"[\\n            'timePoint',\\n            {rules: [{ required: true, message: '' }],initialValue: this.timePointMoment}\\n          ]\"}],attrs:{placeholder:\"请选择执行日期\"},on:{change:e.timePointStr}})],1):e._e(),this.showWeek?a(\"a-form-item\",{attrs:{label:\"选择周期\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-checkbox-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"weekList\",{rules:[{required:!0,message:\"请选择执行周期\"}],initialValue:e.editData.weekList}],expression:\"[\\n            'weekList',\\n            {rules: [{ required: true, message: '请选择执行周期' }],initialValue: editData.weekList}\\n          ]\"}],attrs:{options:e.week}})],1):e._e(),this.showTime?a(\"a-form-item\",{attrs:{label:\"执行时间\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-time-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"time\",{rules:[{required:!0,message:\"请选择执行时间\"}],initialValue:this.timeMoment}],expression:\"[\\n            'time',\\n            {rules: [{ required: true, message: '请选择执行时间' }],initialValue: this.timeMoment}\\n          ]\"}],attrs:{placeholder:\"选择执行时间\",format:\"HH:mm\"},on:{change:e.timeStr}})],1):e._e(),this.showMap?a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\",{initialValue:e.editData.mapId}],expression:\"['mapId',{initialValue: editData.mapId}]\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1):e._e(),this.showCmd?a(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{rules:[{required:!0,message:\"请选择或者新增一个动作集\"}],initialValue:e.editData.cmdId}],expression:\"[\\n            'cmd',\\n            {rules: [{ required: true, message: '请选择或者新增一个动作集' }],initialValue: editData.cmdId}\\n          ]\"}],attrs:{showSearch:\"\",placeholder:\"选择动作集\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"新增一个动作集\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?a(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改当前动作集\")]):e._e()],1):e._e(),this.showMessage?a(\"a-form-item\",{attrs:{label:\"语音内容\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"message\",{rules:[{required:!0,message:\"请输入语音内容\"}],initialValue:e.editData.message}],expression:\"[\\n            'message',\\n            {rules: [{ required: true, message: '请输入语音内容' }],initialValue: editData.message}\\n          ]\"}],attrs:{placeholder:\"语音内容\"}})],1):e._e(),a(\"a-form-item\",{attrs:{label:\"定时任务描述\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"remark\",{rules:[{message:\"请输入描述\"}],initialValue:e.editData.remark}],expression:\"[\\n            'remark',\\n            {rules: [{ message: '请输入描述' }],initialValue: editData.remark}\\n          ]\"}],attrs:{placeholder:\"请输入描述\",rows:4}})],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},l=[],c=(a(\"c5f6\"),a(\"7cdf\"),a(\"2934\")),m=a(\"1862\"),d=a(\"c1df\"),h=a.n(d),u=[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\"],p={components:{CmdList:m[\"a\"]},data:function(){return{headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),editData:\"\",week:u,showTimePoint:!1,showWeek:!1,showTime:!1,showMap:!1,showCmd:!1,showMessage:!1,timePoint:\"\",timePointMoment:\"\",time:\"\",timeMoment:\"\",weekList:[],cmdList:[],mapList:[],taskTypeList:[],showEditCmd:!0,cmd:\"\",typeName:\"\"}},created:function(){this.getCmd(),this.getMap(),this.getTaskType()},methods:{display:function(e){\"1\"===e&&(this.showTime=!0,this.showTimePoint=!1,this.showWeek=!1),\"2\"===e&&(this.showTime=!0,this.showTimePoint=!1,this.showWeek=!0),\"3\"===e&&(this.showTime=!0,this.showTimePoint=!0,this.showWeek=!1)},taskDisplay:function(e){\"800\"===e?(this.showCmd=!0,this.showMap=!0,this.showMessage=!1):\"801\"===e?(this.showCmd=!1,this.showMap=!1,this.showMessage=!0):(this.showCmd=!1,this.showMap=!1,this.showMessage=!1)},getTaskType:function(){var e=this,t={};Object(c[\"b\"])(t,\"/timedTask/getTaskType\").then(function(t){e.taskTypeList=t.result,0!==t.code&&e.$message.error(t.message)})},changeCmd:function(e){this.cmd=e,this.showEditCmd=!0},getCmdId:function(e){console.log(e),this.getCmd(),this.form.setFieldsValue({cmd:parseInt(e)})},editCmd:function(){var e=this.form.getFieldsValue(),t=void 0===e.mapId?0:e.mapId;this.$refs.cmd.show(\"编辑动作集\",t,this.cmd)},addCmd:function(){var e=this.form.getFieldsValue(),t=void 0===e.mapId?0:e.mapId;this.$refs.cmd.show(\"新增动作集\",t,0)},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0===e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},timePointStr:function(e,t){this.timePoint=t},timeStr:function(e,t){this.time=t},selectWeek:function(e){this.weekList=e,console.log(this.weekList)},edit:function(e){console.log(e),this.form.resetFields(),this.editData=e,this.cmd=e.cmdId,this.timeMoment=h()(e.times,\"HH:mm\"),this.time=e.times,this.visible=!0,1===e.type&&(this.typeName=\"每天执行\",this.showTime=!0,this.showTimePoint=!1,this.showWeek=!1),2===e.type&&(this.typeName=\"每周执行\",this.showTime=!0,this.showTimePoint=!1,this.showWeek=!0),3===e.type&&(this.typeName=\"指定时间执行\",this.timePointMoment=h()(e.timePoint,\"YYYY-MM-DD\"),this.timePoint=e.timePoint,this.showTime=!0,this.showTimePoint=!0,this.showWeek=!1),\"800\"===e.taskType?(this.showCmd=!0,this.showMap=!0,this.showMessage=!1):\"801\"===e.taskType?(this.showCmd=!1,this.showMap=!1,this.showMessage=!0):(this.showCmd=!1,this.showMap=!1,this.showMessage=!1)},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{a.time=e.time,a.timePoint=e.timePoint,console.log(a);var s=e;setTimeout(function(){var t=Object.assign(a,{id:e.editData.id,type:Number.isInteger(a.type)?a.orgId:e.editData.type});Object(c[\"b\"])(t,\"/timedTask/editTaskMsg\").then(function(e){0===e.code?s.$message.success(\"修改成功\"):s.$message.error(e.message),s.visible=!1,s.confirmLoading=!1,s.$emit(\"ok\",a),s.form.resetFields()})},300)}})},handleCancel:function(){this.visible=!1}}},f=p,g=a(\"2877\"),w=Object(g[\"a\"])(f,n,l,!1,null,null,null),v=w.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"20px\"},attrs:{title:\"新建定时任务\",width:900,destroyOnClose:!0,maskClosable:!1},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"执行周期类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"type\",{rules:[{required:!0,message:\"执行周期类型\"}]}],expression:\"[\\n          'type',\\n          {rules: [{required: true, message: '执行周期类型' }]}\\n        ]\"}],attrs:{placeholder:\"请选择执行周期类型\",optionFilterProp:\"children\"},on:{change:e.display}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"每天执行\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"每周几执行\")]),a(\"a-select-option\",{attrs:{value:\"3\"}},[e._v(\"定期执行一次\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"定时任务类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"taskType\",{rules:[{required:!0,message:\"定时任务类型\"}]}],expression:\"['taskType',{rules: [{required: true, message: '定时任务类型' }]}]\"}],attrs:{showSearch:\"\",placeholder:\"请选择定时任务类型\",optionFilterProp:\"children\"},on:{change:e.taskDisplay}},e._l(e.taskTypeList,function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.code}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),this.showTimePoint?a(\"a-form-item\",{attrs:{label:\"执行日期\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"timePoint\",{rules:[{required:!0,message:\"\"}]}],expression:\"[\\n          'timePoint',\\n          {rules: [{ required: true, message: '' }]}\\n        ]\"}],attrs:{placeholder:\"请选择执行日期\"},on:{change:e.timePointStr}})],1):e._e(),this.showWeek?a(\"a-form-item\",{attrs:{label:\"选择周期\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-checkbox-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"weekList\",{rules:[{required:!0,message:\"请选择执行周期\"}]}],expression:\"[\\n          'weekList',\\n          {rules: [{ required: true, message: '请选择执行周期' }]}\\n        ]\"}],attrs:{options:e.week}})],1):e._e(),this.showTime?a(\"a-form-item\",{attrs:{label:\"执行时间\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-time-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"time\",{rules:[{required:!0,message:\"请选择执行时间\"}]}],expression:\"[\\n          'time',\\n          {rules: [{ required: true, message: '请选择执行时间' }]}\\n        ]\"}],attrs:{placeholder:\"选择执行时间\",format:\"HH:mm\"},on:{change:e.timeStr}})],1):e._e(),this.showMap?a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.mapName)+\"\\n        \")])}),1)],1):e._e(),this.showCmd?a(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{rules:[{required:!0,message:\"请选择或者新增一个动作集\"}]}],expression:\"[\\n          'cmd',\\n          {rules: [{ required: true, message: '请选择或者新增一个动作集' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择动作集\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"新增一个动作集\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?a(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改当前动作集\")]):e._e()],1):e._e(),this.showMessage?a(\"a-form-item\",{attrs:{label:\"语音内容\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"message\",{rules:[{required:!0,message:\"请输入语音内容\"}]}],expression:\"[\\n          'message',\\n          {rules: [{ required: true, message: '请输入语音内容' }]}\\n        ]\"}],attrs:{placeholder:\"语音内容\"}})],1):e._e(),a(\"a-form-item\",{attrs:{label:\"定时任务描述\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"remark\",{rules:[{message:\"请输入描述\"}]}],expression:\"[\\n          'remark',\\n          {rules: [{ message: '请输入描述' }]}\\n        ]\"}],attrs:{placeholder:\"请输入描述\",rows:4}})],1),a(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"orgId\",{rules:[{required:!0,message:\"请选择\"}]}],expression:\"[\\n          'orgId',\\n          {rules: [{ required: true, message: '请选择' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\"},on:{change:e.getRobotList}},e._l(e.orgNames,function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"选择机器人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,s,r){return a(\"span\",{},[e._v(e._s(r+1))])}}])})],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},C=[],k=a(\"75fc\"),y=(a(\"ac6a\"),a(\"5df3\"),a(\"4f7f\"),[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\"]),T={components:{CmdList:m[\"a\"],STable:i[\"f\"]},data:function(){var e=this;return{headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),week:y,showTimePoint:!1,showWeek:!1,showTime:!1,showMap:!1,showCmd:!1,showMessage:!1,timePoint:\"\",time:\"\",weekList:[],cmdList:[],mapList:[],taskTypeList:[],showEditCmd:!1,cmd:\"\",queryParam:{orgId:\"-1\"},orgNames:[],columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"name\"},{title:\"机器人编码\",dataIndex:\"code\"}],loadData:function(t){return console.log(\"请求啦\"),Object(c[\"b\"])(Object.assign(t,e.queryParam),\"/robotInfo/loadRobotListByOrg\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),options:{alert:{show:!0},rowSelection:{onSelect:this.onSelectChange,onSelectAll:this.onSelectChangeAll}}}},created:function(){this.getCmd(),this.getMap(),this.handleOrgList(),this.getTaskType()},methods:{handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t={org:e},a=this;Object(c[\"b\"])(t,\"/userManage/getHrOrgByPid\").then(function(e){a.orgNames=e.result,0!==e.code&&a.$message.error(e.message)})},getTaskType:function(){var e=this,t={};Object(c[\"b\"])(t,\"/timedTask/getTaskType\").then(function(t){e.taskTypeList=t.result,0!==t.code&&e.$message.error(t.message)})},getRobotList:function(e){this.queryParam.orgId=e,this.$refs.table.refresh()},onSelectChange:function(e,t,a){t?this.selectedRowKeys.add(e.code):this.selectedRowKeys.delete(e.code)},onSelectChangeAll:function(e,t){var a=this;e?t.map(function(e,t){a.selectedRowKeys.add(e.code)}):t.map(function(e,t){a.selectedRowKeys.delete(e.code)})},changeCmd:function(e){this.cmd=e,this.showEditCmd=!0},getCmdId:function(e){this.getCmd(),this.form.setFieldsValue({cmd:parseInt(e)})},editCmd:function(){var e=this.form.getFieldsValue(),t=void 0===e.mapId?0:e.mapId;this.$refs.cmd.show(\"编辑动作集\",t,this.cmd)},addCmd:function(){var e=this.form.getFieldsValue(),t=void 0===e.mapId?0:e.mapId;this.$refs.cmd.show(\"新增动作集\",t,0)},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){0===e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},timePointStr:function(e,t){this.timePoint=t},timeStr:function(e,t){this.time=t},display:function(e){\"1\"===e&&(this.showTime=!0,this.showTimePoint=!1,this.showWeek=!1),\"2\"===e&&(this.showTime=!0,this.showTimePoint=!1,this.showWeek=!0),\"3\"===e&&(this.showTime=!0,this.showTimePoint=!0,this.showWeek=!1)},taskDisplay:function(e){\"800\"===e?(this.showCmd=!0,this.showMap=!0,this.showMessage=!1):\"801\"===e?(this.showCmd=!1,this.showMap=!1,this.showMessage=!0):(this.showCmd=!1,this.showMap=!1,this.showMessage=!1)},selectWeek:function(e){this.weekList=e,console.log(this.weekList)},add:function(){this.form.resetFields(),this.showEditCmd=!1,this.queryParam.orgId=\"-1\",this.visible=!0,this.showTime=!1,this.showTimePoint=!1,this.showWeek=!1,this.selectedRowKeys.clear()},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{a.time=e.time,a.timePoint=e.timePoint;var s=e;setTimeout(function(){var t=Object.assign(a,{robotCode:Object(k[\"a\"])(e.selectedRowKeys)});Object(c[\"b\"])(t,\"/timedTask/addTaskMsg\").then(function(e){0===e.code?s.$message.success(\"新建成功\"):s.$message.error(e.message),s.visible=!1,s.confirmLoading=!1,s.$emit(\"ok\",a),s.form.resetFields()})},300)}})},handleCancel:function(){this.visible=!1}}},I=T,x=Object(g[\"a\"])(I,b,C,!1,null,null,null),S=x.exports,_=a(\"91b6\"),P={name:\"TableList\",components:{Ellipsis:i[\"c\"],STable:i[\"f\"],PageView:o[\"c\"],EditForm:v,CreateForm:S},data:function(){var e=this;return{headers:{authorization:\"authorization-text\"},url:_[\"a\"],queryParam:{name:\"\",navigateType:\"\",androidType:\"\"},editData:{},options:{alert:!1,rowSelection:null},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人编码\",dataIndex:\"robotCode\"},{title:\"定时任务描述\",dataIndex:\"taskDesc\"},{title:\"命令集\",dataIndex:\"cmdName\"},{title:\"语音内容\",dataIndex:\"message\"},{title:\"备注\",dataIndex:\"remark\",scopedSlots:{customRender:\"remark\"}},{title:\"创建时间\",dataIndex:\"createDate\"},{title:\"更新时间\",dataIndex:\"updateDate\"},{title:\"单位\",dataIndex:\"orgName\"},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){return console.log(\"App 请求\",t),Object(c[\"b\"])(Object.assign(t,e.queryParam),\"/timedTask/queryTaskMsg\").then(function(e){return console.log(e),e.result})}}},computed:{title:function(){return this.$route.meta.title}},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleRefresh:function(){this.$refs.table.refresh()},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},handleEditVisible:function(e){this.$refs.editModal.edit(e)},searchData:function(){this.$refs.table.refresh(!0)},handleDeleteUser:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除定时任务吗?\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,s){setTimeout(Math.random()>.5?a:s,500);var r={id:e.id};Object(c[\"b\"])(r,\"/timedTask/delTaskMsg\").then(function(e){console.log(\"删除返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh()):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},L=P,M=(a(\"1ee7\"),Object(g[\"a\"])(L,s,r,!1,null,\"31d2138d\",null));t[\"default\"]=M.exports},\"75fc\":function(e,t,a){\"use strict\";var s=a(\"a745\"),r=a.n(s);function i(e){if(r()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var o=a(\"774e\"),n=a.n(o),l=a(\"c8bb\"),c=a.n(l);function m(e){if(c()(Object(e))||\"[object Arguments]\"===Object.prototype.toString.call(e))return n()(e)}function d(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function h(e){return i(e)||m(e)||d()}a.d(t,\"a\",function(){return h})},\"774e\":function(e,t,a){e.exports=a(\"d2d5\")},\"90f3\":function(e,t,a){},\"91b6\":function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return s});var s=\"http://robot.lovechuangchuang.com:8085/\"},c8bb:function(e,t,a){e.exports=a(\"54a1\")}}]);","extractedComments":[]}