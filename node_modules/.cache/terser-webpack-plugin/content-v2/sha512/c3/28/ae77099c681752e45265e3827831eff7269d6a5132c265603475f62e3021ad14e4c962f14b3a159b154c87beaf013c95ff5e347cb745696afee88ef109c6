{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-44ca5411\"],{\"6d5d\":function(e,t,n){\"use strict\";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-card\",{attrs:{bordered:!1}},[n(\"div\",{staticClass:\"table-page-search-wrapper\"},[n(\"a-form\",{attrs:{layout:\"inline\"}},[n(\"a-row\",{attrs:{gutter:48}},[n(\"a-col\",{attrs:{md:6,sm:24}},[n(\"a-form-item\",{attrs:{label:\"版本名称\"}},[n(\"a-input\",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),n(\"a-col\",{attrs:{md:6,sm:24}},[n(\"a-form-item\",{attrs:{label:\"所属单位\"}},[n(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.searchData()}},model:{value:e.queryParam.orgId,callback:function(t){e.$set(e.queryParam,\"orgId\",t)},expression:\"queryParam.orgId\"}},e._l(e.orgNames,function(t,a){return n(\"a-select-option\",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),n(\"a-col\",{attrs:{md:8,sm:24}},[n(\"span\",{staticClass:\"table-page-search-submitButtons\"},[n(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),n(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")]),n(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v(\"新建\")])],1)])],1)],1)],1),n(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,a,o){return n(\"span\",{},[e._v(\"\\n      \"+e._s(o+1)+\"\\n    \")])}},{key:\"contents\",fn:function(t){return n(\"span\",{},[n(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"action\",fn:function(t,a){return n(\"span\",{},[[n(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(a)}}},[e._v(\"编辑\")]),n(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"vertical\"}}),n(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDeleteUser(a)}}},[e._v(\"删除\")])]],2)}}])}),n(\"edit-form\",{ref:\"editModal\",on:{ok:e.handleRefresh}}),n(\"create-form\",{ref:\"createModal\",on:{ok:e.handleRefresh}})],1)},o=[],r=(n(\"7f7f\"),n(\"2af9\")),i=n(\"680a\"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"修改\",width:\"70%\",destroyOnClose:!0,maskClosable:!1,keyboard:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[n(\"a-form\",{attrs:{form:e.form}},[n(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-input\",{attrs:{disabled:!0,placeholder:\"单位名称\"},model:{value:e.orgName,callback:function(t){e.orgName=t},expression:\"orgName\"}})],1),n(\"a-form-item\",{attrs:{label:\"单片机版本类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-input\",{attrs:{disabled:!0,placeholder:\"版本类型\"},model:{value:e.singlechipVersion,callback:function(t){e.singlechipVersion=t},expression:\"singlechipVersion\"}})],1),n(\"a-form-item\",{attrs:{label:\"选择单片机版本\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"contents\",fn:function(t){return n(\"span\",{},[n(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"name\",fn:function(t){return n(\"span\",{},[n(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"serial\",fn:function(t,a,o){return n(\"span\",{},[e._v(e._s(o+1))])}}])})],1)],1)],1)},l=[],c=n(\"cebc\"),d=(n(\"ac6a\"),n(\"5df3\"),n(\"4f7f\"),n(\"2934\")),u={components:{STable:r[\"f\"],Ellipsis:r[\"c\"]},data:function(){var e=this;return{orgName:\"\",singlechipVersion:\"\",updateType:\"\",singlechipId:\"\",orgSinglechipId:\"\",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"APP名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"版本描述\",dataIndex:\"contents\",scopedSlots:{customRender:\"contents\"}}],loadData:function(t){return Object(d[\"b\"])(Object.assign(t,{updateType:e.updateType}),\"/Singlechip/querySinglechipMsg\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),options:{alert:{show:!0},rowSelection:{type:\"radio\",onSelect:this.onSelectChange}},optionAlertShow:!1}},created:function(){},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,n){console.log(e,t),t&&(this.singlechipId=e.id)},add:function(e){this.visible=!0,this.form.resetFields(),this.orgName=e.orgName,this.updateType=e.updateType,this.singlechipVersion=e.singlechipVersion,this.orgSinglechipId=e.id},handleSubmit:function(){var e=this,t=this.form.validateFields,n=this;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o={singlechipId:e.singlechipId,id:e.orgSinglechipId};Object(d[\"b\"])(Object(c[\"a\"])({},o,a),\"/OrgSinglechip/editOrgSinglechip\").then(function(e){0==e.code?n.$message.success(\"修改成功\"):n.$message.error(e.message),n.visible=!1,n.confirmLoading=!1,n.$emit(\"ok\",a),n.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},p=u,m=n(\"2877\"),f=Object(m[\"a\"])(p,s,l,!1,null,null,null),h=f.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:\"70%\",destroyOnClose:!0,maskClosable:!1,keyboard:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[n(\"a-form\",{attrs:{form:e.form}},[n(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"orgId\",{rules:[{required:!0,message:\"请选择\"}]}],expression:\"[\\n          'orgId',\\n          {rules: [{ required: true, message: '请选择' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.getSinglechipType}},e._l(e.orgNames,function(t,a){return n(\"a-select-option\",{key:a,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),n(\"a-form-item\",{attrs:{label:\"单片机类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"code\",{rules:[{required:!0,message:\"选择单片机类型\"}]}],expression:\"[\\n          'code',\\n          {rules: [{required: true, message: '选择单片机类型' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择单片机类型\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.getSinglechip}},e._l(e.singlechipType,function(t,a){return n(\"a-select-option\",{key:a,attrs:{value:t.id,disabled:!!t.isDel}},[e._v(e._s(t.name))])}),1)],1),n(\"a-form-item\",{attrs:{label:\"选择单片机版本\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"contents\",fn:function(t){return n(\"span\",{},[n(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"name\",fn:function(t){return n(\"span\",{},[n(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"serial\",fn:function(t,a,o){return n(\"span\",{},[e._v(e._s(o+1))])}}])})],1)],1)],1)},b=[],y={components:{STable:r[\"f\"],Ellipsis:r[\"c\"]},data:function(){var e=this;return{orgNames:[],singlechipType:[],selectCmd:\"\",singlechipId:\"\",showEditCmd:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),queryParam:{updateType:\"\"},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"单片机名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"版本描述\",dataIndex:\"contents\",scopedSlots:{customRender:\"contents\"}}],loadData:function(t){return\"\"==e.queryParam.updateType&&(e.queryParam.updateType=\"999\"),Object(d[\"b\"])(Object.assign(t,e.queryParam),\"/Singlechip/querySinglechipMsg\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),options:{alert:{show:!0},rowSelection:{type:\"radio\",onSelect:this.onSelectChange}},optionAlertShow:!1}},created:function(){this.handleOrgList()},methods:{getSinglechipType:function(e){this.form.setFieldsValue({code:\"\"}),this.queryParam.updateType=\"\",this.$refs.table.refresh();var t={orgId:e},n=this;Object(d[\"b\"])(t,\"/Singlechip/getSinglechipType\").then(function(e){console.log(e.result),n.singlechipType=e.result,0!==e.code&&n.$message.error(e.message)})},handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t={org:e},n=this;Object(d[\"b\"])(t,\"/userManage/getHrOrgByPid\").then(function(e){n.orgNames=e.result,0!==e.code&&n.$message.error(e.message)})},getSinglechip:function(e){this.queryParam.updateType=e,this.$refs.table.refresh()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,n){console.log(e,t),t&&(this.singlechipId=e.id)},add:function(){this.form.resetFields(),this.visible=!0,this.queryParam.updateType=\"\",this.singlechipId=\"\",this.singlechipType=[]},handleSubmit:function(){var e=this,t=this.form.validateFields,n=this;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o={singlechipId:e.singlechipId};Object(d[\"b\"])(Object(c[\"a\"])({},o,a),\"/OrgSinglechip/addOrgSinglechip\").then(function(e){0==e.code?n.$message.success(\"新建成功\"):n.$message.error(e.message),n.visible=!1,n.confirmLoading=!1,n.$emit(\"ok\",a),n.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},v=y,S=Object(m[\"a\"])(v,g,b,!1,null,null,null),w=S.exports,O={name:\"TableList\",components:{Ellipsis:r[\"c\"],STable:r[\"f\"],PageView:i[\"c\"],EditForm:h,CreateForm:w},data:function(){var e=this;return{headers:{authorization:\"authorization-text\"},queryParam:{orgId:\"\",name:\"\"},orgNames:[],editData:{},options:{alert:!1,rowSelection:null},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"单片机版本名称\",dataIndex:\"name\"},{title:\"单位\",dataIndex:\"orgName\"},{title:\"机器人版本\",dataIndex:\"robotVersion\"},{title:\"机器人类型\",dataIndex:\"robotType\"},{title:\"部位\",dataIndex:\"position\"},{title:\"导航类型\",dataIndex:\"navigateType\"},{title:\"版本描述\",dataIndex:\"contents\",scopedSlots:{customRender:\"contents\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var n;return console.log(\"App 请求\",t),n=e.queryParam.orgId>0?e.queryParam.orgId:JSON.parse(localStorage.getItem(\"user\")).orgId,Object(d[\"b\"])(Object.assign(t,e.queryParam,{orgId:n}),\"/OrgSinglechip/queryOrgSinglechip\").then(function(e){return console.log(e),e.result})}}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.handleOrgLists()},methods:{handleOrgLists:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,n={org:t};Object(d[\"b\"])(n,\"/userManage/getHrOrgByPid\").then(function(t){e.orgNames=t.result,0!==t.code&&e.$message.error(t.message)}).catch(function(e){return console.log(e)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleChange:function(e){\"uploading\"!==e.file.status&&console.log(e.file,e.fileList),\"done\"===e.file.status?this.$message.success(\"\".concat(e.file.name,\" file uploaded successfully\")):\"error\"===e.file.status&&this.$message.error(\"\".concat(e.file.name,\" file upload failed.\"))},handleRefresh:function(){this.$refs.table.refresh()},resetQuery:function(){this.queryParam={orgId:\"\",name:\"\"},this.$refs.table.refresh(!0)},handleEditVisible:function(e){this.$refs.editModal.add(e)},searchData:function(){this.$refs.table.refresh(!0)},handleDeleteUser:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(n,a){setTimeout(Math.random()>.5?n:a,500);var o={id:e.id};Object(d[\"b\"])(o,\"/OrgSinglechip/delOrgSinglechip\").then(function(e){console.log(\"删除返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh()):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},C=O,I=(n(\"ec90\"),Object(m[\"a\"])(C,a,o,!1,null,\"a14fb57e\",null));t[\"default\"]=I.exports},\"9bc4\":function(e,t,n){},ec90:function(e,t,n){\"use strict\";var a=n(\"9bc4\"),o=n.n(a);o.a}}]);","extractedComments":[]}