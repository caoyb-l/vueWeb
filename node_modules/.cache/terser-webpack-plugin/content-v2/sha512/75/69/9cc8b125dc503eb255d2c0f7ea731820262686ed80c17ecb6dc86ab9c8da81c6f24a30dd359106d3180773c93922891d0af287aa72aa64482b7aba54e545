{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-34a09b54\"],{1862:function(e,t,a){\"use strict\";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{attrs:{width:1200,maskClosable:!1,keyboard:!1},on:{ok:e.handleSubmit},model:{value:e.showIframe,callback:function(t){e.showIframe=t},expression:\"showIframe\"}},[a(\"iframe\",{ref:\"iframe\",staticStyle:{width:\"100%\",height:\"800px\",border:\"none\",\"margin-top\":\"0px\"},attrs:{src:e.cmdSrc}})])},r=[],i=(a(\"2934\"),a(\"2af9\")),n={name:\"TableList\",components:{STable:i[\"e\"]},data:function(){return{confirmLoading:!1,form:this.$form.createForm(this),showIframe:!1,cmdSrc:\"http://robot.lovechuangchuang.com:8084/robot.html\"}},methods:{show:function(e,t,a){var o=JSON.parse(localStorage.getItem(\"user\")),r=\"?orgId=\"+o.orgId+\"&createBy=\"+o.id+\"&circulation=1&mapId=\"+t+\"&title=\"+e+\"&cmd=\"+a;this.cmdSrc=this.cmdSrc+encodeURI(r),console.log(this.cmdSrc),this.showIframe=!0},handleSubmit:function(){var e=this.$refs.iframe.contentWindow.document.getElementById(\"cmd\").innerHTML;console.log(this.$refs.iframe.contentWindow.document.getElementById(\"cmd\")),console.log(\"----------确定以后的值，待接收\"+e),0==e?this.$message.error(\"请先点击保存\"):(this.$emit(\"getCmdId\",e),this.showIframe=!1)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},s=n,l=a(\"2877\"),c=Object(l[\"a\"])(s,o,r,!1,null,null,null);t[\"a\"]=c.exports},2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return r}),a.d(t,\"a\",function(){return i});var o=a(\"b775\");function r(e,t){return console.log(\"请求参数:\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}function i(e,t){return console.log(\"新增/编辑 数据\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}},5568:function(e,t,a){\"use strict\";var o=a(\"9048\"),r=a.n(o);r.a},9048:function(e,t,a){},c44b:function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:6,sm:24}},[a(\"a-form-item\",{attrs:{label:\"动作名称\"}},[a(\"a-input\",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),a(\"a-col\",{attrs:{md:6,sm:24}},[a(\"a-form-item\",{attrs:{label:\"所属地图\"}},[a(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择所属地图\",optionFilterProp:\"children\",filterOption:e.filterOption},model:{value:e.queryParam.mapId,callback:function(t){e.$set(e.queryParam,\"mapId\",t)},expression:\"queryParam.mapId\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n                \"+e._s(t.mapName)+\"\\n              \")])}),1)],1)],1),a(\"a-col\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{md:8,sm:24}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置列表\")]),a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"新建\")])],1)],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.cmdpage.alert,rowSelection:e.cmdpage.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,r){return a(\"span\",{},[e._v(\"\\n        \"+e._s(r+1)+\"\\n      \")])}},{key:\"action\",fn:function(t,o){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(o)}}},[e._v(\"编辑\"),a(\"a-icon\",{attrs:{type:\"edit\"}})],1),a(\"a-divider\",{attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDelete(o)}}},[e._v(\"删除\")])]],2)}}])}),a(\"edit-cmdColl\",{ref:\"EditCmdColl\",on:{ok:e.handleAddSubmit}}),a(\"create-cmd-coll\",{ref:\"CreateCmdColl\",on:{ok:e.handleAddSubmit}})],1)},r=[],i=(a(\"7f7f\"),a(\"2af9\")),n=a(\"680a\"),s=a(\"1862\"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"动作集名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"title\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.name}],expression:\"[\\n        'title',\\n        {rules: [{ required: true,message: '请输入' }],\\n        initialValue: editData.name,}\\n        ]\"}]})],1),a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\",{initialValue:e.editData.mapId}],expression:\"['mapId',{initialValue: editData.mapId}]\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeMap(t)}}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n              \"+e._s(t.mapName)+\"\\n            \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:e.showCmd}},[e._v(\"编辑动作集\")])],1),a(\"a-form-item\",{attrs:{label:\"循环次数\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"circulation\",{rules:[{required:!0,message:\"请输入次数\"}],initialValue:e.editData.circulation}],expression:\"[\\n        'circulation',\\n        {rules: [{ required: true, message: '请输入次数' }],\\n        initialValue: editData.circulation}\\n        ]\"}],attrs:{placeholder:\"请输入\"}})],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},c=[],d=a(\"2934\"),m={components:{CmdList:s[\"a\"]},data:function(){return{headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},cmdList:[],visible:!1,form:this.$form.createForm(this),editData:{},mapList:[]}},created:function(){this.getMap()},methods:{changeMap:function(e){console.log(\"选择项: \"+e),this.editData.mapId=e},add:function(e){console.log(e),this.visible=!0,this.editData=e,this.entityId=e.id},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(d[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmdId:function(e){this.editData.cmd=parseInt(e),console.log(\"getCmdId_____________+\",e,this.editData.cmd)},showCmd:function(){var e=void 0==this.editData.mapId?0:this.editData.mapId;console.log(e);var t=void 0==this.editData.id?0:this.editData.id;this.$refs.cmd.show(this.editData.name,e,t)},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(!t){var o=e,r=JSON.parse(localStorage.getItem(\"user\")),i=r.orgId,n=r.id,s=e.editData.mapId,l=e.editData.title,c=e.editData.circulation,m={orgId:i,createBy:n,entityId:e.editData.id,mapId:s,title:l,circulation:c};console.info(m),console.log(a),Object(d[\"b\"])(Object.assign(m,a),\"/cmdCollection/saveOrUpdate\").then(function(t){console.log(t),0==t.code?(e.$message.success(\"编辑成功\"),o.visible=!1,o.$emit(\"ok\",a)):o.$message.error(t.message)})}})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},u=m,p=a(\"2877\"),f=Object(p[\"a\"])(u,l,c,!1,null,null,null),h=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新增命令集\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeMap(t)}}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n              \"+e._s(t.mapName)+\"\\n            \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{initialValue:e.cmd,rules:[{required:!0,message:\"请添加动作集\"}]}],expression:\"[\\n            'cmd',\\n            {initialValue: cmd,rules: [{ required: true, message: '请添加动作集' }]}\\n          ]\"}],attrs:{placeholder:\"动作集\"}}),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:e.showCmd}},[e._v(\"添加动作集\")])],1),a(\"a-form-item\",{attrs:{label:\"循环次数\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"circulation\",{rules:[{required:!0,message:\"请输入次数\"}]}],expression:\"[\\n            'circulation',\\n            {rules: [{ required: true, message: '请输入次数' }]}\\n          ]\"}],attrs:{placeholder:\"循环次数\"}})],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},b=[],v={components:{CmdList:s[\"a\"]},data:function(){return{headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},cmdList:[],visible:!1,form:this.$form.createForm(this),editData:{title:\"\"},mapList:[],cmd:\"\",circulation:\"\"}},created:function(){this.getMap()},methods:{changeMap:function(e){console.log(\"选择项: \"+e),this.editData.mapId=e},add:function(){this.cmd=\"\",this.form.resetFields(),this.visible=!0},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(d[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmdId:function(e){this.cmd=e},showCmd:function(){var e=void 0==this.editData.mapId?0:this.editData.mapId;console.log(\"地图ID:\"+e),this.$refs.cmd.show(\"\",e,0)},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(!t){var o=e,r=JSON.parse(localStorage.getItem(\"user\")),i=r.orgId,n=r.id,s=(a.mapId,a.circulation,{orgId:i,createBy:n,entityId:a.cmd});console.info(s),console.log(a),Object(d[\"b\"])(Object.assign(s,a),\"/cmdCollection/saveOrUpdate\").then(function(e){console.log(e),0==e.code?(o.$message.success(\"新增成功\"),o.visible=!1,o.$emit(\"ok\",a)):o.$message.error(e.message)})}})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},C=v,w=Object(p[\"a\"])(C,g,b,!1,null,null,null),I=w.exports,y={name:\"TableList\",components:{CreateCmdColl:I,STable:i[\"e\"],PageView:n[\"c\"],EditCmdColl:h,CmdList:s[\"a\"]},data:function(){var e=this;return{advanced:!1,addVisible:!1,editVisible:!1,orgId:{orgId:1},selectedItems:[],queryParam:{name:\"\",orgId:\"\"},cmdpage:{alert:!1,rowSelection:null},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"命令集ID\",dataIndex:\"id\",scopedSlots:{customRender:\"id\"}},{title:\"循环次数\",dataIndex:\"circulation\",scopedSlots:{customRender:\"circulation\"}},{title:\"操作时间\",dataIndex:\"create_date\",scopedSlots:{customRender:\"create_date\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var a=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(d[\"b\"])(Object.assign(t,e.queryParam,{orgId:a}),\"/cmdCollection/getCmdCollectionPage\").then(function(e){return console.log(e),e.result})},mapList:[],roleNames:[],selectedRowKeys:[],selectedRows:[]}},created:function(){this.getMap()},computed:{title:function(){return this.$route.meta.title}},methods:{getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(d[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},onChange:function(e,t){this.queryParam.validityDate=t,console.log(e,t)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleAddSubmit:function(){this.$refs.table.refresh(!0)},addCmd:function(){this.$refs.CreateCmdColl.add()},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},handleAddVisible:function(){this.addVisible=!0},handleEditVisible:function(e){console.info(e),this.$refs.EditCmdColl.add(e)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},searchData:function(){this.$refs.table.refresh(!0)},handleOk:function(){this.$refs.table.refresh(!0)},handleDelete:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,o){setTimeout(Math.random()>.5?a:o,500);var r={entityId:e.id};Object(d[\"b\"])(r,\"/cmdCollection/delete\").then(function(e){console.log(\"删除返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},S=y,O=(a(\"5568\"),Object(p[\"a\"])(S,o,r,!1,null,\"47bb6939\",null));t[\"default\"]=O.exports}}]);","extractedComments":[]}