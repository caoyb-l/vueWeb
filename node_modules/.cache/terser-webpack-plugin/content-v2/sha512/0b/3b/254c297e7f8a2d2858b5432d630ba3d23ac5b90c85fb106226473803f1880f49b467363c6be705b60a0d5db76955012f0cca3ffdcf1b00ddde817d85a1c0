{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4e9bc53e\"],{\"04c1\":function(e,t,r){},\"0549\":function(e,t,r){\"use strict\";var o=r(\"04c1\"),i=r.n(o);i.a},1862:function(e,t,r){\"use strict\";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"10px\"},attrs:{title:\"动作集制作\",width:\"68%\",footer:null,destroyOnClose:!0,maskClosable:!1,keyboard:!1},on:{cancel:e.handleSubmit},model:{value:e.showIframe,callback:function(t){e.showIframe=t},expression:\"showIframe\"}},[r(\"iframe\",{ref:\"iframe\",staticStyle:{margin:\"-33px 0px -25px -30px\"},attrs:{src:e.cmdSrc,scrolling:\"no\",height:\"600px\",width:\"100%\",frameborder:\"0\"}})])},i=[],n=(r(\"2934\"),r(\"2af9\")),a={name:\"TableList\",components:{STable:n[\"f\"]},data:function(){return{returnCmd:\"\",form:this.$form.createForm(this),showIframe:!1,cmdSrc:\"http://robot.lovechuangchuang.com:8084/robot.html\"}},mounted:function(){var e=this;window.addEventListener(\"message\",function(t){e.returnCmd=t.data})},methods:{show:function(e,t,r){var o=JSON.parse(localStorage.getItem(\"user\")),i=\"?orgId=\"+o.orgId+\"&createBy=\"+o.id+\"&circulation=1&mapId=\"+t+\"&title=\"+e+\"&cmd=\"+r;this.cmdSrc=this.cmdSrc+encodeURI(i),console.log(this.cmdSrc),this.showIframe=!0},handleSubmit:function(){\"\"!=this.returnCmd&&this.$emit(\"getCmdId\",this.returnCmd),this.showIframe=!1}}},s=a,l=r(\"2877\"),d=Object(l[\"a\"])(s,o,i,!1,null,null,null);t[\"a\"]=d.exports},\"75fc\":function(e,t,r){\"use strict\";var o=r(\"a745\"),i=r.n(o);function n(e){if(i()(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var a=r(\"774e\"),s=r.n(a),l=r(\"c8bb\"),d=r.n(l);function c(e){if(d()(Object(e))||\"[object Arguments]\"===Object.prototype.toString.call(e))return s()(e)}function m(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function u(e){return n(e)||c(e)||m()}r.d(t,\"a\",function(){return u})},\"774e\":function(e,t,r){e.exports=r(\"d2d5\")},aaed:function(e,t,r){\"use strict\";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-card\",{attrs:{bordered:!1}},[r(\"div\",{staticClass:\"table-page-search-wrapper\"},[r(\"a-form\",{attrs:{layout:\"inline\"}},[r(\"a-row\",{attrs:{gutter:48}},[r(\"a-col\",{attrs:{md:5,sm:24}},[r(\"a-form-item\",{attrs:{label:\"机器人名称\"}},[r(\"a-input\",{model:{value:e.queryParam.robotName,callback:function(t){e.$set(e.queryParam,\"robotName\",t)},expression:\"queryParam.robotName\"}})],1)],1),r(\"a-col\",{attrs:{md:5,sm:24}},[r(\"a-form-item\",{attrs:{label:\"触发条件\"}},[r(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择触发指令\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.handleCmdChange},model:{value:e.queryParam.triggerName,callback:function(t){e.$set(e.queryParam,\"triggerName\",t)},expression:\"queryParam.triggerName\"}},e._l(e.cmdList,function(t){return r(\"a-select-option\",{key:t.code,attrs:{value:t.triggerName}},[e._v(e._s(t.triggerName))])}),1)],1)],1),r(\"a-col\",{attrs:{md:13,sm:24}},[r(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),r(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")]),r(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v(\"新建\")]),r(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.$refs.editAllModal.add()}}},[e._v(\"批量修改\")]),r(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"dashed\"},on:{click:e.tableOption}},[e._v(e._s(e.optionAlertShow?\"关闭\":\"开启\")+\" alert\")]),e.selectedRowKeys.length>0?r(\"a-dropdown\",[r(\"a-menu\",{attrs:{slot:\"overlay\"},slot:\"overlay\"},[r(\"a-menu-item\",{key:\"1\",on:{click:function(t){return e.handleDeletes()}}},[r(\"a-icon\",{attrs:{type:\"delete\"}}),e._v(\"删除\\n              \")],1)],1),r(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"}},[e._v(\"\\n              批量操作\\n              \"),r(\"a-icon\",{attrs:{type:\"down\"}})],1)],1):e._e()],1)],1)],1)],1),r(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,i){return r(\"span\",{},[e._v(e._s(i+1))])}},{key:\"action\",fn:function(t,o){return r(\"span\",{},[[r(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(o)}}},[e._v(\"编辑\")]),r(\"a-divider\",{attrs:{type:\"vertical\"}}),r(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDelete(o)}}},[e._v(\"删除\")])]],2)}}])}),r(\"create-sensor\",{ref:\"createModal\",on:{ok:e.handleRefresh}}),r(\"edit-all-sensor\",{ref:\"editAllModal\",on:{ok:e.handleRefresh}}),r(\"edit-sensor\",{ref:\"editModal\",on:{ok:e.handleRefresh}})],1)},i=[],n=r(\"2af9\"),a=r(\"680a\"),s=r(\"2934\"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-modal\",{directives:[{name:\"preventReClicks\",rawName:\"v-preventReClicks\"}],staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:\"70%\",destroyOnClose:!0,maskClosable:!1,keyboard:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[r(\"a-form\",{attrs:{form:e.form}},[r(\"a-form-item\",{attrs:{label:\"触发指令\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"triggerId\",{rules:[{required:!0,message:\"选择触发指令\"}],initialValue:e.triggerId}],expression:\"[\\n          'triggerId',\\n          {rules: [{required: true,  message: '选择触发指令' }],initialValue:triggerId}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择触发指令\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.handleTriggerCmdChange}},e._l(e.triggerCmdList,function(t){return r(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.triggerName))])}),1)],1),r(\"a-form-item\",{attrs:{label:\"选择机器人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,i){return r(\"span\",{},[e._v(e._s(i+1))])}}])})],1),r(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmdId\",{rules:[{required:!0,message:\"选择动作集\"}],initialValue:e.selectCmd}],expression:\"[\\n          'cmdId',\\n          {rules: [{required: true,  message: '选择动作集' }],initialValue:selectCmd}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择动作集\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t){return r(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),r(\"a-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"新增动作集\")]),r(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?r(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改当前动作集\")]):e._e()],1)],1),r(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},d=[],c=r(\"cebc\"),m=r(\"75fc\"),u=(r(\"ac6a\"),r(\"5df3\"),r(\"4f7f\"),r(\"1862\")),g={components:{CmdList:u[\"a\"],STable:n[\"f\"]},data:function(){var e=this;return{selectCmd:\"\",showEditCmd:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),triggerCmdList:[],cmdList:[],triggerId:\"\",queryParam:{},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"机器人编码\",dataIndex:\"code\",scopedSlots:{customRender:\"code\"}}],loadData:function(t){var r=JSON.parse(localStorage.getItem(\"user\")).id,o=JSON.parse(localStorage.getItem(\"user\")).orgId;console.log(\"user 请求\",t);var i={type:\"1\",triggerId:e.triggerId,code:\"\",name:\"\",orgId:o,userId:r,validityDate:\"\"};return Object(s[\"b\"])(Object.assign(t,i,e.queryParam),\"/robotInfo/loadPageListByTruggerRobot\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),options:{alert:{show:!0},rowSelection:{onSelect:this.onSelectChange,onSelectAll:this.onSelectChangeAll}},optionAlertShow:!1}},created:function(){},methods:{changeCmd:function(e){this.selectCmd=e,this.showEditCmd=!0},addCmd:function(){console.log(this.selectCmd),this.$refs.cmd.show(\"编辑动作集\",\"\",0)},editCmd:function(){console.log(this.selectCmd),this.$refs.cmd.show(\"编辑动作集\",\"\",this.selectCmd)},getCmdId:function(e){this.getCmdList(),this.selectCmd=e,this.form.setFieldsValue({cmdId:parseInt(e)})},handleTriggerCmdChange:function(e){console.log(\"selected \".concat(e)),this.triggerId=e,this.$refs.table.refresh()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,r){console.log(e,t),t?this.selectedRowKeys.add(e.id):this.selectedRowKeys.delete(e.id)},onSelectChangeAll:function(e,t){var r=this;e?t.map(function(e,t){r.selectedRowKeys.add(e.id)}):t.map(function(e,t){r.selectedRowKeys.delete(e.id)})},getTriggerCmdList:function(){var e=this;Object(s[\"b\"])({},\"/supercmdTrigger/getSupercmdTriggerList\").then(function(t){console.log(\"指令列表\",t),0==t.code?e.triggerCmdList=t.supercmdTriggerList:e.$message.error(t.message)})},getCmdList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,r={orgId:t};Object(s[\"b\"])(r,\"/cmdCollection/getCmdListByOrg\").then(function(t){console.log(\"动作集\",t),0==t.code&&(e.cmdList=t.cmdList)})},add:function(){this.visible=!0,this.selectCmd=\"\",this.showEditCmd=!1,this.getTriggerCmdList(),this.getCmdList(),this.selectedRowKeys.clear(),this.$refs.table&&this.$refs.table.refresh()},handleSubmit:function(){var e=this,t=this.form.validateFields,r=this;this.confirmLoading=!0,t(function(t,o){if(t)e.confirmLoading=!1;else{var i={robotId:Object(m[\"a\"])(r.selectedRowKeys),cmdId:\"1\"};Object(s[\"b\"])(Object(c[\"a\"])({},i,o),\"/supercmdTriggerRobot/save\").then(function(t){0==t.code?(r.$message.success(\"新建成功\"),e.triggerId=\"\"):r.$message.error(t.message),r.visible=!1,r.confirmLoading=!1,r.$emit(\"ok\",o),r.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},h=g,f=r(\"2877\"),p=Object(f[\"a\"])(h,l,d,!1,null,null,null),b=p.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"20px\"},attrs:{title:\"批量修改传感器\",width:\"70%\",destroyOnClose:!0,maskClosable:!1},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[r(\"a-form\",{attrs:{form:e.form}},[r(\"a-form-item\",{attrs:{label:\"触发指令\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"triggerId\",{rules:[{required:!0,message:\"选择触发指令\"}],initialValue:e.triggerId}],expression:\"[\\n          'triggerId',\\n          {rules: [{required: true,  message: '选择触发指令' }],initialValue:triggerId}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择触发指令\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.handleTriggerCmdChange}},e._l(e.triggerCmdList,function(t){return r(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.triggerName))])}),1)],1),r(\"a-form-item\",{attrs:{label:\"选择机器人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,i){return r(\"span\",{},[e._v(e._s(i+1))])}}])})],1),r(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmdId\",{rules:[{required:!0,message:\"选择动作集\"}]}],expression:\"[\\n          'cmdId',\\n          {rules: [{required: true,  message: '选择动作集' }]}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择动作集\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t){return r(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),r(\"a-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"新增动作集\")]),r(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?r(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改当前动作集\")]):e._e()],1)],1),r(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},v=[],w={components:{CmdList:u[\"a\"],STable:n[\"f\"]},data:function(){var e=this;return{showEditCmd:!1,cmdId:\"\",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),triggerCmdList:[],cmdList:[],triggerId:0,queryParam:{},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"机器人编码\",dataIndex:\"code\",scopedSlots:{customRender:\"code\"}}],loadData:function(t){var r=JSON.parse(localStorage.getItem(\"user\")).id,o=JSON.parse(localStorage.getItem(\"user\")).orgId,i={type:2,triggerId:e.triggerId,code:\"\",name:\"\",orgId:o,userId:r,validityDate:\"\"};return Object(s[\"b\"])(Object.assign(t,i,e.queryParam),\"/robotInfo/loadPageListByTruggerRobot\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),options:{alert:{show:!0},rowSelection:{onSelect:this.onSelectChange,onSelectAll:this.onSelectChangeAll}},optionAlertShow:!1}},created:function(){},methods:{changeCmd:function(e){this.cmdId=e,this.showEditCmd=!0,console.log(\"下拉框值：\"+this.cmdId)},addCmd:function(){this.$refs.cmd.show(\"批量修改传感器\",\"\",0)},editCmd:function(){console.log(\"修改：\"+this.cmdId),this.$refs.cmd.show(\"批量修改传感器\",\"\",this.cmdId)},getCmdId:function(e){this.getCmdList(),this.cmdId=e,this.form.setFieldsValue({cmdId:parseInt(e)})},handleTriggerCmdChange:function(e){console.log(\"selected \".concat(e)),this.triggerId=e,this.$refs.table.refresh()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,r){t?this.selectedRowKeys.add(e.id):this.selectedRowKeys.delete(e.id)},onSelectChangeAll:function(e,t){var r=this;e?t.map(function(e,t){r.selectedRowKeys.add(e.id)}):t.map(function(e,t){r.selectedRowKeys.delete(e.id)})},getTriggerCmdList:function(){var e=this;Object(s[\"b\"])({},\"/supercmdTrigger/getSupercmdTriggerList\").then(function(t){console.log(\"指令列表\",t),0==t.code?e.triggerCmdList=t.supercmdTriggerList:e.$message.error(t.message)})},getCmdList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,r={orgId:t};Object(s[\"b\"])(r,\"/cmdCollection/getCmdListByOrg\").then(function(t){console.log(\"动作集\",t),0==t.code||2==t.code?e.cmdList=t.cmdList:e.$message.error(t.message)})},add:function(){this.visible=!0,this.showEditCmd=!1,this.cmdId=\"\",this.getTriggerCmdList(),this.getCmdList()},handleSubmit:function(){var e=this,t=this.form.validateFields,r=this;this.confirmLoading=!0,t(function(t,o){if(t)e.confirmLoading=!1;else{var i={robotId:Object(m[\"a\"])(r.selectedRowKeys),cmdId:\"1\"};Object(s[\"b\"])(Object(c[\"a\"])({},i,o),\"/supercmdTriggerRobot/updateAll\").then(function(e){0==e.code?r.$message.success(\"批量修改成功\"):r.$message.error(e.message),r.visible=!1,r.confirmLoading=!1,r.$emit(\"ok\",o),r.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},S=w,y=Object(f[\"a\"])(S,C,v,!1,null,null,null),I=y.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"20px\"},attrs:{title:\"编辑传感器\",width:\"70%\",destroyOnClose:!0,maskClosable:!1},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[r(\"a-form\",{attrs:{form:e.form}},[r(\"a-form-item\",{attrs:{label:\"触发指令\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"a-input\",{attrs:{disabled:!0,placeholder:\"触发指令\"},model:{value:e.edit.triggerName,callback:function(t){e.$set(e.edit,\"triggerName\",t)},expression:\"edit.triggerName\"}})],1),r(\"a-form-item\",{attrs:{label:\"选择机器人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"a-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",alert:e.options.alert,rowSelection:e.options.rowSelection,columns:e.columns,dataSource:e.data},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,i){return r(\"span\",{},[e._v(e._s(i+1))])}}])})],1),r(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmdId\",{rules:[{required:!0,message:\"选择动作集\"}],initialValue:e.edit.cmdId}],expression:\"[\\n          'cmdId',\\n          {rules: [{required: true,  message: '选择动作集' }],initialValue:edit.cmdId}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择动作集\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t){return r(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),r(\"a-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"新增动作集\")]),r(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?r(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改当前动作集\")]):e._e()],1)],1),r(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},x=[],L={components:{CmdList:u[\"a\"],STable:n[\"f\"]},data:function(){return{showEditCmd:!1,edit:{triggerId:0,triggerName:\"\",cmdId:\"\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),cmdList:[],queryParam:{},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"robotName\",scopedSlots:{customRender:\"robotName\"}},{title:\"机器人ID\",dataIndex:\"id\",scopedSlots:{customRender:\"id\"}}],data:[],options:!1,optionAlertShow:!1}},created:function(){},methods:{changeCmd:function(e){this.edit.cmdId=e,this.showEditCmd=!0,console.log(\"下拉框：\"+this.edit.cmdId)},addCmd:function(){this.$refs.cmd.show(\"传感器\",\"\",0)},editCmd:function(){console.log(\"修改：\"+this.edit.cmdId),this.$refs.cmd.show(\"传感器\",\"\",this.edit.cmdId)},getCmdId:function(e){this.getCmdList(),this.edit.cmdId=e,this.form.setFieldsValue({cmdId:parseInt(e)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getCmdList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,r={orgId:t};Object(s[\"b\"])(r,\"/cmdCollection/getCmdListByOrg\").then(function(t){0==t.code&&(e.cmdList=t.cmdList)})},add:function(e){console.log(e),\"\"!=e.cmdId&&null!=e.cmdId?this.showEditCmd=!0:this.showEditCmd=!1,console.log(this.showEditCmd),this.visible=!0,this.edit=e,this.data=[],this.data.push(e),this.getCmdList(),this.$refs.table&&this.$refs.table.refresh()},handleSubmit:function(){var e=this,t=this.form.validateFields,r=this;this.confirmLoading=!0,t(function(t,o){if(t)e.confirmLoading=!1;else{var i={cmdId:\"1\",triggerId:r.edit.triggerId,entityId:r.edit.id};Object(s[\"b\"])(Object(c[\"a\"])({},i,o),\"/supercmdTriggerRobot/save\").then(function(e){0==e.code?r.$message.success(\"修改成功\"):r.$message.error(e.message),r.visible=!1,r.confirmLoading=!1,r.$emit(\"ok\",o),r.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},k=L,_=Object(f[\"a\"])(k,O,x,!1,null,null,null),R=_.exports,$={name:\"TableList\",components:{STable:n[\"f\"],PageView:a[\"c\"],CreateSensor:b,EditAllSensor:I,EditSensor:R},data:function(){var e=this;return{cmdList:[],advanced:!1,queryParam:{robotName:\"\",triggerName:\"\"},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"robotName\",scopedSlots:{customRender:\"robotName\"}},{title:\"机器人编码\",dataIndex:\"robotCode\",scopedSlots:{customRender:\"robotCode\"}},{title:\"触发条件\",dataIndex:\"triggerName\",scopedSlots:{customRender:\"triggerName\"}},{title:\"动作集\",dataIndex:\"cmdName\",scopedSlots:{customRender:\"cmdName\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var r=JSON.parse(localStorage.getItem(\"user\")).orgId,o={orgId:r};return Object(s[\"b\"])(Object.assign(t,o,e.queryParam),\"/supercmdTriggerRobot/list\").then(function(e){return console.log(e),e.result})},selectedRowKeys:[],options:{alert:!1,rowSelection:null},optionAlertShow:!1}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.getCmdList()},methods:{tableOption:function(){var e=this;this.optionAlertShow?(this.options={alert:!1,rowSelection:null},this.optionAlertShow=!1):(this.options={alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:function(e){return{props:{disabled:\"No 2\"===e.no,name:e.no}}}}},this.optionAlertShow=!0)},onSelectChange:function(e){this.selectedRowKeys=e},handleCmdChange:function(e){console.log(\"selected \".concat(e))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getCmdList:function(){var e=this;Object(s[\"b\"])({},\"/supercmdTrigger/getSupercmdTriggerList\").then(function(t){console.log(\"指令列表\",t),0==t.code?e.cmdList=t.supercmdTriggerList:e.$message.error(t.message)})},handleRefresh:function(){this.$refs.table.refresh(!0)},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},handleEditVisible:function(e){this.$refs.editModal.add(e)},searchData:function(){this.$refs.table.refresh(!0)},handleDelete:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除吗?\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(r,o){setTimeout(Math.random()>.5?r:o,500);var i={id:[e.id]};Object(s[\"b\"])(i,\"/supercmdTriggerRobot/delete\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})},handleDeletes:function(){console.log(this.selectedRowKeys);var e=this;this.$confirm({title:\"警告\",content:\"真的要删除吗?\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return new Promise(function(t,r){setTimeout(Math.random()>.5?t:r,500);var o={id:e.selectedRowKeys};Object(s[\"b\"])(o,\"/supercmdTriggerRobot/delete\").then(function(t){0==t.code?(e.$message.success(\"删除成功\"),e.selectedRowKeys=[],e.$refs.table.refresh()):e.$message.error(t.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},N=$,T=(r(\"0549\"),Object(f[\"a\"])(N,o,i,!1,null,\"04401186\",null));t[\"default\"]=T.exports},c8bb:function(e,t,r){e.exports=r(\"54a1\")}}]);","extractedComments":[]}