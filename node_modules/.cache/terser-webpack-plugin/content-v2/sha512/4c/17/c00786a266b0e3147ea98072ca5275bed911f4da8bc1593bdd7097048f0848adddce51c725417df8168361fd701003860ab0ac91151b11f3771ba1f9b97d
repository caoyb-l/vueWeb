{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3e47f938\"],{2005:function(e,t,a){},2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return i}),a.d(t,\"a\",function(){return l});var r=a(\"b775\");function i(e,t){return console.log(\"请求参数:\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}function l(e,t){return console.log(\"新增/编辑 数据\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}},\"4c1f\":function(e,t,a){\"use strict\";var r=a(\"2005\"),i=a.n(r);i.a},\"52e8\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:5,sm:24}},[a(\"a-form-item\",{attrs:{label:\"文件名称\"}},[a(\"a-input\",{model:{value:e.queryParam.fileName,callback:function(t){e.$set(e.queryParam,\"fileName\",t)},expression:\"queryParam.fileName\"}})],1)],1),a(\"a-col\",{attrs:{md:5,sm:24}},[a(\"a-form-item\",{attrs:{label:\"文件类型\"}},[a(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择文件类型\",optionFilterProp:\"children\",filterOption:e.filterOption},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,\"type\",t)},expression:\"queryParam.type\"}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"图片\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"音频\")]),a(\"a-select-option\",{attrs:{value:\"3\"}},[e._v(\"视频\")]),a(\"a-select-option\",{attrs:{value:\"4\"}},[e._v(\"文件\")]),a(\"a-select-option\",{attrs:{value:\"5\"}},[e._v(\"网页\")])],1)],1)],1),a(\"a-col\",{attrs:{md:5,sm:24}},[a(\"a-form-item\",{attrs:{label:\"所属单位\"}},[a(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption},model:{value:e.queryParam.orgId,callback:function(t){e.$set(e.queryParam,\"orgId\",t)},expression:\"queryParam.orgId\"}},e._l(e.orgNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")]),a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v(\"新建\")])],1)],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,i){return a(\"span\",{},[e._v(\"\\n      \"+e._s(i+1)+\"\\n    \")])}},{key:\"action\",fn:function(t,r){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(r)}}},[e._v(\"编辑\")]),a(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDeleteUser(r)}}},[e._v(\"删除\")])]],2)}}])}),a(\"edit-form\",{ref:\"editModal\",on:{ok:e.handleRefresh}}),a(\"create-file\",{ref:\"createModal\",on:{ok:e.handleRefresh}})],1)},i=[],l=(a(\"7f7f\"),a(\"2af9\")),o=a(\"680a\"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"修改\",width:600},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"文件名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"fileName\",{rules:[{required:!0,message:\"请输入文件名称\"}],initialValue:this.fileName}],expression:\"[\\n          'fileName',\\n          {rules: [{ required: true, message: '请输入文件名称' }],initialValue:this.fileName}\\n        ]\"}],attrs:{placeholder:\"文件名称\"}})],1),a(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"orgId\",{rules:[{required:!0,message:\"请选择\"}],initialValue:this.orgId}],expression:\"[\\n          'orgId',\\n          {rules: [{ required: true, message: '请选择' }],initialValue:this.orgId}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.orgNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"文件类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"fileType\",{rules:[{required:!0,message:\"文件类型\"}],initialValue:this.fileType}],expression:\"[\\n          'fileType',\\n          {rules: [{required: true, message: '文件类型' }],initialValue:this.fileType}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择文件类型\",optionFilterProp:\"children\",filterOption:e.filterOption}},[a(\"a-select-option\",{attrs:{value:1}},[e._v(\"图片\")]),a(\"a-select-option\",{attrs:{value:2}},[e._v(\"音频\")]),a(\"a-select-option\",{attrs:{value:3}},[e._v(\"视频\")]),a(\"a-select-option\",{attrs:{value:4}},[e._v(\"文件\")]),a(\"a-select-option\",{attrs:{value:5}},[e._v(\"网页\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"文件访问路径\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"fileUrl\",{rules:[{required:!0,message:\"文件访问路径\"}],initialValue:this.fileUrl}],expression:\"[\\n          'fileUrl',\\n          {rules: [{ required: true, message: '文件访问路径' }],initialValue:this.fileUrl}\\n        ]\"}],attrs:{placeholder:\"文件访问路径\"}})],1),a(\"a-form-item\",{attrs:{label:\"上传\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-upload\",{attrs:{name:\"file\",multiple:!1,action:e.url,fileList:e.fileList,headers:e.headers},on:{change:e.handleChange}},[a(\"a-button\",[a(\"a-icon\",{attrs:{type:\"upload\"}}),e._v(\" 点击上传\\n        \")],1)],1)],1)],1)],1)},n=[],c=a(\"75fc\"),u=a(\"2934\"),f=a(\"91b6\"),d={data:function(){return{fileList:[],headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),fileUrl:\"\",fileName:\"\",orgId:\"\",id:\"\",fileType:\"\",orgNames:[],url:\"\"}},methods:{handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t={org:e},a=this;Object(u[\"b\"])(t,\"/userManage/getHrOrgByPid\").then(function(e){a.orgNames=e.result,0!==e.code&&a.$message.error(e.message)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleChange:function(e){var t=Object(c[\"a\"])(e.fileList);if(t=t.slice(-1),console.log(t),this.fileList=t,\"uploading\"!==e.file.status&&console.log(e.file,e.fileList),console.log(e.file.status),\"done\"==e.file.status){var a=e.file.response;0==a.code?(this.$message.success(\"\".concat(e.file.name,\" 上传成功\")),this.fileUrl=a.fileName,this.form.setFieldsValue({fileUrl:a.fileName})):(this.$message.error(a.message),this.fileList=[])}else\"error\"==e.file.status&&this.$message.error(\"\".concat(e.file.name,\" 上传失败.\"))},add:function(e){console.log(e),this.fileList=[],this.fileUrl=e.fileUrl,this.orgId=e.org,this.fileName=e.fileName,this.fileType=e.type,this.id=e.id,this.visible=!0,this.url=f[\"a\"]+\"skillOptionFile/fileUpload\",this.handleOrgList()},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(\"\"==e.fileUrl&&\"\"==a.fileUrl)return e.$message.error(\"请先上传文件\"),!1;if(t)e.confirmLoading=!1;else{var r=e;setTimeout(function(){var t=Object.assign(a,{id:e.id});Object(u[\"b\"])(t,\"/skillOptionFile/editFile\").then(function(e){0==e.code?r.$message.success(\"修改成功\"):r.$message.error(e.message),r.visible=!1,r.confirmLoading=!1,r.$emit(\"ok\",a),r.url=\"\",r.form.resetFields()})},300)}})},handleCancel:function(){this.visible=!1}}},m=d,p=a(\"2877\"),h=Object(p[\"a\"])(m,s,n,!1,null,null,null),g=h.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:600},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"文件名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"fileName\",{rules:[{required:!0,message:\"请输入文件名称\"}]}],expression:\"[\\n          'fileName',\\n          {rules: [{ required: true, message: '请输入文件名称' }]}\\n        ]\"}],attrs:{placeholder:\"文件名称\"}})],1),a(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"orgId\",{rules:[{required:!0,message:\"请选择\"}]}],expression:\"[\\n          'orgId',\\n          {rules: [{ required: true, message: '请选择' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.orgNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),a(\"a-form-item\",{attrs:{label:\"文件类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"fileType\",{rules:[{required:!0,message:\"文件类型\"}]}],expression:\"[\\n          'fileType',\\n          {rules: [{required: true, message: '文件类型' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择文件类型\",optionFilterProp:\"children\",filterOption:e.filterOption}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"图片\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"音频\")]),a(\"a-select-option\",{attrs:{value:\"3\"}},[e._v(\"视频\")]),a(\"a-select-option\",{attrs:{value:\"4\"}},[e._v(\"文件\")]),a(\"a-select-option\",{attrs:{value:\"5\"}},[e._v(\"网页\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"文件访问路径\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"fileUrl\",{rules:[{required:!0,message:\"文件访问路径\"}],initialValue:e.fileUrl}],expression:\"[\\n          'fileUrl',\\n          {rules: [{ required: true, message: '文件访问路径' }],initialValue:fileUrl}\\n        ]\"}],attrs:{placeholder:\"文件访问路径\"}})],1),a(\"a-form-item\",{attrs:{label:\"上传\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-upload\",{attrs:{name:\"file\",multiple:!1,action:e.url,fileList:e.fileList,headers:e.headers},on:{change:e.handleChange}},[a(\"a-button\",[a(\"a-icon\",{attrs:{type:\"upload\"}}),e._v(\"点击上传\\n        \")],1)],1)],1)],1)],1)},b=[],w={data:function(){return{fileList:[],headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),fileUrl:\"\",fileType:\"\",orgNames:[],url:\"\"}},methods:{handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t={org:e},a=this;Object(u[\"b\"])(t,\"/userManage/getHrOrgByPid\").then(function(e){a.orgNames=e.result,0!==e.code&&a.$message.error(e.message)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleChange:function(e){var t=Object(c[\"a\"])(e.fileList);if(t=t.slice(-1),console.log(t),this.fileList=t,\"uploading\"!==e.file.status&&console.log(e.file,e.fileList),console.log(e.file.status),\"done\"==e.file.status){var a=e.file.response;0==a.code?(this.$message.success(\"\".concat(e.file.name,\" 上传成功\")),this.fileUrl=a.fileName,this.form.setFieldsValue({fileUrl:a.fileName})):(this.$message.error(a.message),this.fileList=[])}else\"error\"==e.file.status&&this.$message.error(\"\".concat(e.file.name,\" 上传失败.\"))},add:function(){this.fileList=[],this.fileUrl=\"\",this.visible=!0,this.url=f[\"a\"]+\"skillOptionFile/fileUpload\",this.handleOrgList()},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(\"\"==e.fileUrl&&\"\"==a.fileUrl)return e.$message.error(\"请先上传文件\"),!1;if(t)e.confirmLoading=!1;else{var r=e;setTimeout(function(){var e=Object.assign(a);Object(u[\"b\"])(e,\"/skillOptionFile/addFile\").then(function(e){0==e.code?r.$message.success(\"新建成功\"):r.$message.error(e.message),r.visible=!1,r.confirmLoading=!1,r.$emit(\"ok\",a),r.url=\"\",r.form.resetFields()})},300)}})},handleCancel:function(){this.visible=!1}}},O=w,C=Object(p[\"a\"])(O,v,b,!1,null,null,null),y=C.exports,N={name:\"TableList\",components:{STable:l[\"f\"],PageView:o[\"c\"],EditForm:g,CreateFile:y},data:function(){var e=this;return{headers:{authorization:\"authorization-text\"},queryParam:{appVersion:\"\",orgId:\"\"},orgNames:[],editData:{},options:{alert:!1,rowSelection:null},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"文件名称\",dataIndex:\"fileName\"},{title:\"文件类型\",dataIndex:\"fileType\"},{title:\"文件访问路径\",dataIndex:\"fileUrl\"},{title:\"所属单位\",dataIndex:\"orgName\"},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var a;return console.log(\"App 请求\",t),a=e.queryParam.orgId>0?e.queryParam.orgId:JSON.parse(localStorage.getItem(\"user\")).orgId,Object(u[\"b\"])(Object.assign(t,e.queryParam,{orgId:a}),\"/skillOptionFile/queryFileList\").then(function(e){return console.log(e),e.result})}}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.handleOrgLists()},methods:{handleOrgLists:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,a={org:t};Object(u[\"b\"])(a,\"/userManage/getHrOrgByPid\").then(function(t){e.orgNames=t.result,0!==t.code&&e.$message.error(t.message)}).catch(function(e){return console.log(e)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleChange:function(e){\"uploading\"!==e.file.status&&console.log(e.file,e.fileList),\"done\"===e.file.status?this.$message.success(\"\".concat(e.file.name,\" file uploaded successfully\")):\"error\"===e.file.status&&this.$message.error(\"\".concat(e.file.name,\" file upload failed.\"))},handleRefresh:function(){this.$refs.table.refresh()},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},handleEditVisible:function(e){this.$refs.editModal.add(e)},searchData:function(){this.$refs.table.refresh(!0)},handleDeleteUser:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.fileName,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,r){setTimeout(Math.random()>.5?a:r,500);var i={id:e.id,fileUrl:e.fileUrl};Object(u[\"b\"])(i,\"/skillOptionFile/delFile\").then(function(e){console.log(\"删除返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh()):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},x=N,_=(a(\"4c1f\"),Object(p[\"a\"])(x,r,i,!1,null,\"8d74e8d8\",null));t[\"default\"]=_.exports},\"75fc\":function(e,t,a){\"use strict\";var r=a(\"a745\"),i=a.n(r);function l(e){if(i()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var o=a(\"774e\"),s=a.n(o),n=a(\"c8bb\"),c=a.n(n);function u(e){if(c()(Object(e))||\"[object Arguments]\"===Object.prototype.toString.call(e))return s()(e)}function f(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function d(e){return l(e)||u(e)||f()}a.d(t,\"a\",function(){return d})},\"774e\":function(e,t,a){e.exports=a(\"d2d5\")},\"91b6\":function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return r});var r=\"http://192.168.1.110:54321/\"},c8bb:function(e,t,a){e.exports=a(\"54a1\")}}]);","extractedComments":[]}