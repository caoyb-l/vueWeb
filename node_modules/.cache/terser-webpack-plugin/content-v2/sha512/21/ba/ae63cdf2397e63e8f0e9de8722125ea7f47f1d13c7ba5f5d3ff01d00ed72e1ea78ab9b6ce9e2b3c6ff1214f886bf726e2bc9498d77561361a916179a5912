{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-38d43ccc\"],{2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return o}),a.d(t,\"a\",function(){return n});var r=a(\"b775\");function o(e,t){return console.log(\"请求参数:\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}function n(e,t){return console.log(\"新增/编辑 数据\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}},\"7ff0\":function(e,t,a){},b1fb:function(e,t,a){\"use strict\";a.r(t);var r,o,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"a-card\",{attrs:{bordered:!1}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{span:5}},[a(\"a-input-search\",{attrs:{placeholder:\"关键字\"},on:{change:e.onChange}}),a(\"a-tree\",{ref:\"tree\",attrs:{expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.orgTree},on:{expand:e.onExpand,select:e.onSelect},scopedSlots:e._u([{key:\"title\",fn:function(t){var r=t.title;return[r.indexOf(e.searchValue)>-1?a(\"span\",[e._v(\"\\n              \"+e._s(r.substr(0,r.indexOf(e.searchValue)))+\"\\n              \"),a(\"span\",{staticStyle:{color:\"#f50\"}},[e._v(e._s(e.searchValue))]),e._v(\"\\n              \"+e._s(r.substr(r.indexOf(e.searchValue)+e.searchValue.length))+\"\\n            \")]):a(\"span\",[e._v(e._s(r))])]}}])})],1),a(\"a-col\",{attrs:{span:17}},[a(\"div\",{staticClass:\"table-operator\"},[e.isSelect?a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"30px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.handleAddVisible()}}},[e._v(\"新建下级\")]):e._e(),e.isSelect?a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],staticStyle:{\"margin-left\":\"30px\"},attrs:{type:\"dashed\",icon:\"form\"},on:{click:function(t){return e.handleEditVisible()}}},[e._v(\"编辑信息\")]):e._e(),e.isSelect?a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],staticStyle:{\"margin-left\":\"30px\"},attrs:{type:\"danger\",icon:\"delete\"},on:{click:function(t){return e.handleDelete()}}},[e._v(\"删除\")]):e._e(),e.isSelect?a(\"a-card\",{attrs:{bordered:!1}},[a(\"detail-list\",{ref:\"list\",attrs:{title:\"单位信息\"}},[a(\"detail-list-item\",{attrs:{term:\"单位名称\"}},[e._v(e._s(e.comInfo.name))]),a(\"detail-list-item\",{attrs:{term:\"联系人\"}},[e._v(e._s(e.comInfo.contact))]),a(\"detail-list-item\",{attrs:{term:\"联系方式\"}},[e._v(e._s(e.comInfo.contactWay))]),a(\"detail-list-item\",{attrs:{term:\"备注\"}},[e._v(e._s(e.comInfo.descn))])],1),a(\"a-divider\",{staticStyle:{\"margin-bottom\":\"32px\"}})],1):e._e()],1)])],1)],1),a(\"a-modal\",{attrs:{title:\"新建下级\"},on:{ok:e.handleAdd},model:{value:e.addVisible,callback:function(t){e.addVisible=t},expression:\"addVisible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"addForm.name\",{rules:[{required:!0,message:\"请输入名称\"}]}],expression:\"[\\n          'addForm.name',\\n          {rules: [{ required: true, message: '请输入名称' }]}\\n        ]\"}],attrs:{placeholder:\"名称\"}})],1),a(\"a-form-item\",{attrs:{label:\"联系人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"addForm.contact\"],expression:\"[\\n          'addForm.contact'\\n        ]\"}],attrs:{placeholder:\"联系人\"}})],1),a(\"a-form-item\",{attrs:{label:\"联系方式\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"addForm.contactWay\"],expression:\"[\\n          'addForm.contactWay'\\n        ]\"}],attrs:{placeholder:\"联系方式\"}})],1),a(\"a-form-item\",{attrs:{label:\"备注\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"addForm.descn\"],expression:\"[\\n          'addForm.descn'\\n        ]\"}],attrs:{placeholder:\"备注\",rows:4}})],1)],1)],1),a(\"a-modal\",{attrs:{title:\"编辑\"},on:{ok:e.handleEdit},model:{value:e.editVisible,callback:function(t){e.editVisible=t},expression:\"editVisible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"editForm.name\",{rules:[{required:!0,message:\"请输入名称\"}],initialValue:e.editForm.name}],expression:\"[\\n          'editForm.name',\\n          {rules: [{ required: true, message: '请输入名称' }],\\n          initialValue: editForm.name}\\n        ]\"}],attrs:{placeholder:\"名称\"}})],1),a(\"a-form-item\",{attrs:{label:\"联系人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"editForm.contact\",{initialValue:e.editForm.contact}],expression:\"[\\n          'editForm.contact',\\n          {initialValue: editForm.contact}\\n        ]\"}],attrs:{placeholder:\"联系人\"}})],1),a(\"a-form-item\",{attrs:{label:\"联系方式\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"editForm.contactWay\",{initialValue:e.editForm.contactWay}],expression:\"[\\n          'editForm.contactWay',\\n          {initialValue: editForm.contactWay}\\n        ]\"}],attrs:{placeholder:\"联系方式\"}})],1),a(\"a-form-item\",{attrs:{label:\"备注\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"editForm.descn\",{initialValue:e.editForm.descn}],expression:\"[\\n          'editForm.descn',\\n          {initialValue: editForm.descn}\\n        ]\"}],attrs:{placeholder:\"备注\",rows:4}})],1)],1)],1)],1)},i=[],l=(a(\"ac6a\"),a(\"456d\"),a(\"cebc\")),s=a(\"2934\"),c=a(\"fa43\"),d=c[\"a\"],m=d,u=a(\"2877\"),p=Object(u[\"a\"])(m,r,o,!1,null,null,null),f=p.exports,h=f.Item,g={components:{DetailList:f,DetailListItem:h},data:function(){return{form:this.$form.createForm(this),expandedKeys:[],searchValue:\"\",autoExpandParent:!0,orgTree:[],orgList:[],comInfo:[],pid:\"\",isSelect:!1,addVisible:!1,editVisible:!1,addForm:{name:\"\",contact:\"\",contactWay:\"\",descn:\"\"},editForm:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}}},beforeMount:function(){this.getDateTree()},methods:{handleAdd:function(){var e=this,t=this.form.validateFields,a=this;t(function(t,r){t||console.log(\"values\",r);var o=Object(l[\"a\"])({pid:e.pid},r.addForm);console.log(o),Object(s[\"b\"])(o,\"/hrOrg/save\").then(function(e){0==e.code?(a.$message.success(\"新建成功\"),a.addVisible=!1,a.form.resetFields(),a.getDateTree()):a.$message.error(e.message)})})},handleEdit:function(){var e=this,t=this.form.validateFields,a=this;t(function(t,r){t||console.log(\"values\",r);var o=Object(l[\"a\"])({entityId:e.pid},r.editForm);console.log(o),Object(s[\"b\"])(o,\"/hrOrg/save\").then(function(e){0==e.code?(a.$message.success(\"编辑成功\"),a.editVisible=!1,a.form.resetFields(),a.getDateTree(),a.getComInfo(a.pid)):a.$message.error(e.message)})})},handleDelete:function(){var e=this;this.$confirm({title:\"警告\",content:\"真的要删除该单位吗?\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return new Promise(function(t,a){setTimeout(Math.random()>.5?t:a,500);var r={entityId:e.pid};console.log(r),Object(s[\"b\"])(r,\"/hrOrg/delete\").then(function(t){console.log(t),0==t.code?(e.$message.success(\"删除成功\"),e.getDateTree()):e.$message.error(t.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})},handleAddVisible:function(){\"\"!=this.pid&&(this.addVisible=!0)},handleEditVisible:function(){this.form.resetFields(),this.editVisible=!0,this.editForm=this.comInfo},getDateTree:function(){var e=JSON.parse(localStorage.getItem(\"user\")).id,t=this;Object(s[\"b\"])({userid:e},\"hrOrg/list\").then(function(e){if(console.log(e),0==e.code){t.orgTree=e.result,t.getOrgList(e.result);var a=[];e.result.map(function(e,t){if(e.children){var r=e.children;r.map(function(e,t){a.push(e.key)})}else a.push(e.key)}),t.expandedKeys=a}})},getOrgList:function(e){for(var t=0;t<e.length;t++){var a=e[t],r=a.key,o=a.title,n=a.orgId,i=a.pid;this.orgList.push({key:r,title:o,orgid:n,pid:i}),a.children&&this.getOrgList(a.children)}},onSelect:function(e){this.getComInfo(e[0])},getComInfo:function(e){var t={orgId:e},a=this;Object(s[\"b\"])(t,\"/hrOrg/getOrgMessage\").then(function(t){console.log(t),0==t.code&&(a.comInfo=Object(t.hrOrg),Object.keys(a.comInfo).length?(a.isSelect=!0,a.pid=e):a.isSelect=!1)})},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onChange:function(e){var t=this,a=e.target.value,r=this.orgList.map(function(e){return e.title.indexOf(a)>-1?t.getParentKey(e.title,t.orgTree):null}).filter(function(e,t,a){return e&&a.indexOf(e)===t});Object.assign(this,{expandedKeys:r,searchValue:a,autoExpandParent:!0})},getParentKey:function(e,t){for(var a=0,r=0;r<t.length;r++){var o=t[r];o.children&&(o.children.some(function(t){return t.title===e})?a=o.key:this.getParentKey(e,o.children)&&(a=this.getParentKey(e,o.children)))}return a}}},b=g,v=(a(\"f590\"),Object(u[\"a\"])(b,n,i,!1,null,null,null));t[\"default\"]=v.exports},f590:function(e,t,a){\"use strict\";var r=a(\"7ff0\"),o=a.n(r);o.a}}]);","extractedComments":[]}