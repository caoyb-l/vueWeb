{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-ed17ed3e\"],{2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return r}),a.d(t,\"a\",function(){return n});var o=a(\"b775\");function r(e,t){return console.log(\"查询、删除数据\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}function n(e,t){return console.log(\"新增/编辑 数据\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}},\"550b\":function(e,t,a){},a012:function(e,t,a){\"use strict\";var o=a(\"550b\"),r=a.n(o);r.a},c2ac:function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-form-item\",{attrs:{label:\"机器人名称\"}},[a(\"a-input\",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-form-item\",{attrs:{label:\"机器人编码\"}},[a(\"a-input\",{model:{value:e.queryParam.code,callback:function(t){e.$set(e.queryParam,\"code\",t)},expression:\"queryParam.code\"}})],1)],1),a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-form-item\",{attrs:{label:\"所属单位\"}},[a(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption},model:{value:e.queryParam.orgId,callback:function(t){e.$set(e.queryParam,\"orgId\",t)},expression:\"queryParam.orgId\"}},e._l(e.orgNames,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n                \"+e._s(t.name)+\"\\n              \")])}),1)],1)],1),a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-form-item\",{attrs:{label:\"有效截止时间\"}},[a(\"a-date-picker\",{attrs:{showTime:\"\",format:\"YYYY-MM-DD HH:mm:ss\"},on:{change:e.onChange}})],1)],1),a(\"a-col\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{md:8,sm:24}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")])],1)],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,r){return a(\"span\",{},[e._v(\"\\n        \"+e._s(r+1)+\"\\n      \")])}},{key:\"action\",fn:function(t,o){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(o)}}},[e._v(\"编辑\")]),a(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDelete(o)}}},[e._v(\"删除\")])]],2)}}])}),a(\"edit-robot\",{ref:\"editModal\",on:{ok:e.handleOk}})],1)},r=[],n=(a(\"7f7f\"),a(\"2af9\")),i=a(\"680a\"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑\",width:600},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"机器人名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"name\",{rules:[{required:!0,message:\"请输入机器人名称\"}],initialValue:e.editData.name}],expression:\"[\\n          'name',\\n          {\\n            rules: [{ required: true, message: '请输入机器人名称' }],\\n            initialValue: editData.name,\\n          }]\"}],attrs:{placeholder:\"机器人名称\"}})],1),a(\"a-form-item\",{attrs:{label:\"所属单位\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"orgId\",{rules:[{required:!0,message:\"请选择\"}],initialValue:e.editData.orgName}],expression:\"[\\n          'orgId',\\n          {rules: [{ required: true, message: '请选择' }],\\n          initialValue: editData.orgName}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.orgNames,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"有效截止时间(年)\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"validity\",{rules:[{required:!0,message:\"请输入有效截止时间\"}],initialValue:e.editData.validity}],expression:\"[\\n          'validity',\\n          {\\n            rules: [{ required: true, message: '请输入有效截止时间' }],\\n            initialValue:editData.validity\\n          }\\n          ]\"}],attrs:{placeholder:\"有效截止时间\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸失效时间(小时)\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"faceTime\",{rules:[{message:\"请输入人脸失效时间\"}],initialValue:e.editData.faceTime}],expression:\"[\\n          'faceTime',\\n          {rules: [{ message: '请输入人脸失效时间' }],\\n          initialValue: editData.faceTime}\\n        ]\"}],attrs:{placeholder:\"人脸失效时间\"}})],1)],1)],1)},l=[],c=(a(\"c5f6\"),a(\"7cdf\"),a(\"2934\")),d=a(\"c1df\"),u=a.n(d),m={data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),orgNames:[],editData:{},orgId:0}},created:function(){this.handleOrgLists()},methods:{moment:u.a,handleOrgLists:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).id,a={userId:t};Object(c[\"b\"])(a,\"/robotInfo/getOrglist\").then(function(t){console.log(t),e.orgNames=t.result,0!==t.code&&e.$message.error(\"获取地图\",t.message)}).catch(function(e){return console.log(e)})},add:function(e){this.orgId=e.orgId,this.visible=!0,this.editData=e},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{a.orgId=Number.isInteger(a.orgId)?a.orgId:e.orgId;var o=Object.assign(a,{entityId:e.editData.id}),r=e;setTimeout(function(){Object(c[\"b\"])(o,\"/robotInfo/save\").then(function(e){console.log(e),0==e.code?r.$message.success(\"修改成功\"):r.$message.error(e.message),r.form.resetFields()}),e.visible=!1,e.confirmLoading=!1,e.$emit(\"ok\",a)},300)}})},handleCancel:function(){this.visible=!1,this.editData={}},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},f=m,p=a(\"2877\"),g=Object(p[\"a\"])(f,s,l,!1,null,null,null),h=g.exports,b={name:\"TableList\",components:{STable:n[\"e\"],PageView:i[\"c\"],EditRobot:h},data:function(){var e=this;return{advanced:!1,addVisible:!1,editVisible:!1,orgId:{orgId:1},selectedItems:[],queryParam:{code:\"\",name:\"\",orgId:\"\",validityDate:\"\"},editData:{},options:{alert:!1,rowSelection:null},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"机器人编码\",dataIndex:\"code\",scopedSlots:{customRender:\"code\"}},{title:\"单位名称\",dataIndex:\"orgName\",scopedSlots:{customRender:\"orgName\"}},{title:\"地图名称\",dataIndex:\"mapName\",scopedSlots:{customRender:\"mapName\"}},{title:\"有效截止时间\",dataIndex:\"validityDate\",scopedSlots:{customRender:\"validityDate\"}},{title:\"人脸失效时间(分钟)\",dataIndex:\"faceTime\",scopedSlots:{customRender:\"faceTime\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var a=JSON.parse(localStorage.getItem(\"user\")).id,o=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(c[\"b\"])(Object.assign(t,e.queryParam,{userId:a,orgId:o}),\"/robotInfo/list\").then(function(e){return console.log(e),e.result})},orgNames:[],roleNames:[],selectedRowKeys:[],selectedRows:[]}},created:function(){this.handleOrgLists()},computed:{title:function(){return this.$route.meta.title}},methods:{handleOrgLists:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).id,a={userId:t};Object(c[\"b\"])(a,\"/robotInfo/getOrglist\").then(function(t){e.orgNames=t.result,0!==t.code&&e.$message.error(t.message)}).catch(function(e){return console.log(e)})},onChange:function(e,t){this.queryParam.validityDate=t,console.log(e,t)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},handleAddVisible:function(){this.addVisible=!0},handleEditVisible:function(e){this.editData=e,console.log(e),this.$refs.editModal.add(e),this.editVisible=!0},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},searchData:function(){this.$refs.table.refresh(!0)},handleOk:function(){this.$refs.table.refresh(!0)},handleDelete:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,o){setTimeout(Math.random()>.5?a:o,500);var r={entityId:e.id};Object(c[\"b\"])(r,\"/robotInfo/delete\").then(function(e){console.log(\"删除返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},v=b,w=(a(\"a012\"),Object(p[\"a\"])(v,o,r,!1,null,\"30d25ccf\",null));t[\"default\"]=w.exports}}]);","extractedComments":[]}