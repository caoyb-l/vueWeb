{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-017da98c\"],{\"10e1\":function(e,t,n){\"use strict\";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-card\",{attrs:{bordered:!1}},[n(\"div\",{staticClass:\"table-page-search-wrapper\"},[n(\"a-form\",{attrs:{layout:\"inline\"}},[n(\"a-row\",{attrs:{gutter:48}},[n(\"a-col\",{attrs:{md:8,sm:24}},[n(\"a-form-item\",{attrs:{label:\"角色名\"}},[n(\"a-input\",{attrs:{placeholder:\"请输入\"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),n(\"a-col\",{attrs:{md:8,sm:24}},[n(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.$refs.table.refresh()}}},[e._v(\"查询\")]),n(\"a-button\",{staticStyle:{\"margin-left\":\"10px\"},on:{click:function(t){return e.handleReset()}}},[e._v(\"重置\")]),n(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.addModal.add()}}},[e._v(\"新建\")])],1)],1)],1)],1),n(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:\"expandedRowRender\",fn:function(t){return n(\"div\",{staticStyle:{margin:\"0\"}},[n(\"a-row\",{style:{marginBottom:\"12px\"},attrs:{gutter:24}},e._l(t.permissions,function(t,a){return n(\"a-col\",{key:a,style:{marginBottom:\"12px\"},attrs:{span:12}},[n(\"a-col\",{attrs:{span:6}},[n(\"span\",[e._v(e._s(t.permissionName)+\"：\")])]),t.actionEntitySet.length>0?n(\"a-col\",{attrs:{span:18}},e._l(t.actionEntitySet,function(t,a){return n(\"a-tag\",{key:a,attrs:{color:\"cyan\"}},[e._v(e._s(t.describe))])}),1):n(\"a-col\",{attrs:{span:18}},[e._v(\"-\")])],1)}),1)],1)}},{key:\"action\",fn:function(t,a){return n(\"span\",{},[n(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEdit(a)}}},[e._v(\"编辑\")]),n(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"vertical\"}}),n(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDel(a)}}},[e._v(\"删除\")])],1)}}])}),n(\"edit-modal\",{ref:\"editModal\",attrs:{roleName:e.roleName},on:{ok:e.handleOk}}),n(\"create-modal\",{ref:\"addModal\",on:{ok:e.handleOk}})],1)},r=[],o=(n(\"7f7f\"),n(\"ac6a\"),n(\"2af9\")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-modal\",{attrs:{title:\"编辑\",width:700,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[n(\"a-card\",{style:{height:\"100%\"},attrs:{bordered:!1}},[n(\"a-row\",{attrs:{gutter:24}},[n(\"a-col\",{attrs:{md:24}},[n(\"div\",{staticStyle:{\"max-width\":\"800px\"}},[n(\"a-form\",{attrs:{form:e.form}},[n(\"a-form-item\",{attrs:{label:\"角色名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"rname\",{rules:[{required:!0,message:\"请填写角色名称!\"}],initialValue:e.rname}],expression:\"[\\n               'rname',\\n               {rules: [{ required: true, message: '请填写角色名称!' }],\\n               initialValue:rname}\\n              ]\"}],attrs:{placeholder:\"请填写角色名称\"}})],1),n(\"a-form-item\",{attrs:{label:\"角色等级\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"level\",{rules:[{required:!0,message:\"请填写角色等级!\"}],initialValue:e.level}],expression:\"[\\n               'level',\\n               {rules: [{ required: true, message: '请填写角色等级!' }],\\n               initialValue:level}\\n              ]\"}],attrs:{placeholder:\"请填写角色等级\"}})],1),n(\"a-form-item\",{attrs:{label:\"拥有权限\"}},e._l(e.permissions,function(t,a){return n(\"a-row\",{key:a,attrs:{gutter:16}},[n(\"a-col\",{attrs:{xl:4,lg:24}},[e._v(\"\\n                  \"+e._s(t.name)+\"\\n                \")]),n(\"a-col\",{attrs:{xl:20,lg:24}},[t.actionsOptions.length>0?n(\"a-checkbox\",{attrs:{indeterminate:t.indeterminate,checked:t.checkedAll},on:{change:function(n){return e.onChangeCheckAll(n,t)}}},[e._v(\"\\n                    全选\\n                  \")]):e._e(),n(\"a-checkbox-group\",{attrs:{options:t.actionsOptions},on:{change:function(n){return e.onChangeCheck(t)}},model:{value:t.selected,callback:function(n){e.$set(t,\"selected\",n)},expression:\"permission.selected\"}})],1)],1)}),1)],1)],1)])],1)],1)],1)},s=[];var i=n(\"88bc\"),c=n.n(i),u=n(\"2934\"),d={name:\"RoleModal\",props:{roleName:{type:String,require:!0}},data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,mdl:{},roles:[],name:\"\",level:\"\",rname:\"\",form:this.$form.createForm(this),permissions:[],roleId:0}},methods:{edit:function(e,t){var n=this;this.form.resetFields(),console.log(\"-----record--------\",e),this.roleId=e.id;var a={role:e.id};this.rname=t,this.level=e.level,console.log(\"rnmae:\",this.rname),Object(u[\"b\"])(a,\"/SysRoleManage/loadResourceMsg\").then(function(t){n.permissions=t.result,0!==t.code&&_this.$message.error(t.message),n.mdl=Object.assign({},e),n.visible=!0}).catch(function(e){return console.log(e)}),this.$nextTick(function(){n.form.setFieldsValue(c()(n.mdl,\"id\",\"name\",\"status\",\"describe\"))})},close:function(){this.$emit(\"close\"),this.visible=!1},handleSubmit:function(){var e=this;this.form.validateFields(function(t,n){t||(e.confirmLoading=!0,Object(u[\"a\"])({id:e.roleId,resourceList:e.permissions,name:n.rname,level:n.level},\"/SysRoleManage/editSysRoleMsg\").then(function(t){console.log(t),0==t.code?(e.$message.success(\"修改成功\"),e.form.resetFields(),e.visible=!1):e.$message.error(t.message),e.confirmLoading=!1,e.$emit(\"ok\")}).catch(function(e){return console.log(e)}))})},handleCancel:function(){this.close()},onChangeCheck:function(e){e.indeterminate=!!e.selected.length&&e.selected.length<e.actionsOptions.length,e.checkedAll=e.selected.length===e.actionsOptions.length},onChangeCheckAll:function(e,t){Object.assign(t,{selected:e.target.checked?t.actionsOptions.map(function(e){return e.value}):[],indeterminate:!1,checkedAll:e.target.checked})}}},m=d,f=n(\"2877\"),h=Object(f[\"a\"])(m,l,s,!1,null,\"6470cb47\",null),p=h.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-modal\",{attrs:{title:\"新建\",width:700,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[n(\"a-card\",{style:{height:\"100%\"},attrs:{bordered:!1}},[n(\"a-row\",{attrs:{gutter:24}},[n(\"a-col\",{attrs:{md:24}},[n(\"div\",{staticStyle:{\"max-width\":\"900px\"}},[n(\"a-form\",{attrs:{form:e.form}},[n(\"a-form-item\",{attrs:{label:\"角色名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"name\",{rules:[{required:!0,message:\"请填写角色名称!\"}]}],expression:\"[ \\r\\n               'name',\\r\\n               {rules: [{ required: true, message: '请填写角色名称!' }]}\\r\\n              ]\"}],attrs:{placeholder:\"请填写角色名称\"}})],1),n(\"a-form-item\",{attrs:{label:\"角色等级\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[n(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"level\",{rules:[{required:!0,message:\"请填写角色等级!\"}]}],expression:\"[ \\r\\n               'level',\\r\\n               { \\r\\n                 rules: [{ required: true, message: '请填写角色等级!' }]}\\r\\n              ]\"}],attrs:{type:\"number\",placeholder:\"请填写角色名称\"}})],1),n(\"a-form-item\",{attrs:{label:\"拥有权限\"}},e._l(e.permissions,function(t,a){return n(\"a-row\",{key:a,attrs:{gutter:16}},[n(\"a-col\",{attrs:{xl:4,lg:24}},[e._v(\"\\r\\n                  \"+e._s(t.name)+\"\\r\\n                \")]),n(\"a-col\",{attrs:{xl:20,lg:24}},[t.actionsOptions.length>0?n(\"a-checkbox\",{attrs:{indeterminate:t.indeterminate,checked:t.checkedAll},on:{change:function(n){return e.onChangeCheckAll(n,t)}}},[e._v(\"\\r\\n                    全选\\r\\n                  \")]):e._e(),n(\"a-checkbox-group\",{attrs:{options:t.actionsOptions},on:{change:function(n){return e.onChangeCheck(t)}},model:{value:t.selected,callback:function(n){e.$set(t,\"selected\",n)},expression:\"permission.selected\"}})],1)],1)}),1)],1)],1)])],1)],1)],1)},b=[],v={name:\"addRoleModal\",data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,roles:[],name:\"\",form:this.$form.createForm(this),permissions:[]}},methods:{add:function(){var e=this,t={role:\"\"},n=this;Object(u[\"b\"])(t,\"/SysRoleManage/loadResourceMsg\").then(function(t){console.log(t),n.permissions=t.result,0!==t.code&&n.$message.error(t.message),e.visible=!0}).catch(function(e){return console.log(e)})},close:function(){this.$emit(\"close\"),this.visible=!1},handleSubmit:function(){var e=this,t=this;this.form.validateFields(function(n,a){n||(t.confirmLoading=!0,Object(u[\"a\"])(Object.assign(a,{resourceList:t.permissions}),\"/SysRoleManage/addSysRoleMsg\").then(function(n){console.log(n),0==n.code?(t.$message.success(\"新建成功\"),t.visible=!1,t.form.resetFields(),e.$emit(\"ok\",a)):t.$message.error(n.message),t.confirmLoading=!1}).catch(function(e){return console.log(e)}))})},handleCancel:function(){this.close()},onChangeCheck:function(e){e.indeterminate=!!e.selected.length&&e.selected.length<e.actionsOptions.length,e.checkedAll=e.selected.length===e.actionsOptions.length},onChangeCheckAll:function(e,t){Object.assign(t,{selected:e.target.checked?t.actionsOptions.map(function(e){return e.value}):[],indeterminate:!1,checkedAll:e.target.checked})}}},y=v,k=Object(f[\"a\"])(y,g,b,!1,null,\"7fa6ae66\",null),C=k.exports,w={name:\"TableList\",components:{STable:o[\"f\"],EditModal:p,CreateModal:C},data:function(){var e=this;return{roleId:0,roleName:\"\",mdl:{},queryParam:{name:\"\"},columns:[{title:\"唯一识别码\",dataIndex:\"id\"},{title:\"角色名称\",dataIndex:\"name\"},{title:\"角色等级\",dataIndex:\"level\"},{title:\"描述\",dataIndex:\"describe\"},{title:\"操作\",width:\"150px\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){return Object(u[\"b\"])(Object.assign(t,e.queryParam),\"/SysRoleManage/querySysRoleMsg\").then(function(e){return e.result})}}},methods:{handleEdit:function(e){this.mdl=Object.assign({},e),this.mdl.permissions.forEach(function(e){e.actionsOptions=e.actionEntitySet.map(function(e){return{label:e.describe,value:e.action,defaultCheck:e.defaultCheck}})}),this.roleName=e.name,console.log(\"当前选择\",e.name),this.$refs.editModal.edit(e,e.name)},handleOk:function(){this.$refs.table.refresh()},handleReset:function(){this.queryParam.name=\"\",this.$refs.table.refresh()},handleDel:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(n,a){setTimeout(Math.random()>.5?n:a,300);var r={id:[e.id]};Object(u[\"b\"])(r,\"/SysRoleManage/delSysRoleMsg\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},x=w,O=Object(f[\"a\"])(x,a,r,!1,null,null,null);t[\"default\"]=O.exports},2934:function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return r}),n.d(t,\"a\",function(){return o});var a=n(\"b775\");function r(e,t){return console.log(\"请求参数:\",e),Object(a[\"b\"])({url:t,method:\"post\",data:e})}function o(e,t){return console.log(\"新增/编辑 数据\",e),Object(a[\"b\"])({url:t,method:\"post\",data:e})}},\"88bc\":function(e,t,n){(function(t){var n=1/0,a=9007199254740991,r=\"[object Arguments]\",o=\"[object Function]\",l=\"[object GeneratorFunction]\",s=\"[object Symbol]\",i=\"object\"==typeof t&&t&&t.Object===Object&&t,c=\"object\"==typeof self&&self&&self.Object===Object&&self,u=i||c||Function(\"return this\")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function m(e,t){var n=-1,a=e?e.length:0,r=Array(a);while(++n<a)r[n]=t(e[n],n,e);return r}function f(e,t){var n=-1,a=t.length,r=e.length;while(++n<a)e[r+n]=t[n];return e}var h=Object.prototype,p=h.hasOwnProperty,g=h.toString,b=u.Symbol,v=h.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,k=Math.max;function C(e,t,n,a,r){var o=-1,l=e.length;n||(n=j),r||(r=[]);while(++o<l){var s=e[o];t>0&&n(s)?t>1?C(s,t-1,n,a,r):f(r,s):a||(r[r.length]=s)}return r}function w(e,t){return e=Object(e),x(e,t,function(t,n){return n in e})}function x(e,t,n){var a=-1,r=t.length,o={};while(++a<r){var l=t[a],s=e[l];n(s,l)&&(o[l]=s)}return o}function O(e,t){return t=k(void 0===t?e.length-1:t,0),function(){var n=arguments,a=-1,r=k(n.length-t,0),o=Array(r);while(++a<r)o[a]=n[t+a];a=-1;var l=Array(t+1);while(++a<t)l[a]=n[a];return l[t]=o,d(e,this,l)}}function j(e){return $(e)||_(e)||!!(y&&e&&e[y])}function S(e){if(\"string\"==typeof e||E(e))return e;var t=e+\"\";return\"0\"==t&&1/e==-n?\"-0\":t}function _(e){return R(e)&&p.call(e,\"callee\")&&(!v.call(e,\"callee\")||g.call(e)==r)}var $=Array.isArray;function M(e){return null!=e&&A(e.length)&&!q(e)}function R(e){return L(e)&&M(e)}function q(e){var t=N(e)?g.call(e):\"\";return t==o||t==l}function A(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=a}function N(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function L(e){return!!e&&\"object\"==typeof e}function E(e){return\"symbol\"==typeof e||L(e)&&g.call(e)==s}var F=O(function(e,t){return null==e?{}:w(e,m(C(t,1),S))});e.exports=F}).call(this,n(\"24aa\"))}}]);","extractedComments":[]}