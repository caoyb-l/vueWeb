{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-18f5d8ec\"],{1862:function(e,t,a){\"use strict\";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"0px\"},attrs:{width:1600,cancelText:\"直接退出,不会保存⛔\",okText:\"以保存，点这里退出✔\",closable:!1,maskClosable:!1,keyboard:!1},on:{ok:e.handleSubmit},model:{value:e.showIframe,callback:function(t){e.showIframe=t},expression:\"showIframe\"}},[a(\"iframe\",{ref:\"iframe\",attrs:{src:e.cmdSrc,scrolling:\"no\",height:\"830px\",width:\"100%\",frameborder:\"0\"}})])},r=[],i=(a(\"2934\"),a(\"2af9\")),s={name:\"TableList\",components:{STable:i[\"e\"]},data:function(){return{confirmLoading:!1,form:this.$form.createForm(this),showIframe:!1,cmdSrc:\"http://robot.lovechuangchuang.com:8084/robot.html\"}},methods:{show:function(e,t,a){var o=JSON.parse(localStorage.getItem(\"user\")),r=\"?orgId=\"+o.orgId+\"&createBy=\"+o.id+\"&circulation=1&mapId=\"+t+\"&title=\"+e+\"&cmd=\"+a;this.cmdSrc=this.cmdSrc+encodeURI(r),console.log(this.cmdSrc),this.showIframe=!0},handleSubmit:function(){var e=this.$refs.iframe.contentWindow.document.getElementById(\"cmd\").innerHTML;console.log(this.$refs.iframe.contentWindow.document.getElementById(\"cmd\")),console.log(\"----------确定以后的值，待接收\"+e),0==e?this.$message.error(\"请先点击保存\"):(this.$emit(\"getCmdId\",e),this.showIframe=!1)}}},n=s,l=a(\"2877\"),c=Object(l[\"a\"])(n,o,r,!1,null,null,null);t[\"a\"]=c.exports},2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return r}),a.d(t,\"a\",function(){return i});var o=a(\"b775\");function r(e,t){return console.log(\"请求参数:\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}function i(e,t){return console.log(\"新增/编辑 数据\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}},\"668c\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:6,sm:24}},[a(\"a-form-item\",{attrs:{label:\"姓名\"}},[a(\"a-input\",{attrs:{placeholder:\"请输入\"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),a(\"a-col\",{attrs:{md:6,sm:24}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.$refs.table.refresh()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.handleReset()}}},[e._v(\"重置\")])],1)],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:\"expandedRowRender\",fn:function(t){return a(\"div\",{staticStyle:{margin:\"0\"}},[a(\"a-row\",{style:{marginBottom:\"12px\"},attrs:{gutter:24}},e._l(t.robotFaceList,function(t,o){return a(\"a-col\",{key:o,style:{marginBottom:\"12px\"},attrs:{span:12}},[a(\"a-col\",{attrs:{span:12}},[e._v(\"\\n            编码:\"),a(\"span\",[e._v(e._s(t.robotCode))]),a(\"br\"),e._v(\"\\n            命令集：\"),a(\"a-tag\",{attrs:{color:\"cyan\"}},[e._v(e._s(t.cmdName))])],1),a(\"a-col\",{attrs:{span:1}}),a(\"a-col\",{attrs:{span:11}},[a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],attrs:{type:\"primary\",size:\"small\"},on:{click:function(a){return e.$refs.editRobot.show(t)}}},[e._v(\"修改\")]),a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"danger\",size:\"small\"},on:{click:function(a){return e.DelRobotCmd(t)}}},[e._v(\"删除\")])],1)],1)}),1)],1)}},{key:\"serial\",fn:function(t,o,r){return a(\"span\",{},[e._v(e._s(r+1))])}},{key:\"photoUrl\",fn:function(e){return a(\"span\",{},[a(\"a-popover\",[a(\"template\",{slot:\"content\"},[a(\"img\",{staticStyle:{width:\"200px\"},attrs:{src:e}})]),a(\"a-icon\",{attrs:{type:\"appstore\"}})],2)],1)}},{key:\"action\",fn:function(t,o){return a(\"span\",{},[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEdit(o)}}},[e._v(\"编辑\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDel(o)}}},[e._v(\"删除\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),a(\"a\",{on:{click:function(t){return e.handleRobotCmd(o)}}},[e._v(\"配置机器人\")])],1)}}])}),a(\"edit-modal\",{ref:\"editModal\",on:{ok:e.handleOk}}),a(\"create-modal\",{ref:\"addModal\",on:{ok:e.handleOk}}),a(\"robot-cmd\",{ref:\"robotCmd\",on:{ok:e.handleOk}}),a(\"edit-robot\",{ref:\"editRobot\",on:{ok:e.handleOk}})],1)},r=[],i=(a(\"7f7f\"),a(\"2af9\")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"姓名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"name\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.name}],expression:\"[\\n          'name',\\n          {rules: [{ required: true, message: '请输入' }],\\n          initialValue: editData.name}\\n        ]\"}],attrs:{placeholder:\"姓名\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸描述\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"Descn\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.descn}],expression:\"[\\n              'Descn',\\n              {rules: [{required:true, message: '请输入' }],\\n              initialValue: editData.descn}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸应答内容\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"msg\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.msg}],expression:\"[\\n              'msg',\\n              {rules: [{ required: true, message: '请输入' }],\\n              initialValue: editData.msg}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\",{initialValue:e.editData.mapId}],expression:\"['mapId',{initialValue: editData.mapId}]\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{initialValue:e.editData.cmd}],expression:\"[\\n            'cmd',\\n            {initialValue: editData.cmd}\\n          ]\"}],attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"找不到合适的?点击配置命令集\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?a(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改命令集\")]):e._e()],1),a(\"a-form-item\",{attrs:{label:\"年龄\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"age\",{initialValue:e.editData.age}],expression:\"[\\n          'age',\\n          {initialValue: editData.age}\\n        ]\"}],attrs:{placeholder:\"年龄\"}})],1),a(\"a-form-item\",{attrs:{label:\"性别\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sex\",{rules:[{message:\"请选择\"}],initialValue:1==e.editData.sex?\"男\":\"女\"}],expression:\"[\\n            'sex',\\n            {rules: [{ message: '请选择' }],\\n            initialValue: (editData.sex == 1) ? '男' : '女'}\\n          ]\"}],attrs:{placeholder:\"选择性别\",optionFilterProp:\"children\"}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"男\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"女\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"上传\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-upload\",{attrs:{action:\"http://robot.lovechuangchuang.com:8085/faceManage/faceUpload\",listType:\"picture-card\",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a(\"div\",[a(\"a-icon\",{attrs:{type:\"plus\"}}),a(\"div\",{staticClass:\"ant-upload-text\"},[e._v(\"上传\")])],1):e._e()]),a(\"a-modal\",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a(\"img\",{staticStyle:{width:\"100%\"},attrs:{alt:\"example\",src:e.previewImage}})])],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},n=[],l=a(\"bd86\"),c=a(\"2934\"),d=a(\"1862\"),m={components:{CmdList:d[\"a\"]},data:function(){return{showEditCmd:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),cmdTypeList:[],typeId:\"\",name:\"\",previewVisible:!1,previewImage:\"\",fileList:[],fileName:\"\",editData:\"\",cmdList:[],mapList:[]}},created:function(){},methods:Object(l[\"a\"])({changeCmd:function(e){this.editData.cmd=e,this.showEditCmd=!0},edit:function(e){console.log(e),\"\"!=e.cmd?this.showEditCmd=!0:this.showEditCmd=!1,console.log(this.showEditCmd),this.editData=e,this.fileList=e.photoArr,this.previewImage=e.photo,this.visible=!0,this.getCmd(),this.getMap()},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},editCmd:function(){var e=this.form.getFieldsValue();if(void 0!=e.name){var t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(\"编辑人脸命令集\",t,this.editData.cmd)}else this.$message.error(\"请先输入人脸名称\")},addCmd:function(){var e=this.form.getFieldsValue();if(void 0!=e.name){var t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(\"编辑人脸命令集\",t,0)}else this.$message.error(\"请先输入人脸名称\")},getCmdId:function(e){this.getCmd(),this.editData.cmd=e,this.form.setFieldsValue({cmd:parseInt(e)})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){console.log(e),this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0,console.log(\"-------previewImage\",this.previewImage)},handleChange:function(e){var t=e.fileList;if(console.log(t),t.length>0&&\"done\"==t[0].status){var a=t[0].response;console.log(a),0==a.code?(this.fileName=a.fileName,this.previewImage=a.fileName,this.$message.success(\"\".concat(a.fileName,\" 上传成功\"))):this.$message.error(a.message)}this.fileList=t},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o=e;setTimeout(function(){var t=JSON.parse(localStorage.getItem(\"user\")).orgId,r=\"男\"==a.sex?1:2;a.sex=r,Object(c[\"a\"])(Object.assign(a,{id:e.editData.id,org:t,photo:e.previewImage}),\"/faceManage/editFaceMsg\").then(function(e){0==e.code?o.$message.success(\"编辑成功\"):o.$message.error(e.message),o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",a),o.form.resetFields()})},300)}})}},\"handleCancel\",function(){this.visible=!1})},u=m,p=(a(\"f503\"),a(\"2877\")),h=Object(p[\"a\"])(u,s,n,!1,null,null,null),f=h.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"姓名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"name\",{rules:[{required:!0,message:\"请输入\"}]}],expression:\"[\\n          'name',\\n          {rules: [{ required: true, message: '请输入' }]}\\n        ]\"}],attrs:{placeholder:\"姓名\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸描述\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"Descn\",{rules:[{required:!0,message:\"请输入\"}]}],expression:\"[\\n              'Descn',\\n              {rules: [{ required:true, message: '请输入' }]}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸应答内容\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"msg\",{rules:[{required:!0,message:\"请输入\"}]}],expression:\"[\\n              'msg',\\n              {rules: [{ required: true, message: '请输入' }]}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{initialValue:e.cmd}],expression:\"[\\n          'cmd',\\n          {initialValue: cmd}\\n          ]\"}],attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"找不到合适的?点击配置命令集\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?a(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改命令集\")]):e._e()],1),a(\"a-form-item\",{attrs:{label:\"年龄\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"age\",{rules:[{message:\"请输入\"}]}],expression:\"[\\n          'age',\\n          {rules: [{ message: '请输入' }]}\\n        ]\"}],attrs:{placeholder:\"年龄\"}})],1),a(\"a-form-item\",{attrs:{label:\"性别\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sex\",{rules:[{message:\"请选择\"}]}],expression:\"[\\n            'sex',\\n            {rules: [{ message: '请选择' }]}\\n          ]\"}],attrs:{placeholder:\"选择性别\",optionFilterProp:\"children\"}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"男\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"女\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"上传\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-upload\",{attrs:{action:\"http://robot.lovechuangchuang.com:8085/faceManage/faceUpload\",listType:\"picture-card\",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a(\"div\",[a(\"a-icon\",{attrs:{type:\"plus\"}}),a(\"div\",{staticClass:\"ant-upload-text\"},[e._v(\"Upload\")])],1):e._e()]),a(\"a-modal\",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a(\"img\",{staticStyle:{width:\"100%\"},attrs:{alt:\"example\",src:e.previewImage}})])],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},v=[],b={components:{CmdList:d[\"a\"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),previewVisible:!1,previewImage:\"\",fileList:[],fileName:\"\",cmdList:[],photo:\"\",faceName:\"\",mapId:\"\",mapList:[],cmd:\"\",showEditCmd:!1}},created:function(){this.getCmd(),this.getMap()},methods:Object(l[\"a\"])({changeCmd:function(e){this.cmd=e,this.showEditCmd=!0},editCmd:function(){var e=this.form.getFieldsValue();if(void 0!=e.name){var t=void 0==e.mapId?0:e.mapId;console.log(t),this.$refs.cmd.show(\"编辑人脸命令集\",t,this.cmd)}else this.$message.error(\"请先输入人脸名称\")},addCmd:function(){var e=this.form.getFieldsValue();if(void 0!=e.name){var t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(\"编辑人脸命令集\",t,0)}else this.$message.error(\"请先输入人脸名称\")},add:function(){this.form.resetFields(),this.visible=!0,this.cmd=\"\",this.showEditCmd=!1},getCmdId:function(e){this.getCmd(),this.form.setFieldsValue({cmd:parseInt(e)})},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){console.log(e),this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=e.fileList;if(t.length>0&&\"done\"==t[0].status){var a=t[0].response;console.log(a),0==a.code?(this.fileName=a.fileName,this.$message.success(\"\".concat(a.fileName,\" 上传成功\"))):this.$message.error(a.message)}this.fileList=t},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o=e;if(\"\"==e.fileName)return void e.$message.error(\"请上传人脸图片\");setTimeout(function(){var t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"a\"])(Object.assign(a,{org:t,photo:e.fileName}),\"/faceManage/addFaceMsg\").then(function(e){0==e.code?o.$message.success(\"新建成功\"):o.$message.error(e.message),o.fileList=[],o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",a),o.form.resetFields()})},300)}})}},\"handleCancel\",function(){this.visible=!1})},C=b,w=(a(\"83f9\"),Object(p[\"a\"])(C,g,v,!1,null,null,null)),I=w.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"配置机器人\",width:800,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{rules:[{required:!0,message:\"请选择\"}],initialValue:e.cmd}],expression:\"[\\n            'cmd',\\n            {rules: [{ required:true, message: '请选择' }],initialValue: cmd}\\n          ]\"}],attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"找不到合适的?点击配置命令集\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?a(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改命令集\")]):e._e()],1)],1),a(\"p\",[e._v(\"选择机器人：\")]),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"code\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,r){return a(\"span\",{},[e._v(\"\\n        \"+e._s(r+1)+\"\\n      \")])}}])}),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},L=[],x={name:\"TableList\",components:{STable:i[\"e\"],CmdList:d[\"a\"]},data:function(){var e=this;return{showEditCmd:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,cmdList:[],mapId:\"\",mapList:[],cmd:\"\",faceId:\"\",faceName:\"\",form:this.$form.createForm(this),selectedItems:[],selectedRowKeys:[],selectedRows:[],options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},optionAlertShow:!1,columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"编码\",dataIndex:\"code\",scopedSlots:{customRender:\"code\"}}],loadData:function(e){var t=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(c[\"b\"])(Object.assign(e,{orgId:t}),\"/robotInfo/loadRobotListByOrg\").then(function(e){return console.log(e),e.result})}}},created:function(){},methods:{show:function(e){console.log(e),this.cmd=\"\",this.form.resetFields(),this.showEditCmd=!1,this.faceId=e.id,this.faceName=e.name,this.visible=!0,this.getCmd(),this.getMap()},changeCmd:function(e){this.cmd=e,this.showEditCmd=!0},editCmd:function(){console.log(\"编辑机器人命令集\"+this.cmd);var e=this.form.getFieldsValue(),t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(\"编辑机器人命令集\",t,this.cmd)},addCmd:function(){var e=this.form.getFieldsValue(),t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(\"编辑机器人命令集\",t,0)},getCmdId:function(e){this.getCmd(),this.cmd=e,this.form.setFieldsValue({cmd:parseInt(e)})},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(!t){console.log(a.cmd),console.log(e.selectedRowKeys);var o={faceId:e.faceId,cmd:a.cmd,robotCode:e.selectedRowKeys},r=e;Object(c[\"b\"])(o,\"/faceManage/addRobotFace\").then(function(e){console.log(e),0==e.code?(r.$message.success(\"配置成功\"),r.visible=!1,r.$emit(\"ok\",a)):r.$message.error(e.message)})}})},tableOption:function(){var e=this;this.optionAlertShow?(this.options={alert:!1,rowSelection:null},this.optionAlertShow=!1):(this.options={alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:function(e){return{props:{disabled:\"No 2\"===e.no,name:e.no}}}}},this.optionAlertShow=!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},S=x,_=(a(\"dcdd\"),Object(p[\"a\"])(S,y,L,!1,null,null,null)),O=_.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑机器人命令集\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\",{initialValue:e.editData.mapId}],expression:\"[\\n          'mapId',\\n          {initialValue: editData.mapId}\\n          ]\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{rules:[{required:!0,message:\"请选择\"}],initialValue:e.editData.cmd}],expression:\"[\\n            'cmd',\\n            {rules: [{ required: true,message: '请选择' }],\\n            initialValue: editData.cmd}\\n          ]\"}],attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{id:\"addCmd\",type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"找不到合适的?点击配置命令集\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?a(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改命令集\")]):e._e()],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},$=[],N={name:\"TableList\",components:{STable:i[\"e\"],CmdList:d[\"a\"]},data:function(){return{showEditCmd:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,cmdList:[],editData:[],cmd:\"\",form:this.$form.createForm(this),showIframe:!1,mapList:[]}},created:function(){},methods:{changeCmd:function(e){this.editData.cmd=e,this.showEditCmd=!0},show:function(e){console.log(e),\"\"!=e.cmd?this.showEditCmd=!0:this.showEditCmd=!1,console.log(this.showEditCmd),this.editData=e,this.visible=!0,this.getCmd(),this.getMap()},editCmd:function(){console.log(\"编辑机器人命令集\"+this.editData.cmd),this.$refs.cmd.show(\"编辑机器人命令集\",\"\",this.editData.cmd)},addCmd:function(){this.$refs.cmd.show(\"编辑机器人命令集\",\"\",0)},getCmdId:function(e){this.getCmd(),this.editData.cmd=e,this.form.setFieldsValue({cmd:parseInt(e)})},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o=e;setTimeout(function(){var t={id:e.editData.id,cmd:a.cmd};Object(c[\"a\"])(t,\"/faceManage/editRobotFace\").then(function(t){0==t.code?(o.$message.success(\"修改成功\"),o.form.resetFields(),e.visible=!1,e.confirmLoading=!1,e.$emit(\"ok\",a)):o.$message.error(t.message)})},300)}})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},D=N,F=(a(\"d2a3\"),Object(p[\"a\"])(D,k,$,!1,null,null,null)),M=F.exports,R={name:\"TableList\",components:{STable:i[\"e\"],EditModal:f,CreateModal:I,RobotCmd:O,EditRobot:M},data:function(){var e=this;return{roleId:0,roleName:\"\",mdl:{},queryParam:{name:\"\"},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"人脸名称\",dataIndex:\"name\"},{title:\"文件名称\",dataIndex:\"photo\"},{title:\"照片\",dataIndex:\"photoUrl\",scopedSlots:{customRender:\"photoUrl\"}},{title:\"创建时间\",dataIndex:\"actionDate\"},{title:\"命令集\",dataIndex:\"cmdName\"},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var a=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(c[\"b\"])(Object.assign(t,e.queryParam,{org:a}),\"/faceManage/queryFaceMsg\").then(function(e){return e.result})}}},methods:{handleEdit:function(e){this.$refs.editModal.edit(e)},UpdateRobotCmd:function(){this.$message.error(\"修改\")},DelRobotCmd:function(e){console.log(e);var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.robotCode,\" 的命令集吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,o){setTimeout(Math.random()>.5?a:o,300);var r={id:[e.id]};Object(c[\"b\"])(r,\"/faceManage/delRobotFace\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})},handleRobotCmd:function(e){this.$refs.robotCmd.show(e)},handleOk:function(){this.$refs.table.refresh(!0)},handleReset:function(){this.queryParam.name=\"\",this.$refs.table.refresh()},handleDel:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,o){setTimeout(Math.random()>.5?a:o,300);var r={id:[{id:e.id,photo:e.photo}]};Object(c[\"b\"])(r,\"/faceManage/delFaceMsg\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},V=R,E=Object(p[\"a\"])(V,o,r,!1,null,null,null);t[\"default\"]=E.exports},\"83f9\":function(e,t,a){\"use strict\";var o=a(\"dbe6\"),r=a.n(o);r.a},\"8d42\":function(e,t,a){},b459:function(e,t,a){},c91a:function(e,t,a){},d2a3:function(e,t,a){\"use strict\";var o=a(\"b459\"),r=a.n(o);r.a},dbe6:function(e,t,a){},dcdd:function(e,t,a){\"use strict\";var o=a(\"c91a\"),r=a.n(o);r.a},f503:function(e,t,a){\"use strict\";var o=a(\"8d42\"),r=a.n(o);r.a}}]);","extractedComments":[]}