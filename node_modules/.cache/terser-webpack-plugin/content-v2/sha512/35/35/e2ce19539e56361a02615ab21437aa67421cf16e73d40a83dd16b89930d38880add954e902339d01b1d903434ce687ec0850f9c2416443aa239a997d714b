{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-65e7df51\"],{\"144b\":function(e,t,o){},1862:function(e,t,o){\"use strict\";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-modal\",{attrs:{width:1200,maskClosable:!1,keyboard:!1},on:{ok:e.handleSubmit},model:{value:e.showIframe,callback:function(t){e.showIframe=t},expression:\"showIframe\"}},[o(\"iframe\",{ref:\"iframe\",staticStyle:{width:\"100%\",height:\"800px\",border:\"none\",\"margin-top\":\"0px\"},attrs:{src:e.cmdSrc}})])},s=[],n=(o(\"2934\"),o(\"2af9\")),i={name:\"TableList\",components:{STable:n[\"e\"]},data:function(){return{confirmLoading:!1,form:this.$form.createForm(this),showIframe:!1,cmdSrc:\"http://robot.lovechuangchuang.com:8081/robot.html\"}},methods:{show:function(e,t,o){var r=JSON.parse(localStorage.getItem(\"user\")),s=\"?orgId=\"+r.orgId+\"&createBy=\"+r.id+\"&circulation=1&mapId=\"+t+\"&title=\"+e+\"&cmd=\"+o;this.cmdSrc=this.cmdSrc+encodeURI(s),console.log(this.cmdSrc),this.showIframe=!0},handleSubmit:function(){var e=this.$refs.iframe.contentWindow.document.getElementById(\"cmd\").innerHTML;console.log(this.$refs.iframe.contentWindow.document.getElementById(\"cmd\")),console.log(\"----------确定以后的值，待接收\"+e),0==e?this.$message.error(\"请先点击保存\"):(this.$emit(\"getCmdId\",e),this.showIframe=!1)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},a=i,l=o(\"2877\"),c=Object(l[\"a\"])(a,r,s,!1,null,null,null);t[\"a\"]=c.exports},2934:function(e,t,o){\"use strict\";o.d(t,\"b\",function(){return s}),o.d(t,\"a\",function(){return n});var r=o(\"b775\");function s(e,t){return console.log(\"请求参数:\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}function n(e,t){return console.log(\"新增/编辑 数据\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}},\"75fc\":function(e,t,o){\"use strict\";var r=o(\"a745\"),s=o.n(r);function n(e){if(s()(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}var i=o(\"774e\"),a=o.n(i),l=o(\"c8bb\"),c=o.n(l);function d(e){if(c()(Object(e))||\"[object Arguments]\"===Object.prototype.toString.call(e))return a()(e)}function m(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function u(e){return n(e)||d(e)||m()}o.d(t,\"a\",function(){return u})},\"774e\":function(e,t,o){e.exports=o(\"d2d5\")},aaed:function(e,t,o){\"use strict\";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-card\",{attrs:{bordered:!1}},[o(\"div\",{staticClass:\"table-page-search-wrapper\"},[o(\"a-form\",{attrs:{layout:\"inline\"}},[o(\"a-row\",{attrs:{gutter:48}},[o(\"a-col\",{attrs:{md:6,sm:24}},[o(\"a-form-item\",{attrs:{label:\"机器人名称\"}},[o(\"a-input\",{model:{value:e.queryParam.robotName,callback:function(t){e.$set(e.queryParam,\"robotName\",t)},expression:\"queryParam.robotName\"}})],1)],1),o(\"a-col\",{attrs:{md:8,sm:24}},[o(\"a-form-item\",{attrs:{label:\"触发条件\"}},[o(\"a-select\",{staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择触发指令\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.handleCmdChange},model:{value:e.queryParam.triggerName,callback:function(t){e.$set(e.queryParam,\"triggerName\",t)},expression:\"queryParam.triggerName\"}},e._l(e.cmdList,function(t){return o(\"a-select-option\",{key:t.code,attrs:{value:t.triggerName}},[e._v(e._s(t.triggerName))])}),1)],1)],1),o(\"a-col\",{attrs:{md:e.advanced?24:8,sm:24}},[o(\"span\",{staticClass:\"table-page-search-submitButtons\",style:e.advanced&&{float:\"right\",overflow:\"hidden\"}||{}},[o(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),o(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")])],1)])],1)],1)],1),o(\"div\",{staticClass:\"table-operator\"},[o(\"a-button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v(\"新建\")]),o(\"a-button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.editAllModal.add()}}},[e._v(\"批量修改\")]),o(\"a-button\",{attrs:{type:\"dashed\"},on:{click:e.tableOption}},[e._v(e._s(e.optionAlertShow?\"关闭\":\"开启\")+\" alert\")]),e.selectedRowKeys.length>0?o(\"a-dropdown\",[o(\"a-menu\",{attrs:{slot:\"overlay\"},slot:\"overlay\"},[o(\"a-menu-item\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],key:\"1\",on:{click:function(t){return e.handleDeletes()}}},[o(\"a-icon\",{attrs:{type:\"delete\"}}),e._v(\"删除\\n        \")],1)],1),o(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"}},[e._v(\"\\n        批量操作\\n        \"),o(\"a-icon\",{attrs:{type:\"down\"}})],1)],1):e._e()],1),o(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,s){return o(\"span\",{},[e._v(e._s(s+1))])}},{key:\"action\",fn:function(t,r){return o(\"span\",{},[[o(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(r)}}},[e._v(\"编辑\")]),o(\"a-divider\",{attrs:{type:\"vertical\"}}),o(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDelete(r)}}},[e._v(\"删除\")])]],2)}}])}),o(\"create-sensor\",{ref:\"createModal\",on:{ok:e.handleRefresh}}),o(\"edit-all-sensor\",{ref:\"editAllModal\",on:{ok:e.handleRefresh}}),o(\"edit-sensor\",{ref:\"editModal\",on:{ok:e.handleRefresh}})],1)},s=[],n=o(\"2af9\"),i=o(\"680a\"),a=o(\"2934\"),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:\"70%\",destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[o(\"a-form\",{attrs:{form:e.form}},[o(\"a-form-item\",{attrs:{label:\"触发指令\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"triggerId\",{rules:[{required:!0,message:\"选择触发指令\"}]}],expression:\"[\\n          'triggerId',\\n          {rules: [{required: true,  message: '选择触发指令' }]}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择触发指令\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.handleTriggerCmdChange}},e._l(e.triggerCmdList,function(t){return o(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.triggerName))])}),1)],1),o(\"a-form-item\",{attrs:{label:\"选择机器人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,s){return o(\"span\",{},[e._v(e._s(s+1))])}}])})],1),o(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmdId\",{rules:[{required:!0,message:\"选择命令集\"}],initialValue:e.selectCmd}],expression:\"[\\n          'cmdId',\\n          {rules: [{required: true,  message: '选择命令集' }],initialValue:selectCmd}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t){return o(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),o(\"a-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"找不到合适的?点击配置命令集\")]),o(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?o(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改命令集\")]):e._e()],1)],1),o(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},c=[],d=o(\"cebc\"),m=o(\"75fc\"),u=(o(\"ac6a\"),o(\"5df3\"),o(\"4f7f\"),o(\"1862\")),h={components:{CmdList:u[\"a\"],STable:n[\"e\"]},data:function(){var e=this;return{selectCmd:\"\",showEditCmd:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),triggerCmdList:[],cmdList:[],triggerId:\"\",queryParam:{},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"机器人编码\",dataIndex:\"code\",scopedSlots:{customRender:\"code\"}}],loadData:function(t){var o=JSON.parse(localStorage.getItem(\"user\")).id,r=JSON.parse(localStorage.getItem(\"user\")).orgId;console.log(\"user 请求\",t);var s={type:\"1\",triggerId:e.triggerId,code:\"\",name:\"\",orgId:r,userId:o,validityDate:\"\"};return Object(a[\"b\"])(Object.assign(t,s,e.queryParam),\"/robotInfo/loadPageListByTruggerRobot\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),selectedRows:[],options:{alert:{show:!0},rowSelection:{onSelect:this.onSelectChange,onSelectAll:this.onSelectChangeAll}},optionAlertShow:!1}},created:function(){},methods:{changeCmd:function(e){this.selectCmd=e,this.showEditCmd=!0},addCmd:function(){console.log(this.selectCmd),this.$refs.cmd.show(\"编辑命令集\",\"\",0)},editCmd:function(){console.log(this.selectCmd),this.$refs.cmd.show(\"编辑命令集\",\"\",this.selectCmd)},getCmdId:function(e){this.getCmdList(),this.form.setFieldsValue({selectCmd:parseInt(e)})},handleTriggerCmdChange:function(e){console.log(\"selected \".concat(e)),this.triggerId=e,this.$refs.table.refresh()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,o,r){console.log(e,t),t?this.selectedRowKeys.add(e.id):this.selectedRowKeys.delete(e.id)},onSelectChangeAll:function(e,t,o){var r=this;e?o.map(function(e,t){r.selectedRowKeys.add(e.id)}):o.map(function(e,t){r.selectedRowKeys.delete(e.id)})},getTriggerCmdList:function(){var e=this;Object(a[\"b\"])({},\"/supercmdTrigger/getSupercmdTriggerList\").then(function(t){console.log(\"指令列表\",t),0==t.code?e.triggerCmdList=t.supercmdTriggerList:e.$message.error(t.message)})},getCmdList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,o={orgId:t};Object(a[\"b\"])(o,\"/cmdCollection/getCmdListByOrg\").then(function(t){console.log(\"命令集\",t),0==t.code&&(e.cmdList=t.cmdList)})},add:function(){this.visible=!0,this.selectCmd=\"\",this.showEditCmd=!1,this.getTriggerCmdList(),this.getCmdList(),this.selectedRowKeys.clear(),this.$refs.table&&this.$refs.table.refresh()},handleSubmit:function(){var e=this,t=this.form.validateFields,o=this;this.confirmLoading=!0,t(function(t,r){if(t)e.confirmLoading=!1;else{var s={robotId:Object(m[\"a\"])(o.selectedRowKeys),cmdId:\"1\"};Object(a[\"b\"])(Object(d[\"a\"])({},s,r),\"/supercmdTriggerRobot/save\").then(function(e){0==e.code?o.$message.success(\"新建成功\"):o.$message.error(e.message),o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",r),o.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},g=h,f=o(\"2877\"),p=Object(f[\"a\"])(g,l,c,!1,null,null,null),b=p.exports,C=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"批量修改\",width:\"70%\",destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[o(\"a-form\",{attrs:{form:e.form}},[o(\"a-form-item\",{attrs:{label:\"触发指令\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"triggerId\",{rules:[{required:!0,message:\"选择触发指令\"}]}],expression:\"[\\n          'triggerId',\\n          {rules: [{required: true,  message: '选择触发指令' }]}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择触发指令\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.handleTriggerCmdChange}},e._l(e.triggerCmdList,function(t){return o(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.triggerName))])}),1)],1),o(\"a-form-item\",{attrs:{label:\"选择机器人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,s){return o(\"span\",{},[e._v(e._s(s+1))])}}])})],1),o(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmdId\",{rules:[{required:!0,message:\"选择命令集\"}]}],expression:\"[\\n          'cmdId',\\n          {rules: [{required: true,  message: '选择命令集' }]}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t){return o(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),o(\"a-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"找不到合适的?点击配置命令集\")]),o(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?o(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改命令集\")]):e._e()],1)],1),o(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},w=[],v={components:{CmdList:u[\"a\"],STable:n[\"e\"]},data:function(){var e=this;return{showEditCmd:!1,cmdId:\"\",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),triggerCmdList:[],cmdList:[],triggerId:\"\",queryParam:{},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"机器人编码\",dataIndex:\"code\",scopedSlots:{customRender:\"code\"}}],loadData:function(t){var o=JSON.parse(localStorage.getItem(\"user\")).id,r=JSON.parse(localStorage.getItem(\"user\")).orgId;console.log(\"user 请求\",t);var s={type:2,triggerId:e.triggerId,code:\"\",name:\"\",orgId:r,userId:o,validityDate:\"\"};return Object(a[\"b\"])(Object.assign(t,s,e.queryParam),\"/robotInfo/loadPageListByTruggerRobot\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),selectedRows:[],options:{alert:{show:!0},rowSelection:{onSelect:this.onSelectChange,onSelectAll:this.onSelectChangeAll}},optionAlertShow:!1}},created:function(){},methods:{changeCmd:function(e){this.cmdId=e,this.showEditCmd=!0,console.log(\"下拉框值：\"+this.cmdId)},addCmd:function(){this.$refs.cmd.show(\"批量修改传感器\",\"\",0)},editCmd:function(){console.log(\"修改：\"+this.cmdId),this.$refs.cmd.show(\"批量修改传感器\",\"\",this.cmdId)},getCmdId:function(e){this.getCmdList(),this.cmdId=e,this.form.setFieldsValue({cmdId:parseInt(e)})},handleTriggerCmdChange:function(e){console.log(\"selected \".concat(e)),this.triggerId=e,this.$refs.table.refresh()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,o,r){t?this.selectedRowKeys.add(e.id):this.selectedRowKeys.delete(e.id)},onSelectChangeAll:function(e,t,o){var r=this;e?o.map(function(e,t){r.selectedRowKeys.add(e.id)}):o.map(function(e,t){r.selectedRowKeys.delete(e.id)})},getTriggerCmdList:function(){var e=this;Object(a[\"b\"])({},\"/supercmdTrigger/getSupercmdTriggerList\").then(function(t){console.log(\"指令列表\",t),0==t.code?e.triggerCmdList=t.supercmdTriggerList:e.$message.error(t.message)})},getCmdList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).id,o={orgId:t};Object(a[\"b\"])(o,\"/cmdCollection/getCmdListByOrg\").then(function(t){console.log(\"命令集\",t),0==t.code?e.cmdList=t.cmdList:e.$message.error(t.message)})},add:function(){this.visible=!0,this.showEditCmd=!1,this.cmdId=\"\",this.getTriggerCmdList(),this.getCmdList(),this.selectedRowKeys.clear(),this.$refs.table&&this.$refs.table.refresh()},handleSubmit:function(){var e=this,t=this.form.validateFields,o=this;this.confirmLoading=!0,t(function(t,r){if(t)e.confirmLoading=!1;else{var s={robotId:Object(m[\"a\"])(o.selectedRowKeys),cmdId:\"1\"};Object(a[\"b\"])(Object(d[\"a\"])({},s,r),\"/supercmdTriggerRobot/updateAll\").then(function(e){0==e.code?o.$message.success(\"新建成功\"):o.$message.error(e.message),o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",r),o.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},y=v,S=Object(f[\"a\"])(y,C,w,!1,null,null,null),I=S.exports,O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑传感器\",width:\"70%\",destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[o(\"a-form\",{attrs:{form:e.form}},[o(\"a-form-item\",{attrs:{label:\"触发指令\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-input\",{attrs:{disabled:!0,placeholder:\"触发指令\"},model:{value:e.edit.triggerName,callback:function(t){e.$set(e.edit,\"triggerName\",t)},expression:\"edit.triggerName\"}})],1),o(\"a-form-item\",{attrs:{label:\"选择机器人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",alert:e.options.alert,rowSelection:e.options.rowSelection,columns:e.columns,dataSource:e.data},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,s){return o(\"span\",{},[e._v(e._s(s+1))])}}])})],1),o(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmdId\",{rules:[{required:!0,message:\"选择命令集\"}],initialValue:e.edit.cmdId}],expression:\"[\\n          'cmdId',\\n          {rules: [{required: true,  message: '选择命令集' }],initialValue:edit.cmdId}\\n        ]\"}],staticStyle:{width:\"200px\"},attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.changeCmd(t)}}},e._l(e.cmdList,function(t){return o(\"a-select-option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),o(\"a-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\"},on:{click:function(t){return e.addCmd()}}},[e._v(\"找不到合适的?点击配置命令集\")]),o(\"a-divider\",{attrs:{type:\"vertical\"}}),e.showEditCmd?o(\"a-button\",{attrs:{id:\"chgCmd\",type:\"primary\"},on:{click:function(t){return e.editCmd()}}},[e._v(\"修改命令集\")]):e._e()],1)],1),o(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},L=[],x={components:{CmdList:u[\"a\"],STable:n[\"e\"]},data:function(){return{showEditCmd:!1,edit:{triggerId:0,triggerName:\"\",cmdId:\"\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),cmdList:[],queryParam:{},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"robotName\",scopedSlots:{customRender:\"robotName\"}},{title:\"机器人ID\",dataIndex:\"id\",scopedSlots:{customRender:\"id\"}}],data:[],selectedRowKeys:new Set([]),selectedRows:[],options:{alert:{show:!0},rowSelection:{onSelect:this.onSelectChange,onSelectAll:this.onSelectChangeAll}},optionAlertShow:!1}},created:function(){},methods:{changeCmd:function(e){this.edit.cmdId=e,this.showEditCmd=!0,console.log(\"下拉框：\"+this.edit.cmdId)},addCmd:function(){this.$refs.cmd.show(\"传感器\",\"\",0)},editCmd:function(){console.log(\"修改：\"+this.edit.cmdId),this.$refs.cmd.show(\"传感器\",\"\",this.edit.cmdId)},getCmdId:function(e){this.getCmdList(),this.edit.cmdId=e,this.form.setFieldsValue({cmdId:parseInt(e)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,o,r){t?this.selectedRowKeys.add(e.id):this.selectedRowKeys.delete(e.id),console.log(Object(m[\"a\"])(this.selectedRowKeys))},onSelectChangeAll:function(e,t,o){var r=this;e?o.map(function(e,t){r.selectedRowKeys.add(e.id)}):o.map(function(e,t){r.selectedRowKeys.delete(e.id)})},getCmdList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).id,o={orgId:t};Object(a[\"b\"])(o,\"/cmdCollection/getCmdListByOrg\").then(function(t){0==t.code&&(e.cmdList=t.cmdList)})},add:function(e){console.log(e),\"\"!=e.cmdId&&null!=e.cmdId?this.showEditCmd=!0:this.showEditCmd=!1,console.log(this.showEditCmd),this.visible=!0,this.edit=e,this.data=[],this.data.push(e),this.getCmdList(),this.selectedRowKeys.clear(),this.$refs.table&&this.$refs.table.refresh()},handleSubmit:function(){var e=this,t=this.form.validateFields,o=this;this.confirmLoading=!0,t(function(t,r){if(t)e.confirmLoading=!1;else{var s={robotId:Object(m[\"a\"])(o.selectedRowKeys),cmdId:\"1\",triggerId:o.edit.triggerId,entityId:o.edit.id};Object(a[\"b\"])(Object(d[\"a\"])({},s,r),\"/supercmdTriggerRobot/save\").then(function(e){0==e.code?o.$message.success(\"新建成功\"):o.$message.error(e.message),o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",r),o.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},R=x,_=Object(f[\"a\"])(R,O,L,!1,null,null,null),$=_.exports,k={name:\"TableList\",components:{STable:n[\"e\"],PageView:i[\"c\"],CreateSensor:b,EditAllSensor:I,EditSensor:$},data:function(){var e=this;return{cmdList:[],advanced:!1,queryParam:{robotName:\"\",triggerName:\"\"},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"机器人名称\",dataIndex:\"robotName\",scopedSlots:{customRender:\"robotName\"}},{title:\"机器人编码\",dataIndex:\"robotCode\",scopedSlots:{customRender:\"robotCode\"}},{title:\"触发条件\",dataIndex:\"triggerName\",scopedSlots:{customRender:\"triggerName\"}},{title:\"命令集\",dataIndex:\"cmdName\",scopedSlots:{customRender:\"cmdName\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var o=JSON.parse(localStorage.getItem(\"user\")).orgId;console.log(\"user 请求\",t);var r={orgId:o};return Object(a[\"b\"])(Object.assign(t,r,e.queryParam),\"/supercmdTriggerRobot/list\").then(function(e){return console.log(e),e.result})},selectedRowKeys:[],selectedRows:[],options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},optionAlertShow:!1}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.getCmdList()},methods:{tableOption:function(){var e=this;this.optionAlertShow?(this.options={alert:!1,rowSelection:null},this.optionAlertShow=!1):(this.options={alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:function(e){return{props:{disabled:\"No 2\"===e.no,name:e.no}}}}},this.optionAlertShow=!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleCmdChange:function(e){console.log(\"selected \".concat(e))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getCmdList:function(){var e=this;Object(a[\"b\"])({},\"/supercmdTrigger/getSupercmdTriggerList\").then(function(t){console.log(\"指令列表\",t),0==t.code?e.cmdList=t.supercmdTriggerList:e.$message.error(t.message)})},handleRefresh:function(){this.$refs.table.refresh(!0)},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},handleEditVisible:function(e){this.$refs.editModal.add(e)},searchData:function(){this.$refs.table.refresh(!0)},handleDelete:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除吗?\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(o,r){setTimeout(Math.random()>.5?o:r,500);var s={id:[e.id]};Object(a[\"b\"])(s,\"/supercmdTriggerRobot/delete\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})},handleDeletes:function(){console.log(this.selectedRowKeys);var e=this;this.$confirm({title:\"警告\",content:\"真的要删除吗?\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return new Promise(function(t,o){setTimeout(Math.random()>.5?t:o,500);var r={id:e.selectedRowKeys};Object(a[\"b\"])(r,\"/supercmdTriggerRobot/delete\").then(function(t){0==t.code?(e.$message.success(\"删除成功\"),e.selectedRowKeys=[],e.$refs.table.refresh()):e.$message.error(t.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},N=k,T=(o(\"bbe2\"),Object(f[\"a\"])(N,r,s,!1,null,\"b8afee1e\",null));t[\"default\"]=T.exports},bbe2:function(e,t,o){\"use strict\";var r=o(\"144b\"),s=o.n(r);s.a},c8bb:function(e,t,o){e.exports=o(\"54a1\")}}]);","extractedComments":[]}