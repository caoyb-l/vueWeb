{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-06d2ab06\"],{1862:function(e,t,a){\"use strict\";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{attrs:{title:\"命令集\",width:1e3},on:{ok:e.handleSubmit},model:{value:e.showIframe,callback:function(t){e.showIframe=t},expression:\"showIframe\"}},[a(\"iframe\",{ref:\"iframe\",staticStyle:{width:\"100%\",height:\"600px\",border:\"none\"},attrs:{src:e.cmdSrc}})])},r=[],s=(a(\"2934\"),a(\"2af9\")),i={name:\"TableList\",components:{STable:s[\"e\"]},data:function(){return{confirmLoading:!1,form:this.$form.createForm(this),showIframe:!1,cmdSrc:\"http://localhost:8000/robot.html\"}},methods:{show:function(e,t,a){console.log(e);var o=JSON.parse(localStorage.getItem(\"user\")),r=\"?orgId=\"+o.orgId+\"&createBy=\"+o.id+\"&circulation=1&mapId=\"+t+\"&title=\"+e+\"&cmdId=\"+a;console.log(\"--------------cmdSrc\",this.cmdSrc+r),this.cmdSrc=this.cmdSrc+encodeURI(r),this.showIframe=!0},handleSubmit:function(){var e=this.$refs.iframe.contentWindow.document.getElementById(\"number\");console.log(e);var t=e.innerHTML;0==t&&this.$message.error(\"请先点击左下角保存按钮\"),this.$emit(\"getCmdId\",t),console.log(\"--------------命令集id：\",t),this.showIframe=!1},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},n=i,l=(a(\"27a4\"),a(\"2877\")),c=Object(l[\"a\"])(n,o,r,!1,null,null,null);t[\"a\"]=c.exports},\"27a4\":function(e,t,a){\"use strict\";var o=a(\"6eb1\"),r=a.n(o);r.a},2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return r}),a.d(t,\"a\",function(){return s});var o=a(\"b775\");function r(e,t){return console.log(\"查询、删除数据\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}function s(e,t){return console.log(\"新增/编辑 数据\",e),Object(o[\"b\"])({url:t,method:\"post\",data:e})}},\"668c\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-form-item\",{attrs:{label:\"人脸名称\"}},[a(\"a-input\",{attrs:{placeholder:\"请输入\"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"span\",{staticClass:\"table-page-search-submitButtons\"},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.$refs.table.refresh()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.handleReset()}}},[e._v(\"重置\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.addModal.add()}}},[e._v(\"新建\")])],1)])],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:\"expandedRowRender\",fn:function(t){return a(\"div\",{staticStyle:{margin:\"0\"}},[a(\"a-row\",{style:{marginBottom:\"12px\"},attrs:{gutter:24}},e._l(t.robotFaceList,function(t,o){return a(\"a-col\",{key:o,style:{marginBottom:\"12px\"},attrs:{span:12}},[a(\"a-col\",{attrs:{span:12}},[a(\"span\",[e._v(e._s(t.robotCode))]),e._v(\"：\"),a(\"br\"),e._v(\"\\n            命令集\"),a(\"a-tag\",{attrs:{color:\"cyan\"}},[e._v(e._s(t.cmd))])],1),a(\"a-col\",{attrs:{span:1}}),a(\"a-col\",{attrs:{span:11}},[a(\"a-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(a){return e.$refs.editRobot.show(t)}}},[e._v(\"修改\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"danger\",size:\"small\"},on:{click:function(a){return e.DelRobotCmd(t)}}},[e._v(\"删除\")])],1)],1)}),1)],1)}},{key:\"action\",fn:function(t,o){return a(\"span\",{},[a(\"a\",{on:{click:function(t){return e.handleEdit(o)}}},[e._v(\"编辑\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),a(\"a\",{on:{click:function(t){return e.handleDel(o)}}},[e._v(\"删除\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}}),a(\"a\",{on:{click:function(t){return e.handleRobotCmd(o)}}},[e._v(\"配置机器人\")])],1)}}])}),a(\"edit-modal\",{ref:\"editModal\",on:{ok:e.handleOk}}),a(\"create-modal\",{ref:\"addModal\",on:{ok:e.handleOk}}),a(\"robot-cmd\",{ref:\"robotCmd\",on:{ok:e.handleOk}}),a(\"edit-robot\",{ref:\"editRobot\",on:{ok:e.handleOk}})],1)},r=[],s=(a(\"7f7f\"),a(\"2af9\")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"姓名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"name\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.name}],expression:\"[\\n          'name',\\n          {rules: [{ required: true, message: '请输入' }],\\n          initialValue: editData.name}\\n        ]\"}],attrs:{placeholder:\"姓名\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸描述\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"Descn\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.descn}],expression:\"[\\n              'Descn',\\n              {rules: [{required:true, message: '请输入' }],\\n              initialValue: editData.descn}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸应答内容\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"msg\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.msg}],expression:\"[\\n              'msg',\\n              {rules: [{ required: true, message: '请输入' }],\\n              initialValue: editData.msg}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\",{initialValue:e.editData.mapId}],expression:\"['mapId',{initialValue: editData.mapId}]\"}],attrs:{placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{initialValue:e.editData.cmd}],expression:\"[\\n            'cmd',\\n            {initialValue: editData.cmd}\\n          ]\"}],attrs:{placeholder:\"选择命令集\",optionFilterProp:\"children\"}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:e.showCmd}},[e._v(\"找不到合适的?点击配置命令集\")])],1),a(\"a-form-item\",{attrs:{label:\"年龄\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"age\",{initialValue:e.editData.age}],expression:\"[\\n          'age',\\n          {initialValue: editData.age}\\n        ]\"}],attrs:{placeholder:\"年龄\"}})],1),a(\"a-form-item\",{attrs:{label:\"性别\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sex\",{rules:[{message:\"请选择\"}],initialValue:1==e.editData.sex?\"男\":\"女\"}],expression:\"[\\n            'sex',\\n            {rules: [{ message: '请选择' }],\\n            initialValue: (editData.sex == 1) ? '男' : '女'}\\n          ]\"}],attrs:{placeholder:\"选择性别\",optionFilterProp:\"children\"}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"男\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"女\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"上传\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-upload\",{attrs:{action:\"http://47.105.129.17:54321/faceManage/faceUpload\",listType:\"picture-card\",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a(\"div\",[a(\"a-icon\",{attrs:{type:\"plus\"}}),a(\"div\",{staticClass:\"ant-upload-text\"},[e._v(\"上传\")])],1):e._e()]),a(\"a-modal\",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a(\"img\",{staticStyle:{width:\"100%\"},attrs:{alt:\"example\",src:e.previewImage}})])],1)],1),a(\"cmd-list\",{ref:\"cmd\"})],1)},n=[],l=a(\"bd86\"),c=a(\"2934\"),d=a(\"1862\"),m={components:{CmdList:d[\"a\"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),cmdTypeList:[],typeId:\"\",name:\"\",previewVisible:!1,previewImage:\"\",fileList:[],fileName:\"\",editData:\"\",cmdList:[],mapList:[]}},created:function(){this.getCmd(),this.getMap()},methods:Object(l[\"a\"])({edit:function(e){console.log(e),this.editData=e,this.fileList=e.photoArr,this.previewImage=e.photo,this.visible=!0},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},showCmd:function(){var e=this.form.getFieldsValue();if(void 0!=e.name){var t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(e.name,t)}else this.$message.error(\"请先输入人脸名称\")},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){console.log(e),this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0,console.log(\"-------previewImage\",this.previewImage)},handleChange:function(e){var t=e.fileList;if(console.log(t),t.length>0&&\"done\"==t[0].status){var a=t[0].response;console.log(a),0==a.code?(this.fileName=a.fileName,this.previewImage=a.fileName,this.$message.success(\"\".concat(a.fileName,\" 上传成功\"))):this.$message.error(a.message)}this.fileList=t},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o=e;setTimeout(function(){var t=JSON.parse(localStorage.getItem(\"user\")).orgId,r=\"男\"==a.sex?1:2;a.sex=r,Object(c[\"a\"])(Object.assign(a,{id:e.editData.id,org:t,photo:e.previewImage}),\"/faceManage/editFaceMsg\").then(function(e){0==e.code?o.$message.success(\"编辑成功\"):o.$message.error(e.message),o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",a),o.form.resetFields()})},300)}})}},\"handleCancel\",function(){this.visible=!1})},u=m,p=(a(\"f503\"),a(\"2877\")),f=Object(p[\"a\"])(u,i,n,!1,null,null,null),h=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"姓名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"name\",{rules:[{required:!0,message:\"请输入\"}]}],expression:\"[\\n          'name',\\n          {rules: [{ required: true, message: '请输入' }]}\\n        ]\"}],attrs:{placeholder:\"姓名\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸描述\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"Descn\",{rules:[{required:!0,message:\"请输入\"}]}],expression:\"[\\n              'Descn',\\n              {rules: [{ required:true, message: '请输入' }]}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"人脸应答内容\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"msg\",{rules:[{required:!0,message:\"请输入\"}]}],expression:\"[\\n              'msg',\\n              {rules: [{ required: true, message: '请输入' }]}\\n              ]\"}],attrs:{row:\"2\"}})],1),a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\"],expression:\"['cmd']\"}],attrs:{placeholder:\"选择命令集\",optionFilterProp:\"children\"}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:e.showCmd}},[e._v(\"找不到合适的?点击配置命令集\")])],1),a(\"a-form-item\",{attrs:{label:\"年龄\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"age\",{rules:[{message:\"请输入\"}]}],expression:\"[\\n          'age',\\n          {rules: [{ message: '请输入' }]}\\n        ]\"}],attrs:{placeholder:\"年龄\"}})],1),a(\"a-form-item\",{attrs:{label:\"性别\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"sex\",{rules:[{message:\"请选择\"}]}],expression:\"[\\n            'sex',\\n            {rules: [{ message: '请选择' }]}\\n          ]\"}],attrs:{placeholder:\"选择性别\",optionFilterProp:\"children\"}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"男\")]),a(\"a-select-option\",{attrs:{value:\"2\"}},[e._v(\"女\")])],1)],1),a(\"a-form-item\",{attrs:{label:\"上传\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-upload\",{attrs:{action:\"http://47.105.129.17:54321/faceManage/faceUpload\",listType:\"picture-card\",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a(\"div\",[a(\"a-icon\",{attrs:{type:\"plus\"}}),a(\"div\",{staticClass:\"ant-upload-text\"},[e._v(\"Upload\")])],1):e._e()]),a(\"a-modal\",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a(\"img\",{staticStyle:{width:\"100%\"},attrs:{alt:\"example\",src:e.previewImage}})])],1)],1),a(\"cmd-list\",{ref:\"cmd\"})],1)},b=[],v={components:{CmdList:d[\"a\"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),previewVisible:!1,previewImage:\"\",fileList:[],fileName:\"\",cmdList:[],photo:\"\",faceName:\"\",mapId:\"\",mapList:[],cmd:\"\"}},created:function(){this.getCmd(),this.getMap()},methods:Object(l[\"a\"])({add:function(){this.visible=!0},showCmd:function(){var e=this.form.getFieldsValue();if(void 0!=e.name){var t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(e.name,t)}else this.$message.error(\"请先输入人脸名称\")},getCmdId:function(e){this.cmd=e},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){console.log(e),this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=e.fileList;if(t.length>0&&\"done\"==t[0].status){var a=t[0].response;console.log(a),0==a.code?(this.fileName=a.fileName,this.$message.success(\"\".concat(a.fileName,\" 上传成功\"))):this.$message.error(a.message)}this.fileList=t},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o=e;if(\"\"==e.fileName)return void e.$message.error(\"请上传人脸图片\");setTimeout(function(){var t=JSON.parse(localStorage.getItem(\"user\")).orgId;a.cmd=\"\"==e.cmd?a.cmd:e.cmd,Object(c[\"a\"])(Object.assign(a,{org:t,photo:e.fileName}),\"/faceManage/addFaceMsg\").then(function(e){0==e.code?o.$message.success(\"新建成功\"):o.$message.error(e.message),o.fileList=[],o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",a),o.form.resetFields()})},300)}})}},\"handleCancel\",function(){this.visible=!1})},w=v,C=(a(\"83f9\"),Object(p[\"a\"])(w,g,b,!1,null,null,null)),I=C.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"配置机器人\",width:800,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{rules:[{required:!0,message:\"请选择\"}]}],expression:\"[\\n            'cmd',\\n            {rules: [{ required:true, message: '请选择' }]}\\n          ]\"}],attrs:{placeholder:\"选择命令集\",optionFilterProp:\"children\"}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:e.showCmd}},[e._v(\"找不到合适的?点击配置命令集\")])],1)],1),a(\"p\",[e._v(\"选择机器人：\")]),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,o,r){return a(\"span\",{},[e._v(\"\\n        \"+e._s(r+1)+\"\\n      \")])}}])}),a(\"cmd-list\",{ref:\"cmd\"})],1)},x=[],y={name:\"TableList\",components:{STable:s[\"e\"],CmdList:d[\"a\"]},data:function(){var e=this;return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,cmdList:[],mapId:\"\",mapList:[],cmd:\"\",faceId:\"\",faceName:\"\",form:this.$form.createForm(this),selectedItems:[],selectedRowKeys:[],selectedRows:[],options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},optionAlertShow:!1,columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"编码\",dataIndex:\"code\",scopedSlots:{customRender:\"code\"}}],loadData:function(e){var t=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(c[\"b\"])(Object.assign(e,{orgId:t}),\"/robotInfo/loadRobotListByOrg\").then(function(e){return console.log(e),e.result})}}},created:function(){this.getCmd(),this.getMap()},methods:{show:function(e){this.faceId=e.id,this.faceName=e.name,this.visible=!0},getCmdId:function(e){this.cmd=e},showCmd:function(){var e=this.form.getFieldsValue(),t=void 0==e.mapId?0:e.mapId;this.$refs.cmd.show(this.faceName,t)},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(!t){console.log(a.cmd),console.log(e.selectedRowKeys);var o={faceId:e.faceId,cmd:a.cmd,robotCode:e.selectedRowKeys},r=e;Object(c[\"b\"])(o,\"/faceManage/addRobotFace\").then(function(e){console.log(e),0==e.code?(r.$message.success(\"配置成功\"),r.visible=!1,r.$emit(\"ok\",a)):r.$message.error(e.message)})}})},tableOption:function(){var e=this;this.optionAlertShow?(this.options={alert:!1,rowSelection:null},this.optionAlertShow=!1):(this.options={alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:function(e){return{props:{disabled:\"No 2\"===e.no,name:e.no}}}}},this.optionAlertShow=!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},O=y,S=(a(\"dcdd\"),Object(p[\"a\"])(O,L,x,!1,null,null,null)),_=S.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑机器人命令集\",width:600,destroyOnClose:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"}},e._l(e.mapList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.mapName)+\"\\n          \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"命令集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"cmd\",{rules:[{required:!0,message:\"请选择\"}],initialValue:e.editData.cmd}],expression:\"[\\n            'cmd',\\n            {rules: [{ required: true,message: '请选择' }],\\n            initialValue: editData.cmd}\\n          ]\"}],attrs:{showSearch:\"\",placeholder:\"选择命令集\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.cmdList,function(t,o){return a(\"a-select-option\",{key:o,attrs:{value:t.id}},[e._v(\"\\n            \"+e._s(t.name)+\"\\n          \")])}),1),a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.$refs.cmd.show()}}},[e._v(\"找不到合适的?点击配置命令集\")])],1)],1)],1)},$=[],N={name:\"TableList\",components:{STable:s[\"e\"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,cmdList:[],editData:[],cmd:\"\",form:this.$form.createForm(this),showIframe:!1,mapList:[]}},created:function(){this.getCmd(),this.getMap()},methods:{show:function(e){this.editData=e,this.visible=!0},showCmd:function(){this.showIframe=!0},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(c[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmd:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({orgId:e},\"/cmdCollection/getCmdListByOrg\").then(function(e){console.log(e),0==e.code?t.cmdList=e.cmdList:t.$message.error(e.message)})},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var o=e;setTimeout(function(){var t={id:e.editData.id,cmd:a.cmd};Object(c[\"a\"])(t,\"/faceManage/editRobotFace\").then(function(t){0==t.code?(o.$message.success(\"修改成功\"),o.form.resetFields(),e.visible=!1,e.confirmLoading=!1,e.$emit(\"ok\",a)):o.$message.error(t.message)})},300)}})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},M=N,R=(a(\"d2a3\"),Object(p[\"a\"])(M,k,$,!1,null,null,null)),D=R.exports,F={name:\"TableList\",components:{STable:s[\"e\"],EditModal:h,CreateModal:I,RobotCmd:_,EditRobot:D},data:function(){var e=this;return{roleId:0,roleName:\"\",mdl:{},queryParam:{name:\"\"},columns:[{title:\"id\",dataIndex:\"id\"},{title:\"人脸名称\",dataIndex:\"name\"},{title:\"图片\",dataIndex:\"photo\"},{title:\"创建时间\",dataIndex:\"actionDate\"},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var a=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(c[\"b\"])(Object.assign(t,e.queryParam,{org:a}),\"/faceManage/queryFaceMsg\").then(function(e){return e.result})}}},methods:{handleEdit:function(e){this.$refs.editModal.edit(e)},UpdateRobotCmd:function(){this.$message.error(\"修改\")},DelRobotCmd:function(e){console.log(e);var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.robotCode,\" 的命令集吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,o){setTimeout(Math.random()>.5?a:o,300);var r={id:[e.id]};Object(c[\"b\"])(r,\"/faceManage/delRobotFace\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})},handleRobotCmd:function(e){this.$refs.robotCmd.show(e)},handleOk:function(){this.$refs.table.refresh(!0)},handleReset:function(){this.queryParam.name=\"\",this.$refs.table.refresh()},handleDel:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,o){setTimeout(Math.random()>.5?a:o,300);var r={id:[{id:e.id,photo:e.photo}]};Object(c[\"b\"])(r,\"/faceManage/delFaceMsg\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},j=F,V=Object(p[\"a\"])(j,o,r,!1,null,null,null);t[\"default\"]=V.exports},\"6eb1\":function(e,t,a){},\"83f9\":function(e,t,a){\"use strict\";var o=a(\"dbe6\"),r=a.n(o);r.a},\"8d42\":function(e,t,a){},b459:function(e,t,a){},c91a:function(e,t,a){},d2a3:function(e,t,a){\"use strict\";var o=a(\"b459\"),r=a.n(o);r.a},dbe6:function(e,t,a){},dcdd:function(e,t,a){\"use strict\";var o=a(\"c91a\"),r=a.n(o);r.a},f503:function(e,t,a){\"use strict\";var o=a(\"8d42\"),r=a.n(o);r.a}}]);","extractedComments":[]}