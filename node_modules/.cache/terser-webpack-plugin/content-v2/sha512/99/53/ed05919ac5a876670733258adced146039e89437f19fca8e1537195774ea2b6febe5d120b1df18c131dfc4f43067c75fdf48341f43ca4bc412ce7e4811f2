{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3fc204d4\"],{2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return o}),a.d(t,\"a\",function(){return s});var r=a(\"b775\");function o(e,t){return console.log(\"请求参数:\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}function s(e,t){return console.log(\"新增/编辑 数据\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}},\"6a53\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:5,sm:24}},[a(\"a-form-item\",{attrs:{label:\"用户姓名\"}},[a(\"a-input\",{model:{value:e.queryParam.userName,callback:function(t){e.$set(e.queryParam,\"userName\",t)},expression:\"queryParam.userName\"}})],1)],1),a(\"a-col\",{attrs:{md:5,sm:24}},[a(\"a-form-item\",{attrs:{label:\"单位名称\"}},[a(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择单位名称\",optionFilterProp:\"children\",filterOption:e.filterOption},model:{value:e.queryParam.queryOrgId,callback:function(t){e.$set(e.queryParam,\"queryOrgId\",t)},expression:\"queryParam.queryOrgId \"}},e._l(e.orgNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n              \"+e._s(t.name)+\"\\n            \")])}),1)],1)],1),a(\"a-col\",{attrs:{md:5,sm:24}},[a(\"span\",{staticClass:\"table-page-search-submitButtons\"},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"10px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")]),a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v(\"新建\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"dashed\"},on:{click:e.tableOption}},[e._v(e._s(e.optionAlertShow?\"关闭\":\"开启\")+\" alert\")]),e.selectedRowKeys.length>0?a(\"a-dropdown\",[a(\"a-menu\",{attrs:{slot:\"overlay\"},slot:\"overlay\"},[a(\"a-menu-item\",{key:\"1\",on:{click:function(t){return e.deleteUsers()}}},[a(\"a-icon\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"delete\"}}),e._v(\"删除\\n              \")],1)],1),a(\"a-button\",{staticStyle:{\"margin-left\":\"10px\"}},[e._v(\"\\n                批量操作 \"),a(\"a-icon\",{attrs:{type:\"down\"}})],1)],1):e._e()],1)])],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,o){return a(\"span\",{},[e._v(\"\\n        \"+e._s(o+1)+\"\\n      \")])}},{key:\"roleNames\",fn:function(t){return a(\"span\",{},[a(\"a-tag\",{attrs:{color:\"blue\"}},[e._v(e._s(t))])],1)}},{key:\"isDel\",fn:function(t){return a(\"span\",{},[a(\"a-badge\",{attrs:{status:e._f(\"statusTypeFilter\")(t),text:e._f(\"statusFilter\")(t)}})],1)}},{key:\"action\",fn:function(t,r){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(r)}}},[e._v(\"编辑\")]),a(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDeleteUser(r)}}},[e._v(\"删除\")]),a(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:resetPwd\",arg:\"resetPwd\"}],attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:resetPwd\",arg:\"resetPwd\"}],on:{click:function(t){return e.handleResetPwd(r)}}},[e._v(\"密码重置\")])]],2)}}])}),a(\"create-modal\",{ref:\"createModal\",on:{ok:e.handleAddSubmit}}),a(\"edit-modal\",{ref:\"editModal\",on:{ok:e.handleAddSubmit}})],1)},o=[],s=a(\"2af9\"),n=a(\"680a\"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑\",width:600},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"登录名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"loginName\",{rules:[{required:!0,message:\"请输入登录名\"}],initialValue:e.editData.loginName}],expression:\"[\\n          'loginName',\\n          {\\n            rules: [{ required: true, message: '请输入登录名' }],\\n            initialValue: editData.loginName,\\n          }]\"}],attrs:{placeholder:\"登录名\"}})],1),a(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"org\",{rules:[{required:!0,message:\"请选择\"}],initialValue:e.editData.orgName}],expression:\"[\\n          'org',\\n          {rules: [{ required: true, message: '请选择' }],\\n          initialValue: editData.orgName}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.orgNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"角色名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"role\",{rules:[{required:!0,message:\"请选择\"}],initialValue:e.editData.roleNames}],expression:\"[\\n          'role',\\n          {rules: [{ required: true, message: '请选择' }],\\n          initialValue: editData.roleNames}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择角色名称\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.roleNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"用户姓名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"userName\",{rules:[{required:!0,message:\"请输入用户名\"}],initialValue:e.editData.userName}],expression:\"[\\n          'userName',\\n          {rules: [{ required: true, message: '请输入用户名' }],\\n          initialValue: editData.userName}\\n        ]\"}],attrs:{placeholder:\"用户名\"}})],1),a(\"a-form-item\",{attrs:{label:\"手机号\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mobile\",{rules:[{message:\"请输入手机号\"}],initialValue:e.editData.mobile}],expression:\"[\\n          'mobile',\\n          {rules: [{ message: '请输入手机号' }],\\n          initialValue: editData.mobile}\\n        ]\"}],attrs:{placeholder:\"手机号\"}})],1),a(\"a-form-item\",{attrs:{label:\"是否生效\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"isDel\",{rules:[{required:!0,message:\"请选择\"}],initialValue:1==e.editData.isDel?\"有效\":\"无效\"}],expression:\"[\\n          'isDel',\\n          {rules: [{ required: true, message: '请选择' }],\\n          initialValue: ( editData.isDel == 1 ) ? '有效' : '无效'}\\n        ]\"}],on:{change:e.handleChange}},[a(\"a-select-option\",{attrs:{value:\"1\"}},[e._v(\"生效\")]),a(\"a-select-option\",{attrs:{value:\"0\"}},[e._v(\"无效\")])],1)],1)],1)],1)},i=[],c=(a(\"c5f6\"),a(\"7cdf\"),a(\"2934\")),u={data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),orgNames:[],roleNames:[],editData:{},org:0,role:0,isDel:0}},created:function(){this.handleRoleList(),this.handleOrgList()},methods:{handleRoleList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).roleId;Object(c[\"b\"])({role:t},\"/userManage/getAllSysRole\").then(function(t){console.log(t),e.roleNames=t.result,0!==t.code&&e.$message.error(t.message)})},handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t={org:e},a=this;Object(c[\"b\"])(t,\"/userManage/getHrOrgByPid\").then(function(e){console.log(e),a.orgNames=e.result,0!==e.code&&a.$message.error(e.message)})},add:function(e){console.log(e),this.form.resetFields(),this.org=e.org,this.role=e.role,this.isDel=e.isDel,this.visible=!0,this.editData=e},handleChange:function(e){this.isDel=e},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{a.role=Number.isInteger(a.role)?a.role:e.role,a.org=Number.isInteger(a.org)?a.org:e.org,a.isDel=Number.isInteger(a.isDel)?a.isDel:e.isDel;var r=Object.assign(a,{id:e.editData.id}),o=e;setTimeout(function(){Object(c[\"a\"])(r,\"/userManage/editUserMsg\").then(function(t){0==t.code?(o.$message.success(\"修改成功\"),o.form.resetFields(),e.visible=!1,e.confirmLoading=!1,e.$emit(\"ok\",a)):o.$message.error(t.message)})},300)}})},handleCancel:function(){this.visible=!1},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},d=u,m=a(\"2877\"),g=Object(m[\"a\"])(d,l,i,!1,null,null,null),p=g.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:600},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"登录名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"loginName\",{rules:[{required:!0,message:\"请输入登录名\"}]}],expression:\"[\\n          'loginName',\\n          {rules: [{ required: true, message: '请输入登录名' }]}\\n        ]\"}],attrs:{placeholder:\"登录名\"}})],1),a(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"org\",{rules:[{required:!0,message:\"请选择\"}]}],expression:\"[\\n          'org',\\n          {rules: [{ required: true, message: '请选择' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.orgNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"角色名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"role\",{rules:[{required:!0,message:\"请选择\"}]}],expression:\"[\\n          'role',\\n          {rules: [{ required: true, message: '请选择' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择角色名称\",optionFilterProp:\"children\",filterOption:e.filterOption}},e._l(e.roleNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),a(\"a-form-item\",{attrs:{label:\"用户姓名\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"userName\",{rules:[{required:!0,message:\"请输入用户名\"}]}],expression:\"[\\n          'userName',\\n          {rules: [{ required: true, message: '请输入用户名' }]}\\n        ]\"}],attrs:{placeholder:\"用户名\"}})],1),a(\"a-form-item\",{attrs:{label:\"手机号\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mobile\",{rules:[{message:\"请输入手机号\"}]}],expression:\"[\\n          'mobile',\\n          {rules: [{ message: '请输入手机号' }]}\\n        ]\"}],attrs:{placeholder:\"手机号\"}})],1)],1)],1)},h=[],b=(a(\"6b54\"),{data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),orgNames:[],roleNames:[]}},created:function(){this.handleRoleList(),this.handleOrgList()},methods:{handleRoleList:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).roleId;Object(c[\"b\"])({role:t},\"/userManage/getAllSysRole\").then(function(t){console.log(\"角色列表\",t),e.roleNames=t.result,0!==t.code&&e.$message.error(t.message)})},handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t={org:e},a=this;Object(c[\"b\"])(t,\"/userManage/getHrOrgByPid\").then(function(e){a.orgNames=e.result,0!==e.code&&a.$message.error(e.message)})},add:function(){this.visible=!0},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(a.mobile&&11!==parseInt(a.mobile).toString().length)return e.$message.error(\"请输入正确的手机号\"),!1;if(t)e.confirmLoading=!1;else{console.log(\"values\",a);var r=e;setTimeout(function(){Object(c[\"a\"])(a,\"/userManage/addUserMsg\").then(function(t){0==t.code?(r.$message.success(\"新建成功\"),r.form.resetFields(),e.visible=!1,e.confirmLoading=!1,e.$emit(\"ok\",a)):r.$message.error(t.message)})},300)}})},handleCancel:function(){this.visible=!1},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}}),v=b,w=Object(m[\"a\"])(v,f,h,!1,null,null,null),N=w.exports,C={0:{status:\"default\",text:\"无效\"},1:{status:\"processing\",text:\"有效\"}},O={name:\"TableList\",components:{STable:s[\"e\"],PageView:n[\"c\"],EditModal:p,CreateModal:N},data:function(){var e=this;return{advanced:!1,selectedItems:[],queryParam:{queryOrgId:\"\",userName:\"\"},editData:{},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"登录名\",dataIndex:\"loginName\",scopedSlots:{customRender:\"loginName\"}},{title:\"单位名称\",dataIndex:\"orgName\",scopedSlots:{customRender:\"orgName\"}},{title:\"角色名称\",dataIndex:\"roleNames\",scopedSlots:{customRender:\"roleNames\"}},{title:\"用户姓名\",dataIndex:\"userName\",scopedSlots:{customRender:\"userName\"}},{title:\"手机号\",dataIndex:\"mobile\",scopedSlots:{customRender:\"mobile\"}},{title:\"是否生效\",dataIndex:\"isDel\",scopedSlots:{customRender:\"isDel\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){console.log(\"user 请求\",t);var a=JSON.parse(localStorage.getItem(\"user\")).orgId,r={orgId:a};return Object(c[\"b\"])(Object.assign(t,e.queryParam,r),\"/userManage/queryUserMsg\").then(function(e){return console.log(e),e.result})},orgNames:[],roleNames:[],selectedRowKeys:[],selectedRows:[],options:{alert:!1,rowSelection:null},optionAlertShow:!1}},created:function(){this.handleOrgList(),this.handleRoleList()},computed:{title:function(){return this.$route.meta.title}},filters:{statusFilter:function(e){return C[e].text},statusTypeFilter:function(e){return C[e].status}},methods:{handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t=this;Object(c[\"b\"])({org:e},\"/userManage/getHrOrgByPid\").then(function(e){console.log(e),t.orgNames=e.result,0!==e.code&&t.$message.error(e.message)})},tableOption:function(){var e=this;this.optionAlertShow?(this.options={alert:!1,rowSelection:null},this.optionAlertShow=!1):(this.options={alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:function(e){return{props:{disabled:\"No 2\"===e.no,name:e.no}}}}},this.optionAlertShow=!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleRoleList:function(){console.log(\"获取角色\");var e=this,t=JSON.parse(localStorage.getItem(\"user\")).roleId;Object(c[\"b\"])({role:t},\"/userManage/getAllSysRole\").then(function(t){e.roleNames=t})},handleAddSubmit:function(){this.$refs.table.refresh(!0)},handleResetPwd:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要重置 \".concat(e.loginName,\"的密码吗?\"),okText:\"重置\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,r){setTimeout(Math.random()>.5?a:r,1e3);var o={id:e.id};Object(c[\"b\"])(o,\"/userManage/revertPassword\").then(function(e){0==e.code&&t.$message.success(\"密码重置成功\")}).catch(function(){return t.$message.error(res.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})},resetQuery:function(){this.queryParam={queryOrgId:\"\",userName:\"\"},this.$refs.table.refresh(!0)},handleAddVisible:function(){this.addVisible=!0},handleEditVisible:function(e){this.editData=e,this.$refs.editModal.add(e)},handleChangeOption:function(e){console.log(\"select \".concat(e))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},searchData:function(){this.$refs.table.refresh(!0)},handleDeleteUser:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.loginName,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,r){setTimeout(Math.random()>.5?a:r,500);var o={id:[e.id]};Object(c[\"b\"])(o,\"/userManage/delUserMsg\").then(function(e){console.log(\"删除用户返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh()):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})},deleteUsers:function(){console.log(this.selectedRowKeys);var e=this;this.$confirm({title:\"警告\",content:\"真的要删除吗?\",okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return new Promise(function(t,a){setTimeout(Math.random()>.5?t:a,500);var r={id:e.selectedRowKeys};Object(c[\"b\"])(r,\"/userManage/delUserMsg\").then(function(t){0==t.code?(e.$message.success(\"删除成功\"),e.selectedRowKeys=[],e.$refs.table.refresh(!0)):e.$message.error(t.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},y=O,S=(a(\"abf5\"),Object(m[\"a\"])(y,r,o,!1,null,\"67fa10e4\",null));t[\"default\"]=S.exports},\"8dbc\":function(e,t,a){},abf5:function(e,t,a){\"use strict\";var r=a(\"8dbc\"),o=a.n(r);o.a}}]);","extractedComments":[]}