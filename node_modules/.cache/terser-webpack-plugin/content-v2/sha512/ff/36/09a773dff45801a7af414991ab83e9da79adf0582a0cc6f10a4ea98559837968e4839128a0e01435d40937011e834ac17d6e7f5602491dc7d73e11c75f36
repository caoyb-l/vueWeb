{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-d9366bc2\"],{\"19ba\":function(e,t,a){},2934:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return n}),a.d(t,\"a\",function(){return o});var r=a(\"b775\");function n(e,t){return console.log(\"请求参数:\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}function o(e,t){return console.log(\"新增/编辑 数据\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}},5740:function(e,t,a){\"use strict\";var r=a(\"19ba\"),n=a.n(r);n.a},e151:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:4,sm:24}},[a(\"a-form-item\",{attrs:{label:\"地图名称\"}},[a(\"a-input\",{model:{value:e.queryParam.mapName,callback:function(t){e.$set(e.queryParam,\"mapName\",t)},expression:\"queryParam.mapName\"}})],1)],1),a(\"a-col\",{attrs:{md:4,sm:24}},[a(\"a-form-item\",{attrs:{label:\"机器人名称\"}},[a(\"a-input\",{model:{value:e.queryParam.robotName,callback:function(t){e.$set(e.queryParam,\"robotName\",t)},expression:\"queryParam.robotName\"}})],1)],1),a(\"a-col\",{attrs:{md:5,sm:24}},[a(\"a-form-item\",{attrs:{label:\"所属单位\"}},[a(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption},model:{value:e.queryParam.queryOrgId,callback:function(t){e.$set(e.queryParam,\"queryOrgId\",t)},expression:\"queryParam.queryOrgId\"}},e._l(e.orgNames,function(t,r){return a(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n                \"+e._s(t.name)+\"\\n              \")])}),1)],1)],1),a(\"a-col\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{md:4,sm:24}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")])],1)],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,showPagination:\"auto\"},scopedSlots:e._u([{key:\"action\",fn:function(t,r){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(r)}}},[e._v(\"编辑\")]),a(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],attrs:{type:\"vertical\"}}),a(\"a\",{on:{click:function(t){return e.handleShowMap(r)}}},[e._v(\"查看记录点\")])]],2)}}])}),a(\"edit-map\",{ref:\"editModal\",on:{ok:e.handleOk}}),a(\"show-map\",{ref:\"showMap\",on:{ok:e.handleOk}})],1)},n=[],o=a(\"2af9\"),s=a(\"680a\"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"地图记录点\",width:1e3},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-form-item\",{attrs:{label:\"记录点名称\"}},[a(\"a-input\",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),a(\"a-col\",{attrs:{md:8,sm:24}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")])],1)],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"no\",columns:e.columns,data:e.loadData,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,n){return a(\"span\",{},[e._v(\"\\n          \"+e._s(n+1)+\"\\n        \")])}},{key:\"action\",fn:function(t,r){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.deleteMapPoint(r)}}},[e._v(\"删除\")])]],2)}}])})],1)],1)},l=[],c=(a(\"7f7f\"),a(\"2934\")),u={components:{STable:o[\"f\"]},data:function(){var e=this;return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},columns:[{title:\"序号\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"记录点名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"角度\",dataIndex:\"angle\"},{title:\"X坐标\",dataIndex:\"gridX\"},{title:\"Y坐标\",dataIndex:\"gridY\"},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],queryParam:{name:\"\"},mapId:0,visible:!1,confirmLoading:!1,form:this.$form.createForm(this),loadData:function(t){var a=Object.assign(t,{mapId:e.mapId},e.queryParam);return Object(c[\"b\"])(a,\"/mapGsPoint/getMapGsPointPage\").then(function(e){return console.log(e),e.result})}}},methods:{add:function(e){this.mapId=e.id,this.visible=!0,this.$refs.table.refresh(!0)},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},searchData:function(){this.$refs.table.refresh()},handleSubmit:function(){this.visible=!1},deleteMapPoint:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,r){setTimeout(Math.random()>.5?a:r,1e3);var n={entityId:e.id};Object(c[\"b\"])(n,\"/mapGsPoint/delete\").then(function(e){0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},d=u,m=a(\"2877\"),f=Object(m[\"a\"])(d,i,l,!1,null,null,null),p=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"编辑\",width:600},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"地图名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapName\",{rules:[{required:!0,message:\"请输入地图名称\"}],initialValue:e.editData.mapName}],expression:\"[\\n          'mapName',\\n          {rules: [{ required: true, message: '请输入地图名称' }],\\n          initialValue: editData.mapName,}\\n        ]\"}],attrs:{placeholder:\"地图名称\"}})],1)],1)],1)},h=[],g={data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),editData:{}}},methods:{add:function(e){this.form.resetFields(),this.visible=!0,this.editData=e},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(t)e.confirmLoading=!1;else{var r=e;setTimeout(function(){var t=Object.assign(a,{entityId:e.editData.id});Object(c[\"a\"])(t,\"/robotMapLib/save\").then(function(e){0==e.code?r.$message.success(\"编辑成功\"):r.$message.error(e.message),r.visible=!1,r.confirmLoading=!1,r.$emit(\"ok\",a),r.form.resetFields()})},300)}})},handleCancel:function(){this.visible=!1}}},v=g,y=Object(m[\"a\"])(v,b,h,!1,null,null,null),w=y.exports,x={name:\"TableList\",components:{STable:o[\"f\"],PageView:s[\"c\"],ShowMap:p,EditMap:w},data:function(){var e=this;return{advanced:!1,queryParam:{robotName:\"\",mapName:\"\",queryOrgId:\"\"},columns:[{title:\"地图编码\",dataIndex:\"id\",scopedSlots:{customRender:\"id\"}},{title:\"地图名称\",dataIndex:\"mapName\",scopedSlots:{customRender:\"mapName\"}},{title:\"上传时间\",dataIndex:\"updateDate\",scopedSlots:{customRender:\"updateDate\"}},{title:\"上传机器人\",dataIndex:\"robotName\",scopedSlots:{customRender:\"robotName\"}},{title:\"所属单位\",dataIndex:\"orgName\",scopedSlots:{customRender:\"orgName\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var a=JSON.parse(localStorage.getItem(\"user\")).id,r=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(c[\"b\"])(Object.assign(t,e.queryParam,{userId:a,orgId:r}),\"/robotMapLib/list\").then(function(e){return console.log(e),e.result})},orgNames:[]}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.handleOrgLists()},methods:{handleOrgLists:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,a={org:t};Object(c[\"b\"])(a,\"/userManage/getHrOrgByPid\").then(function(t){e.orgNames=t.result,0!==t.code&&e.$message.error(t.message)}).catch(function(e){return console.log(e)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},searchData:function(){this.$refs.table.refresh(!0)},handleOk:function(){this.$refs.table.refresh(!0)},handleEditVisible:function(e){this.$refs.editModal.add(e)},handleShowMap:function(e){this.$refs.showMap.add(e)}}},O=x,S=(a(\"5740\"),Object(m[\"a\"])(O,r,n,!1,null,\"dd44ca86\",null));t[\"default\"]=S.exports}}]);","extractedComments":[]}