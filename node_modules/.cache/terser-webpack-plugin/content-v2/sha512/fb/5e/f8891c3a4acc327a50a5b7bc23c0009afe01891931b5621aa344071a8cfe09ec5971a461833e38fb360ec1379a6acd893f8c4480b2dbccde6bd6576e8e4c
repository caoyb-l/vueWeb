{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-1b41c098\"],{1862:function(e,t,a){\"use strict\";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"10px\"},attrs:{title:\"动作集制作\",width:\"68%\",footer:null,destroyOnClose:!0,maskClosable:!1,keyboard:!1},on:{cancel:e.handleSubmit},model:{value:e.showIframe,callback:function(t){e.showIframe=t},expression:\"showIframe\"}},[a(\"iframe\",{ref:\"iframe\",staticStyle:{margin:\"-33px 0px -25px -30px\"},attrs:{src:e.cmdSrc,scrolling:\"no\",height:\"600px\",width:\"100%\",frameborder:\"0\"}})])},o=[],r=(a(\"2934\"),a(\"2af9\")),n={name:\"TableList\",components:{STable:r[\"f\"]},data:function(){return{returnCmd:\"\",form:this.$form.createForm(this),showIframe:!1,cmdSrc:\"http://robot.lovechuangchuang.com:8084/robot.html\"}},mounted:function(){var e=this;window.addEventListener(\"message\",function(t){e.returnCmd=t.data})},methods:{show:function(e,t,a){var i=JSON.parse(localStorage.getItem(\"user\")),o=\"?orgId=\"+i.orgId+\"&createBy=\"+i.id+\"&circulation=1&mapId=\"+t+\"&title=\"+e+\"&cmd=\"+a;this.cmdSrc=this.cmdSrc+encodeURI(o),console.log(this.cmdSrc),this.showIframe=!0},handleSubmit:function(){\"\"!=this.returnCmd&&this.$emit(\"getCmdId\",this.returnCmd),this.showIframe=!1}}},s=n,l=a(\"2877\"),c=Object(l[\"a\"])(s,i,o,!1,null,null,null);t[\"a\"]=c.exports},\"222d\":function(e,t,a){\"use strict\";var i=a(\"a485\"),o=a.n(i);o.a},a485:function(e,t,a){},c44b:function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-card\",{attrs:{bordered:!1}},[a(\"div\",{staticClass:\"table-page-search-wrapper\"},[a(\"a-form\",{attrs:{layout:\"inline\"}},[a(\"a-row\",{attrs:{gutter:48}},[a(\"a-col\",{attrs:{md:6,sm:1}},[a(\"a-form-item\",{attrs:{label:\"动作名称\"}},[a(\"a-input\",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),a(\"a-col\",{attrs:{md:6,sm:1}},[a(\"a-form-item\",{attrs:{label:\"所属地图\"}},[a(\"a-select\",{attrs:{size:\"small\",showSearch:\"\",placeholder:\"选择所属地图\",optionFilterProp:\"children\",filterOption:e.filterOption},model:{value:e.queryParam.mapId,callback:function(t){e.$set(e.queryParam,\"mapId\",t)},expression:\"queryParam.mapId\"}},e._l(e.mapList,function(t,i){return a(\"a-select-option\",{key:i,attrs:{value:t.id}},[e._v(\"\\n                \"+e._s(t.mapName)+\"\\n              \")])}),1)],1)],1),a(\"a-col\",{attrs:{md:9,sm:24}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),a(\"a-button\",{staticStyle:{\"margin-left\":\"10px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置列表\")]),a(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.CreateCmdColl.add()}}},[e._v(\"新建\")])],1)],1)],1)],1),a(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.cmdpage.alert,rowSelection:e.cmdpage.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,i,o){return a(\"span\",{},[e._v(\"\\n        \"+e._s(o+1)+\"\\n      \")])}},{key:\"action\",fn:function(t,i){return a(\"span\",{},[[a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(i)}}},[e._v(\"编辑\"),a(\"a-icon\",{attrs:{type:\"edit\"}})],1),a(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"vertical\"}}),a(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDelete(i)}}},[e._v(\"删除\")]),a(\"a-divider\",{attrs:{type:\"vertical\"}})]],2)}}])}),a(\"edit-cmdColl\",{ref:\"EditCmdColl\",on:{ok:e.handleAddSubmit}}),a(\"create-cmd-coll\",{ref:\"CreateCmdColl\",on:{ok:e.handleAddSubmit}})],1)},o=[],r=(a(\"7f7f\"),a(\"2af9\")),n=a(\"680a\"),s=a(\"1862\"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticStyle:{top:\"20px\"},attrs:{title:\"编辑\",width:600,destroyOnClose:!0,maskClosable:!1},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"动作集名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"title\",{rules:[{required:!0,message:\"请输入\"}],initialValue:e.editData.name}],expression:\"[\\n      'title',\\n      {rules: [{ required: true,message: '请输入' }],\\n      initialValue: editData.name,}\\n      ]\"}]})],1),a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\",{initialValue:e.editData.mapId}],expression:\"['mapId',{initialValue: editData.mapId}]\"}],attrs:{showSearch:\"\",placeholder:\"如需使用导航请先选择地图\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeMap(t)}}},e._l(e.mapList,function(t,i){return a(\"a-select-option\",{key:i,attrs:{value:t.id}},[e._v(e._s(t.mapName))])}),1)],1),a(\"a-form-item\",{attrs:{label:\"动作集\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:e.showCmd}},[e._v(\"编辑动作集\")])],1),a(\"a-form-item\",{attrs:{label:\"循环次数\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"circulation\",{rules:[{required:!0,message:\"请输入次数\"}],initialValue:e.editData.circulation}],expression:\"[\\n      'circulation',\\n      {rules: [{ required: true, message: '请输入次数' }],\\n      initialValue: editData.circulation}\\n      ]\"}],attrs:{placeholder:\"请输入\"}})],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},c=[],d=a(\"2934\"),m={components:{CmdList:s[\"a\"]},data:function(){return{headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},cmdList:[],visible:!1,form:this.$form.createForm(this),editData:{},mapList:[]}},created:function(){this.getMap()},methods:{changeMap:function(e){this.editData.mapId=e},add:function(e){console.log(e),this.visible=!0,this.editData=e,this.entityId=e.id},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(d[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},getCmdId:function(e){this.editData.cmd=parseInt(e),console.log(\"getCmdId_____________+\",e,this.editData.cmd)},showCmd:function(){var e=void 0==this.editData.mapId?0:this.editData.mapId;console.log(e);var t=void 0==this.editData.id?0:this.editData.id;this.$refs.cmd.show(this.editData.name,e,t)},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t(function(t,a){if(!t){var i=e,o=JSON.parse(localStorage.getItem(\"user\")),r=o.orgId,n=o.id,s=e.editData.mapId,l=e.editData.title,c=e.editData.circulation,m={orgId:r,createBy:n,entityId:e.editData.id,mapId:s,title:l,circulation:c};console.info(m),console.log(a),Object(d[\"b\"])(Object.assign(m,a),\"/cmdCollection/saveOrUpdate\").then(function(t){console.log(t),0==t.code?(e.$message.success(\"编辑成功\"),i.visible=!1,i.$emit(\"ok\",a)):i.$message.error(t.message)})}})}}},u=m,p=a(\"2877\"),h=Object(p[\"a\"])(u,l,c,!1,null,null,null),f=h.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-modal\",{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],attrs:{title:\"选择地图\",centered:\"\",width:500,destroyOnClose:!0,maskClosable:!1},on:{ok:e.showCmd},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{attrs:{label:\"地图\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"mapId\"],expression:\"['mapId']\"}],attrs:{showSearch:\"\",placeholder:\"非必选\",optionFilterProp:\"children\"},on:{change:function(t){return e.changeMap(t)}}},e._l(e.mapList,function(t,i){return a(\"a-select-option\",{key:i,attrs:{value:t.id}},[e._v(\"\\n              \"+e._s(t.mapName)+\"\\n            \")])}),1)],1)],1),a(\"cmd-list\",{ref:\"cmd\",on:{getCmdId:e.getCmdId}})],1)},g=[],v={components:{CmdList:s[\"a\"]},data:function(){return{headers:{authorization:\"authorization-text\"},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},cmdList:[],visible:!1,form:this.$form.createForm(this),editData:{title:\"\"},mapList:[],cmd:\"\",circulation:\"\"}},created:function(){this.getMap()},methods:{changeMap:function(e){this.editData.mapId=e},add:function(){this.cmd=\"\",this.form.resetFields(),this.visible=!0},getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(d[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){e.mapList=t.result})},getCmdId:function(e){console.log(\"收到参数cmd=\"+e),this.$emit(\"ok\"),this.visible=!1},showCmd:function(){var e=void 0==this.editData.mapId?0:this.editData.mapId;this.$refs.cmd.show(\"\",e,0)}}},C=v,I=Object(p[\"a\"])(C,b,g,!1,null,null,null),w=I.exports,y={name:\"TableList\",components:{CreateCmdColl:w,STable:r[\"f\"],PageView:n[\"c\"],EditCmdColl:f,CmdList:s[\"a\"]},data:function(){var e=this;return{advanced:!1,addVisible:!1,editVisible:!1,orgId:{orgId:1},selectedItems:[],queryParam:{name:\"\",orgId:\"\"},cmdpage:{alert:!1,rowSelection:null},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"命令集ID\",dataIndex:\"id\",scopedSlots:{customRender:\"id\"}},{title:\"循环次数\",dataIndex:\"circulation\",scopedSlots:{customRender:\"circulation\"}},{title:\"操作时间\",dataIndex:\"create_date\",scopedSlots:{customRender:\"create_date\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var a=JSON.parse(localStorage.getItem(\"user\")).orgId;return Object(d[\"b\"])(Object.assign(t,e.queryParam,{orgId:a}),\"/cmdCollection/getCmdCollectionPage\").then(function(e){return console.log(e),e.result})},mapList:[],roleNames:[],selectedRowKeys:[]}},created:function(){this.getMap()},computed:{title:function(){return this.$route.meta.title}},methods:{getMap:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId;Object(d[\"b\"])({orgId:t},\"/robotMapLib/getRobotMapLibList\").then(function(t){console.log(\"-----------getMap\",t),e.mapList=t.result})},onChange:function(e,t){this.queryParam.validityDate=t,console.log(e,t)},onSelectChange:function(e){this.selectedRowKeys=e},handleAddSubmit:function(){this.$refs.table.refresh(!0)},resetQuery:function(){this.queryParam={},this.$refs.table.refresh(!0)},handleAddVisible:function(){this.addVisible=!0},handleEditVisible:function(e){console.info(e),this.$refs.EditCmdColl.add(e)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},searchData:function(){this.$refs.table.refresh(!0)},handleOk:function(){this.$refs.table.refresh(!0)},handleDelete:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(a,i){setTimeout(Math.random()>.5?a:i,500);var o={entityId:e.id};Object(d[\"b\"])(o,\"/cmdCollection/delete\").then(function(e){console.log(\"删除返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh(!0)):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},S=y,_=(a(\"222d\"),Object(p[\"a\"])(S,i,o,!1,null,\"fda112b8\",null));t[\"default\"]=_.exports}}]);","extractedComments":[]}