{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0d883f0b\"],{2934:function(e,t,o){\"use strict\";o.d(t,\"b\",function(){return n}),o.d(t,\"a\",function(){return a});var r=o(\"b775\");function n(e,t){return console.log(\"请求参数:\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}function a(e,t){return console.log(\"新增/编辑 数据\",e),Object(r[\"b\"])({url:t,method:\"post\",data:e})}},4549:function(e,t,o){},f824:function(e,t,o){\"use strict\";var r=o(\"4549\"),n=o.n(r);n.a},fa5e:function(e,t,o){\"use strict\";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-card\",{attrs:{bordered:!1}},[o(\"div\",{staticClass:\"table-page-search-wrapper\"},[o(\"a-form\",{attrs:{layout:\"inline\"}},[o(\"a-row\",{attrs:{gutter:48}},[o(\"a-col\",{attrs:{md:6,sm:24}},[o(\"a-form-item\",{attrs:{label:\"版本名称\"}},[o(\"a-input\",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,\"name\",t)},expression:\"queryParam.name\"}})],1)],1),o(\"a-col\",{attrs:{md:6,sm:24}},[o(\"a-form-item\",{attrs:{label:\"所属单位\"}},[o(\"a-select\",{attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:function(t){return e.searchData()}},model:{value:e.queryParam.orgId,callback:function(t){e.$set(e.queryParam,\"orgId\",t)},expression:\"queryParam.orgId\"}},e._l(e.orgNames,function(t,r){return o(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),o(\"a-col\",{attrs:{md:8,sm:24}},[o(\"span\",{staticClass:\"table-page-search-submitButtons\"},[o(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.searchData()}}},[e._v(\"查询\")]),o(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(t){return e.resetQuery()}}},[e._v(\"重置\")]),o(\"a-button\",{directives:[{name:\"action\",rawName:\"v-action:add\",arg:\"add\"}],staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){return e.$refs.createModal.add()}}},[e._v(\"新建\")])],1)])],1)],1)],1),o(\"s-table\",{ref:\"table\",attrs:{size:\"default\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"serial\",fn:function(t,r,n){return o(\"span\",{},[e._v(\"\\n      \"+e._s(n+1)+\"\\n    \")])}},{key:\"contents\",fn:function(t){return o(\"span\",{},[o(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"action\",fn:function(t,r){return o(\"span\",{},[[o(\"a\",{directives:[{name:\"action\",rawName:\"v-action:edit\",arg:\"edit\"}],on:{click:function(t){return e.handleEditVisible(r)}}},[e._v(\"编辑\")]),o(\"a-divider\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],attrs:{type:\"vertical\"}}),o(\"a\",{directives:[{name:\"action\",rawName:\"v-action:delete\",arg:\"delete\"}],on:{click:function(t){return e.handleDeleteUser(r)}}},[e._v(\"删除\")])]],2)}}])}),o(\"edit-form\",{ref:\"editModal\",on:{ok:e.handleRefresh}}),o(\"create-form\",{ref:\"createModal\",on:{ok:e.handleRefresh}})],1)},n=[],a=(o(\"7f7f\"),o(\"2af9\")),s=o(\"680a\"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"修改\",width:\"70%\",destroyOnClose:!0,maskClosable:!1,keyboard:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[o(\"a-form\",{attrs:{form:e.form}},[o(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-input\",{attrs:{disabled:!0,placeholder:\"单位名称\"},model:{value:e.orgName,callback:function(t){e.orgName=t},expression:\"orgName\"}})],1),o(\"a-form-item\",{attrs:{label:\"版本类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-input\",{attrs:{disabled:!0,placeholder:\"版本类型\"},model:{value:e.robotVersionType,callback:function(t){e.robotVersionType=t},expression:\"robotVersionType\"}})],1),o(\"a-form-item\",{attrs:{label:\"选择APP版本\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"contents\",fn:function(t){return o(\"span\",{},[o(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"name\",fn:function(t){return o(\"span\",{},[o(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"serial\",fn:function(t,r,n){return o(\"span\",{},[e._v(e._s(n+1))])}}])})],1)],1)],1)},l=[],c=o(\"cebc\"),d=(o(\"ac6a\"),o(\"5df3\"),o(\"4f7f\"),o(\"2934\")),u={components:{STable:a[\"f\"],Ellipsis:a[\"c\"]},data:function(){var e=this;return{orgName:\"\",robotVersionType:\"\",robotVersionTypeCode:\"\",robotVersionId:\"\",orgRobotVersionId:\"\",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"APP名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"版本描述\",dataIndex:\"contents\",scopedSlots:{customRender:\"contents\"}},{title:\"校验码\",dataIndex:\"code\"}],loadData:function(t){return Object(d[\"b\"])(Object.assign(t,{code:e.robotVersionTypeCode}),\"/RobotVersion/queryRobotVersionMsg\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),options:{alert:{show:!0},rowSelection:{type:\"radio\",onSelect:this.onSelectChange}},optionAlertShow:!1}},created:function(){},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,o){console.log(e,t),t&&(this.robotVersionId=e.id,console.log(this.robotVersionId))},add:function(e){this.visible=!0,this.form.resetFields(),this.orgName=e.orgName,this.robotVersionTypeCode=e.androidTypeId+\"|\"+e.navigateTypeId,this.robotVersionType=e.androidType+e.navigateType,this.orgRobotVersionId=e.id},handleSubmit:function(){var e=this,t=this.form.validateFields,o=this;this.confirmLoading=!0,t(function(t,r){if(t)e.confirmLoading=!1;else{var n={robotVersion:e.robotVersionId,id:e.orgRobotVersionId};Object(d[\"b\"])(Object(c[\"a\"])({},n,r),\"/OrgRobotVersion/editOrgRobotVersionMsg\").then(function(e){0==e.code?o.$message.success(\"修改成功\"):o.$message.error(e.message),o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",r),o.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},m=u,f=o(\"2877\"),p=Object(f[\"a\"])(m,i,l,!1,null,null,null),b=p.exports,h=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"a-modal\",{staticStyle:{top:\"20px\"},attrs:{title:\"新建\",width:\"70%\",destroyOnClose:!0,maskClosable:!1,keyboard:!0},on:{ok:e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:\"visible\"}},[o(\"a-form\",{attrs:{form:e.form}},[o(\"a-form-item\",{attrs:{label:\"单位名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"orgId\",{rules:[{required:!0,message:\"请选择\"}]}],expression:\"[\\n          'orgId',\\n          {rules: [{ required: true, message: '请选择' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择所属单位\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.getRobotVersionType}},e._l(e.orgNames,function(t,r){return o(\"a-select-option\",{key:r,attrs:{value:t.id}},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")])}),1)],1),o(\"a-form-item\",{attrs:{label:\"版本类型\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"code\",{rules:[{required:!0,message:\"选择版本类型\"}]}],expression:\"[\\n          'code',\\n          {rules: [{required: true, message: '选择版本类型' }]}\\n        ]\"}],attrs:{showSearch:\"\",placeholder:\"选择版本类型\",optionFilterProp:\"children\",filterOption:e.filterOption},on:{change:e.getRobotApp}},e._l(e.robotVersionType,function(t,r){return o(\"a-select-option\",{key:r,attrs:{value:t.code,disabled:!!t.isDel}},[e._v(e._s(t.name))])}),1)],1),o(\"a-form-item\",{attrs:{label:\"选择APP版本\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[o(\"s-table\",{ref:\"table\",attrs:{size:\"middle\",rowKey:\"id\",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,showPagination:\"auto\"},scopedSlots:e._u([{key:\"contents\",fn:function(t){return o(\"span\",{},[o(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"name\",fn:function(t){return o(\"span\",{},[o(\"ellipsis\",{attrs:{length:10,tooltip:\"\"}},[e._v(e._s(t))])],1)}},{key:\"serial\",fn:function(t,r,n){return o(\"span\",{},[e._v(e._s(n+1))])}}])})],1)],1)],1)},g=[],v={components:{STable:a[\"f\"],Ellipsis:a[\"c\"]},data:function(){var e=this;return{orgNames:[],robotVersionType:[],selectCmd:\"\",robotVersionId:\"\",showEditCmd:!1,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),queryParam:{code:\"\"},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"APP名称\",dataIndex:\"name\",scopedSlots:{customRender:\"name\"}},{title:\"版本描述\",dataIndex:\"contents\",scopedSlots:{customRender:\"contents\"}},{title:\"校验码\",dataIndex:\"code\"}],loadData:function(t){return\"\"==e.queryParam.code&&(e.queryParam.code=\"1|1\"),Object(d[\"b\"])(Object.assign(t,e.queryParam),\"/RobotVersion/queryRobotVersionMsg\").then(function(e){return console.log(e),e.result})},selectedRowKeys:new Set([]),options:{alert:{show:!0},rowSelection:{type:\"radio\",onSelect:this.onSelectChange}},optionAlertShow:!1}},created:function(){this.handleOrgList()},methods:{getRobotVersionType:function(e){this.form.setFieldsValue({code:\"\"}),console.log(e);var t={orgId:e},o=this;Object(d[\"b\"])(t,\"/RobotVersion/getRobotVersionType\").then(function(e){console.log(e.result),o.robotVersionType=e.result,0!==e.code&&o.$message.error(e.message)})},handleOrgList:function(){var e=JSON.parse(localStorage.getItem(\"user\")).orgId,t={org:e},o=this;Object(d[\"b\"])(t,\"/userManage/getHrOrgByPid\").then(function(e){o.orgNames=e.result,0!==e.code&&o.$message.error(e.message)})},getRobotApp:function(e){this.queryParam.code=e,this.$refs.table.refresh()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},onSelectChange:function(e,t,o){console.log(e,t),t&&(this.robotVersionId=e.id,console.log(this.robotVersionId))},add:function(){this.form.resetFields(),this.visible=!0,this.queryParam.code=\"\",this.robotVersionId=\"\",this.robotVersionType=[]},handleSubmit:function(){var e=this,t=this.form.validateFields,o=this;this.confirmLoading=!0,t(function(t,r){if(t)e.confirmLoading=!1;else{var n={robotVersion:e.robotVersionId};Object(d[\"b\"])(Object(c[\"a\"])({},n,r),\"/OrgRobotVersion/addOrgRobotVersionMsg\").then(function(e){0==e.code?o.$message.success(\"新建成功\"):o.$message.error(e.message),o.visible=!1,o.confirmLoading=!1,o.$emit(\"ok\",r),o.form.resetFields()})}})},handleCancel:function(){this.visible=!1}}},y=v,w=Object(f[\"a\"])(y,h,g,!1,null,null,null),O=w.exports,C={name:\"TableList\",components:{Ellipsis:a[\"c\"],STable:a[\"f\"],PageView:s[\"c\"],EditForm:b,CreateForm:O},data:function(){var e=this;return{headers:{authorization:\"authorization-text\"},queryParam:{orgId:\"\",name:\"\"},orgNames:[],editData:{},options:{alert:!1,rowSelection:null},columns:[{title:\"#\",dataIndex:\"no\",scopedSlots:{customRender:\"serial\"}},{title:\"app名称\",dataIndex:\"name\"},{title:\"单位\",dataIndex:\"orgName\"},{title:\"安卓版本\",dataIndex:\"androidType\"},{title:\"导航类型\",dataIndex:\"navigateType\"},{title:\"校验码\",dataIndex:\"code\"},{title:\"版本描述\",dataIndex:\"contents\",scopedSlots:{customRender:\"contents\"}},{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"}}],loadData:function(t){var o;return console.log(\"App 请求\",t),o=e.queryParam.orgId>0?e.queryParam.orgId:JSON.parse(localStorage.getItem(\"user\")).orgId,Object(d[\"b\"])(Object.assign(t,e.queryParam,{orgId:o}),\"/OrgRobotVersion/queryOrgRobotVersion\").then(function(e){return console.log(e),e.result})}}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.handleOrgLists()},methods:{handleOrgLists:function(){var e=this,t=JSON.parse(localStorage.getItem(\"user\")).orgId,o={org:t};Object(d[\"b\"])(o,\"/userManage/getHrOrgByPid\").then(function(t){e.orgNames=t.result,0!==t.code&&e.$message.error(t.message)}).catch(function(e){return console.log(e)})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleChange:function(e){\"uploading\"!==e.file.status&&console.log(e.file,e.fileList),\"done\"===e.file.status?this.$message.success(\"\".concat(e.file.name,\" file uploaded successfully\")):\"error\"===e.file.status&&this.$message.error(\"\".concat(e.file.name,\" file upload failed.\"))},handleRefresh:function(){this.$refs.table.refresh()},resetQuery:function(){this.queryParam={orgId:\"\",name:\"\"},this.$refs.table.refresh(!0)},handleEditVisible:function(e){this.$refs.editModal.add(e)},searchData:function(){this.$refs.table.refresh(!0)},handleDeleteUser:function(e){var t=this;this.$confirm({title:\"警告\",content:\"真的要删除 \".concat(e.name,\" 吗?\"),okText:\"删除\",okType:\"danger\",cancelText:\"取消\",onOk:function(){return console.log(\"OK\"),new Promise(function(o,r){setTimeout(Math.random()>.5?o:r,500);var n={id:e.id};Object(d[\"b\"])(n,\"/OrgRobotVersion/delOrgRobotVersionMsg\").then(function(e){console.log(\"删除返回值：\",e),0==e.code?(t.$message.success(\"删除成功\"),t.$refs.table.refresh()):t.$message.error(e.message)})}).catch(function(){return console.log(\"Oops errors!\")})},onCancel:function(){console.log(\"Cancel\")}})}}},S=C,I=(o(\"f824\"),Object(f[\"a\"])(S,r,n,!1,null,\"51699cc1\",null));t[\"default\"]=I.exports}}]);","extractedComments":[]}