{"remainingRequest":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\antd_vue\\ant-design-pro-vue\\src\\views\\instruction\\modules\\CellCmdlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\antd_vue\\ant-design-pro-vue\\src\\views\\instruction\\modules\\CellCmdlist.vue","mtime":1565408115166},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1562295152232},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1562032167570},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1562295152232},{"path":"D:\\antd_vue\\ant-design-pro-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1562295154751}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { STable } from '@/components'\r\nimport { queryData } from '@/api/common'\r\nexport default {\r\n  name: 'CellCmdlist',\r\n  components: {\r\n    STable\r\n  },\r\n  data() {\r\n    return {\r\n      // 高级搜索 展开/关闭\r\n      advanced: false,\r\n      // 查询参数\r\n      queryParam: {\r\n        name: '',\r\n        typeId: ''\r\n      },\r\n      selectItem:[],\r\n      cmdTypeList: [],\r\n      selectedRowKeys:[],\r\n      visible: false,\r\n      // 表头\r\n      columns: [\r\n        {\r\n          title: '#',\r\n          dataIndex: 'no',\r\n          scopedSlots: { customRender: 'serial' }\r\n        },\r\n\r\n        {\r\n          title: '编号',\r\n          dataIndex: 'id',\r\n          scopedSlots: { customRender: 'id' }\r\n        },\r\n        {\r\n          title: '命令名称',\r\n          dataIndex: 'name',\r\n          scopedSlots: { customRender: 'name' }\r\n        },\r\n        {\r\n          title: '命令名称参数类型',\r\n          dataIndex: 'typeName',\r\n          scopedSlots: { customRender: 'typeName' }\r\n        }\r\n      ],\r\n      // 加载数据方法 必须为 Promise 对象\r\n      loadData: parameter => {\r\n        return queryData(Object.assign(parameter, this.queryParam), '/cmdUnit/list').then(res => {\r\n          console.log(res)\r\n          return res.result\r\n        })\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    rowSelection() {\r\n      const { selectedRowKeys } = this\r\n      return {\r\n        hideDefaultSelections: true,\r\n        selectedRowKeys:this.selectedRowKeys,\r\n        selections:true,\r\n        type: 'radio',\r\n        onChange: (selectedRowKeys, selectedRows) => {\r\n            this.selectItem = selectedRows[0];    \r\n            this.selectedRowKeys = selectedRowKeys       \r\n          console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n\r\n        },\r\n        getCheckboxProps: record => ({\r\n          props: {\r\n            disabled: record.name === 'Disabled User', // Column configuration not to be checked\r\n            name: record.name\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getCmdType()\r\n  },\r\n  methods: {\r\n    show(record) {\r\n      this.visible = true;\r\n      if(record != 0){\r\n        this.selectedRowKeys.push(record)\r\n      }\r\n    },\r\n    handleSubmit() {\r\n        if(this.selectItem.length <= 0 ){\r\n            this.$message.error('请选择一项');\r\n            return false;\r\n        }\r\n        this.visible = false;\r\n        this.$emit('ok', this.selectItem);\r\n       \r\n    },\r\n    // 获取单元指令类型\r\n    getCmdType() {\r\n      queryData({}, '/cmdUnitType/getCmdUnitTypeList').then(res => {\r\n        console.log(res)\r\n        if (res.code == 0) {\r\n          this.cmdTypeList = res.result\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 下拉框\r\n    filterOption(input, option) {\r\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n    },\r\n    // 处理刷新\r\n    handleRefresh() {\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    // 表单重置\r\n    resetQuery() {\r\n      this.queryParam = {}\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    handleEditVisible(record) {\r\n      this.$refs.editModal.add(record)\r\n    },\r\n    // 搜索内容\r\n    searchData() {\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    afterClose(){\r\n       this.selectedRowKeys = [];\r\n        this.selectItem = []\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["CellCmdlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CellCmdlist.vue","sourceRoot":"src/views/instruction/modules","sourcesContent":["<template>\r\n    <a-modal\r\n      title=\"选择命令\"\r\n      style=\"top: 20px;\"\r\n      :width=\"1000\"\r\n      v-model=\"visible\"\r\n      :afterClose=\"afterClose\"\r\n      @ok=\"handleSubmit\"\r\n    >\r\n         <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\">\r\n        <a-row :gutter=\"48\">\r\n          <a-col :md=\"6\" :sm=\"24\">\r\n            <a-form-item label=\"名称\">\r\n              <a-input v-model=\"queryParam.name\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"8\" :sm=\"24\">\r\n            <a-form-item label=\"单位指令类型\">\r\n              <a-select\r\n                v-model=\"queryParam.typeId\"\r\n                showSearch\r\n                placeholder=\"选择单位指令类型\"\r\n                optionFilterProp=\"children\"\r\n                :filterOption=\"filterOption\"\r\n              >\r\n                <a-select-option v-for=\"(item ,key) in cmdTypeList\" :key=\"key\" :value=\"item.id\">\r\n                  {{item.name}}\r\n                </a-select-option>\r\n              </a-select>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"!advanced && 8 || 24\" :sm=\"24\">\r\n            <span class=\"table-page-search-submitButtons\" :style=\"advanced && { float: 'right', overflow: 'hidden' } || {} \">\r\n              <a-button type=\"primary\" @click=\"searchData()\">查询</a-button>\r\n              <a-button style=\"margin-left: 8px\"  @click=\"resetQuery()\">重置</a-button>\r\n            </span>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n    <s-table\r\n        ref=\"table\"\r\n        size=\"default\"\r\n        rowKey=\"id\"\r\n        :columns=\"columns\"\r\n        :data=\"loadData\"\r\n        showPagination=\"auto\"\r\n        :rowSelection=\"rowSelection\"\r\n      >\r\n      <span slot=\"serial\" slot-scope=\"text, record, index\">\r\n          {{ index + 1 }}\r\n      </span>\r\n      </s-table>\r\n  \r\n    </a-modal>\r\n</template>\r\n<script>\r\nimport { STable } from '@/components'\r\nimport { queryData } from '@/api/common'\r\nexport default {\r\n  name: 'CellCmdlist',\r\n  components: {\r\n    STable\r\n  },\r\n  data() {\r\n    return {\r\n      // 高级搜索 展开/关闭\r\n      advanced: false,\r\n      // 查询参数\r\n      queryParam: {\r\n        name: '',\r\n        typeId: ''\r\n      },\r\n      selectItem:[],\r\n      cmdTypeList: [],\r\n      selectedRowKeys:[],\r\n      visible: false,\r\n      // 表头\r\n      columns: [\r\n        {\r\n          title: '#',\r\n          dataIndex: 'no',\r\n          scopedSlots: { customRender: 'serial' }\r\n        },\r\n\r\n        {\r\n          title: '编号',\r\n          dataIndex: 'id',\r\n          scopedSlots: { customRender: 'id' }\r\n        },\r\n        {\r\n          title: '命令名称',\r\n          dataIndex: 'name',\r\n          scopedSlots: { customRender: 'name' }\r\n        },\r\n        {\r\n          title: '命令名称参数类型',\r\n          dataIndex: 'typeName',\r\n          scopedSlots: { customRender: 'typeName' }\r\n        }\r\n      ],\r\n      // 加载数据方法 必须为 Promise 对象\r\n      loadData: parameter => {\r\n        return queryData(Object.assign(parameter, this.queryParam), '/cmdUnit/list').then(res => {\r\n          console.log(res)\r\n          return res.result\r\n        })\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    rowSelection() {\r\n      const { selectedRowKeys } = this\r\n      return {\r\n        hideDefaultSelections: true,\r\n        selectedRowKeys:this.selectedRowKeys,\r\n        selections:true,\r\n        type: 'radio',\r\n        onChange: (selectedRowKeys, selectedRows) => {\r\n            this.selectItem = selectedRows[0];    \r\n            this.selectedRowKeys = selectedRowKeys       \r\n          console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n\r\n        },\r\n        getCheckboxProps: record => ({\r\n          props: {\r\n            disabled: record.name === 'Disabled User', // Column configuration not to be checked\r\n            name: record.name\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getCmdType()\r\n  },\r\n  methods: {\r\n    show(record) {\r\n      this.visible = true;\r\n      if(record != 0){\r\n        this.selectedRowKeys.push(record)\r\n      }\r\n    },\r\n    handleSubmit() {\r\n        if(this.selectItem.length <= 0 ){\r\n            this.$message.error('请选择一项');\r\n            return false;\r\n        }\r\n        this.visible = false;\r\n        this.$emit('ok', this.selectItem);\r\n       \r\n    },\r\n    // 获取单元指令类型\r\n    getCmdType() {\r\n      queryData({}, '/cmdUnitType/getCmdUnitTypeList').then(res => {\r\n        console.log(res)\r\n        if (res.code == 0) {\r\n          this.cmdTypeList = res.result\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 下拉框\r\n    filterOption(input, option) {\r\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n    },\r\n    // 处理刷新\r\n    handleRefresh() {\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    // 表单重置\r\n    resetQuery() {\r\n      this.queryParam = {}\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    handleEditVisible(record) {\r\n      this.$refs.editModal.add(record)\r\n    },\r\n    // 搜索内容\r\n    searchData() {\r\n      this.$refs.table.refresh(true)\r\n    },\r\n    afterClose(){\r\n       this.selectedRowKeys = [];\r\n        this.selectItem = []\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}