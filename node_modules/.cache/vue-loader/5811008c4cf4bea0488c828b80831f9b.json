{"remainingRequest":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/showRobotNote.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/showRobotNote.vue","mtime":1587451119878},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/babel-loader/lib/index.js","mtime":1571637266900},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js","mtime":1571637450640}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { STable, Ellipsis } from '@/components'\nimport { queryData } from '@/api/common'\nimport editRobotNote from './EditRobotNote'\nimport { uploadUrl } from '@/api/upload'\n\nexport default {\n  components: {\n    STable,\n    Ellipsis,\n    editRobotNote\n  },\n  data() {\n    return {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 7 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 13 }\n      },\n      columns: [\n        {\n          title: '序号',\n          dataIndex: 'id',\n          scopedSlots: { customRender: 'serial' }\n        },\n        {\n          title: '记录日期',\n          dataIndex: 'noteDate'\n        },\n        {\n          title: '开机时间',\n          dataIndex: 'openTime'\n        },\n        {\n          title: '开机次数',\n          dataIndex: 'openCount'\n        },\n        {\n          title: '在线时长',\n          dataIndex: 'onlineDuration'\n        },\n        {\n          title: '行走里程',\n          dataIndex: 'mileage'\n        },\n        {\n          title: '最后一次心跳时间',\n          dataIndex: 'lastOnlineTime'\n        },\n        {\n          title: '业务匹配次数',\n          dataIndex: 'buisCount'\n        },\n        {\n          title: '闲聊匹配次数',\n          dataIndex: 'chatCount'\n        },\n        {\n          title: '备注',\n          dataIndex: 'remark',\n          scopedSlots: { customRender: 'remark' }\n        },\n        {\n          title: '操作',\n          dataIndex: 'action',\n          scopedSlots: { customRender: 'action' }\n        }\n      ],\n      url: uploadUrl + 'RobotNote/exportNote',\n      // 查询参数\n      queryParam: {\n        startDate: '',\n        endDate: '',\n        robotCode: '',\n        robotId: ''\n      },\n      visible: false,\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      loadData: parameter => {\n        var parma = Object.assign(parameter, this.queryParam)\n        return queryData(parma, '/RobotNote/queryRobotNote').then(res => {\n          console.log(res)\n          return res.result\n        })\n      }\n    }\n  },\n  methods: {\n    show (record) {\n      this.queryParam.robotCode = record.code\n      this.queryParam.robotId = record.id\n      this.queryParam.startDate = ''\n      this.queryParam.endDate = ''\n      this.visible = true\n    },\n    handleOk () {\n      this.$refs.table.refresh(true)\n    },\n    // 查看运行记录\n    editRemark(record) {\n      this.$refs.editRobotNote.edit(record)\n    },\n    onChange(date, dateString) {\n      this.queryParam.startDate = dateString\n      // this.$refs.table.refresh()\n    },\n    onChange1(date, dateString) {\n      this.queryParam.endDate = dateString\n      // this.$refs.table.refresh()\n    },\n    // 重置\n    resetQuery() {\n      this.$refs.table.refresh(true)\n    },\n    searchData() {\n      this.$refs.table.refresh()\n    },\n\n    handleSubmit() {\n      this.visible = false\n    }\n  }\n}\n",{"version":3,"sources":["showRobotNote.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"showRobotNote.vue","sourceRoot":"src/views/robot/modules","sourcesContent":["<template>\n  <a-modal\n    title=\"运行记录\"\n    style=\"top: 10px;left: 130px\"\n    :width=\"1300\"\n    v-model=\"visible\"\n    @ok=\"handleSubmit\"\n    v-preventReClick\n    :destroyOnClose=\"true\"\n    :maskClosable=\"false\"\n  >\n    <a-card :bordered=\"false\">\n      <div class=\"table-page-search-wrapper\">\n        <a-form layout=\"inline\">\n          <a-row :gutter=\"48\">\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"开始时间\">\n                <a-date-picker showTime format=\"YYYY-MM-DD\" @change=\"onChange\" />\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"截止时间\">\n                <a-date-picker showTime format=\"YYYY-MM-DD\" @change=\"onChange1\" />\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"8\" :sm=\"24\">\n              <span class=\"table-page-search-submitButtons\">\n                <a-button type=\"primary\" @click=\"searchData()\">查询</a-button>\n                <a-button style=\"margin-left: 8px\" @click=\"resetQuery()\">重置</a-button>\n                <a-button style=\"margin-left: 8px\" :href = \"url+'?startDate='+this.queryParam.startDate+ '&endDate=' + this.queryParam.endDate+ '&robotCode=' + this.queryParam.robotCode + '&robotId=' + this.queryParam.robotId\">数据导出</a-button>\n              </span>\n            </a-col>\n          </a-row>\n        </a-form>\n      </div>\n      <s-table\n        ref=\"table\"\n        size=\"middle\"\n        rowKey=\"no\"\n        :columns=\"columns\"\n        :data=\"loadData\"\n        showPagination=\"auto\"\n      >\n        <span slot=\"serial\" slot-scope=\"text, record, index\">{{ index + 1 }}</span>\n        <span slot=\"action\" slot-scope=\"text, record\">\n          <template>\n            <a @click=\"editRemark(record)\">备注</a>\n          </template>\n        </span>\n        <template slot-scope=\"text\" slot=\"remark\">\n          <ellipsis :length=\"10\" tooltip>{{text}}</ellipsis>\n        </template>\n      </s-table>\n      <edit-robot-note ref=\"editRobotNote\" @ok=\"handleOk\" />\n    </a-card>\n  </a-modal>\n</template>\n\n<script>\nimport { STable, Ellipsis } from '@/components'\nimport { queryData } from '@/api/common'\nimport editRobotNote from './EditRobotNote'\nimport { uploadUrl } from '@/api/upload'\n\nexport default {\n  components: {\n    STable,\n    Ellipsis,\n    editRobotNote\n  },\n  data() {\n    return {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 7 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 13 }\n      },\n      columns: [\n        {\n          title: '序号',\n          dataIndex: 'id',\n          scopedSlots: { customRender: 'serial' }\n        },\n        {\n          title: '记录日期',\n          dataIndex: 'noteDate'\n        },\n        {\n          title: '开机时间',\n          dataIndex: 'openTime'\n        },\n        {\n          title: '开机次数',\n          dataIndex: 'openCount'\n        },\n        {\n          title: '在线时长',\n          dataIndex: 'onlineDuration'\n        },\n        {\n          title: '行走里程',\n          dataIndex: 'mileage'\n        },\n        {\n          title: '最后一次心跳时间',\n          dataIndex: 'lastOnlineTime'\n        },\n        {\n          title: '业务匹配次数',\n          dataIndex: 'buisCount'\n        },\n        {\n          title: '闲聊匹配次数',\n          dataIndex: 'chatCount'\n        },\n        {\n          title: '备注',\n          dataIndex: 'remark',\n          scopedSlots: { customRender: 'remark' }\n        },\n        {\n          title: '操作',\n          dataIndex: 'action',\n          scopedSlots: { customRender: 'action' }\n        }\n      ],\n      url: uploadUrl + 'RobotNote/exportNote',\n      // 查询参数\n      queryParam: {\n        startDate: '',\n        endDate: '',\n        robotCode: '',\n        robotId: ''\n      },\n      visible: false,\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      loadData: parameter => {\n        var parma = Object.assign(parameter, this.queryParam)\n        return queryData(parma, '/RobotNote/queryRobotNote').then(res => {\n          console.log(res)\n          return res.result\n        })\n      }\n    }\n  },\n  methods: {\n    show (record) {\n      this.queryParam.robotCode = record.code\n      this.queryParam.robotId = record.id\n      this.queryParam.startDate = ''\n      this.queryParam.endDate = ''\n      this.visible = true\n    },\n    handleOk () {\n      this.$refs.table.refresh(true)\n    },\n    // 查看运行记录\n    editRemark(record) {\n      this.$refs.editRobotNote.edit(record)\n    },\n    onChange(date, dateString) {\n      this.queryParam.startDate = dateString\n      // this.$refs.table.refresh()\n    },\n    onChange1(date, dateString) {\n      this.queryParam.endDate = dateString\n      // this.$refs.table.refresh()\n    },\n    // 重置\n    resetQuery() {\n      this.$refs.table.refresh(true)\n    },\n    searchData() {\n      this.$refs.table.refresh()\n    },\n\n    handleSubmit() {\n      this.visible = false\n    }\n  }\n}\n</script>"]}]}