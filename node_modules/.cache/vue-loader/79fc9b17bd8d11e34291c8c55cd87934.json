{"remainingRequest":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/EditImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/src/views/robot/modules/EditImage.vue","mtime":1575082421411},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/thread-loader/dist/cjs.js","mtime":1571637441620},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/babel-loader/lib/index.js","mtime":1571637266900},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/cache-loader/dist/cjs.js","mtime":1571637271763},{"path":"/Users/cyb/work/KaiFa/cz_workSpace/robotWeb/node_modules/vue-loader/lib/index.js","mtime":1571637450640}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { queryData, addData } from '@/api/common'\r\nimport { STable } from '@/components'\r\nimport { constants } from 'fs'\r\nexport default {\r\n  components: {\r\n    STable\r\n  },\r\n  data() {\r\n    return {\r\n      edit:{id :0,name:\"\",fileName:\"\",imageName:'',descn:\"\"},\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 7 }\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 13 }\r\n      },\r\n      visible: false,\r\n      appImageVisible:false,\r\n      appImageWebUrl: '',//å›¾ç‰‡è®¿é—®åœ°å€\r\n      descnVisible:false,\r\n      updataVisible:false,\r\n      fileList: [],\r\n      confirmLoading: false,\r\n      form: this.$form.createForm(this),\r\n      queryParam:{},\r\n      imageList: [{\r\n            \"fileName\": '123456.png',\r\n            \"name\": \"å…šå»ºå¾…æœºï¼ˆåˆ›åˆ›ï¼‰\",\r\n        }, {\r\n            \"fileName\": '123457.png',\r\n            \"name\": \"æ•™è‚²å¾…æœºï¼ˆåˆ›åˆ›ï¼‰\",\r\n        }, {\r\n            \"fileName\": '123458.png',\r\n            \"name\": \"åŒ»ç–—å¾…æœºï¼ˆåˆ›åˆ›ï¼‰\",\r\n        }, {\r\n            \"fileName\": '123459.png',\r\n            \"name\": \"æ”¿åŠ¡å¾…æœºï¼ˆåˆ›åˆ›ï¼‰\",\r\n        }],\r\n      // è¡¨å¤´\r\n      columns: [\r\n        {\r\n          title: '#',\r\n          dataIndex: 'no',\r\n          scopedSlots: { customRender: 'serial' }\r\n        },\r\n\r\n        {\r\n          title: 'æœºå™¨äººåç§°',\r\n          dataIndex: 'robotName',\r\n          scopedSlots: { customRender: 'robotName' }\r\n        },\r\n        {\r\n          title: 'æœºå™¨äººç¼–ç ',\r\n          dataIndex: 'code',\r\n          scopedSlots: { customRender: 'code' }\r\n        }\r\n      ],\r\n      // åŠ è½½æ•°æ®æ–¹æ³• å¿…é¡»ä¸º Promise å¯¹è±¡\r\n      data:[],\r\n      options: false,\r\n      optionAlertShow: false\r\n    }\r\n  },\r\n  created() {},\r\n  methods: {\r\n      add(record){\r\n        console.log(record)\r\n        this.visible = true\r\n        if(record.type == \"ä¸»é¡µ\"){\r\n            this.descnVisible = true\r\n            this.updataVisible = false\r\n            this.edit.descn = record.descn;\r\n        }else{\r\n            this.updataVisible = true\r\n            this.descnVisible = false\r\n        }\r\n        this.edit.id = record.id;\r\n        this.edit.fileName = record.fileName;\r\n        this.edit.imageName = record.name;\r\n        this.edit.name = record.name;\r\n        this.data = [];\r\n        this.data.push(record);\r\n      },\r\n     filterOption(input, option) {\r\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n    },\r\n    handleSubmit() {\r\n      const {\r\n        form: { validateFields }\r\n      } = this\r\n      var _this = this\r\n      this.confirmLoading = true\r\n      validateFields((errors, values) => {\r\n        if (!errors) {\r\n          if(this.edit.name == ''|| this.edit.name == null){\r\n            this.$message.error('æ‡’å¾—åç§°éƒ½ä¸å†™äº†ï¼ŸğŸ˜ˆ');\r\n            return;\r\n          }\r\n          var param = {\r\n            name:this.edit.name,\r\n            descn:this.edit.descn,\r\n            entityId:_this.edit.id,\r\n            fileName:this.edit.fileName\r\n          }\r\n          queryData({ ...param, ...values }, '/appImage/save').then(res => {\r\n            if (res.code == 0) {\r\n              _this.$message.success('ä¿®æ”¹æˆåŠŸ')\r\n              this.edit={id :0,name:\"\",fileName:\"\",imageName:'',descn:\"\"}\r\n            } else {\r\n              _this.$message.error(res.message)\r\n            }\r\n            _this.visible = false\r\n            _this.confirmLoading = false\r\n            _this.$emit('ok', values)\r\n            // é‡ç½®è¾“å…¥æ¡†å†…å®¹\r\n            _this.form.resetFields()\r\n          })\r\n        } else {\r\n          this.confirmLoading = false\r\n        }\r\n      })\r\n    },\r\n    handleCancel() {\r\n      this.appImageVisible = false\r\n    },\r\n    //å…¬å…±å›¾ç‰‡é€‰æ‹©åˆ—è¡¨ç›‘å¬äº‹ä»¶\r\n    handleAppImageChange2 (value) {\r\n      this.edit.fileName = value\r\n    },\r\n    //æ–‡ä»¶é¢„è§ˆ\r\n    handlePreview(file) {\r\n      console.log(file.url+\"/\"+ file.thumbUrl)\r\n      this.appImageWebUrl = file.url || file.thumbUrl\r\n      this.appImageVisible = true\r\n    },\r\n    // åˆ é™¤æ–‡ä»¶\r\n    handleRemoveFile(file) {\r\n      let _this = this\r\n      queryData({ fileName: file.response.fileName },'/appImage/delFile').then(res => {\r\n        if (res.code == 0) {\r\n          _this.$message.error(res.message)\r\n          return true\r\n        } else {\r\n          _this.$message.error(res.message)\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    //æ–‡ä»¶é•¿ä¼ ç›‘å¬\r\n    handleChange ({ fileList }) {\r\n      if (fileList.length > 0) {\r\n        if (fileList[0].status == 'done') {\r\n          var res = fileList[0].response;\r\n          console.log(res)\r\n          if (res.code == 0) {\r\n            this.edit.fileName = res.fileName;\r\n            this.$message.success(`${res.fileName} ä¸Šä¼ æˆåŠŸ`)\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        }\r\n      }\r\n      this.fileList = fileList\r\n    },\r\n  }\r\n}\r\n",null]}